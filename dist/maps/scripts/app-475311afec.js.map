{"version":3,"sources":["scripts/app.js"],"names":["angular","module","service","$log","intellicarAPI","$q","$timeout","log","vm","this","lat","lng","center","latitude","longitude","zoom","bounds","marker","id","coords","options","draggable","events","dragend","eventName","args","getPosition","lon","labelContent","labelAnchor","labelClass","getCenter","getZoom","getMarker","getBounds","updateCenter","updateZoom","updateMarker","MultiMapTestController","$scope","$rootScope","multiMapTestService","loadMap","inMap","createRandomMarker","i","idKey","lat_min","southwest","lat_range","northeast","lng_min","lng_range","Math","random","ret","title","randomMarkers","$watch","nv","ov","markers","push","$inject","controller","MapTestController","mapTestService","vehicleMgmtService","settingsService","startupData","handleGetMyVehicles","resp","handleGetMyVehiclesFailure","getData","stateParams","groupService","getMyVehiclesMap","getCurrentGroup","then","VehicleMgmtController","setTab","appConstants","VEHICLE","assets","groupBtnStatus","isdiplay","showBtn","currentGroupAsset","lastGroup","handleStartupData","key","getCurrentGroupPath","handleStartupDataFailure","init","currentGroup","showNewVehicleField","msg","userMgmtService","$state","handleResponse","resolve","handleFailure","reject","setCurrentGroup","getMyUsersMap","createUser","newUser","body","pgrouppath","name","usermeta","password","userService","UserMgmtController","USER","ASSIGN_GROUP_PERM","ASSIGN_ROLE_PERM","groupData","heading","width","height","datas","list","buttons","iconType","icon","color","fColor","onClick","data","func","processGUI","userpath","item","assetpath","grouppath","selectedGrouppath","idx","permissions","indexOf","assignGroup","assignRole","confirmPassword","errorMsg","$broadcast","showNewUserField","assignGroups","getUsers","users","getMyUsersMapList","groupUsers","all","handleUsersResponse","setData","ASSIGN_USER_PERM","assignRoles","getRoles","userRoles","getMyRolesList","groupRoles","handleRolesResponse","permission","matching","role","visible","setTabListener","tabs","GROUP","ROLE","DEVICE","getTabIndex","assetType","tabIndex","addSetTabListener","listener","setCurrentGroupPath","info","ui_asset_type","getRequestedGroupPath","handleAssetClick","asset","tab","tabState","stateService","STATE_HOME_MANAGEMENT_DOT","go","SettingsController","getTabState","$on","event","toState","toParams","fromState","fromParams","leafState","getStateTree","leaf","selectedTab","dstState","parent","dotState","preventDefault","tabClick","groupMgmtService","getMyGroupsMap","createGroup","newGroup","GroupMgmtController","$stateParams","handleMyVehiclesFailure","panelData","showNewGroupField","assignUserSuccess","assignUsers","rolepath","deAssignRole","deAssignRoleSuccess","processGui","assignRoleSuccess","getAssignedUsersMapList","getAssignedRolesList","assignUser","roleMgmtService","getMyRolesMap","RoleMgmtController","permissionService","$mdDialog","ASSIGN_PERMISSION","assignPermissionSuccess","showNewRoleField","addPermission","s","treeDataService","getManagementTree","getPermissions","permissionMap","assignedPerm","createRole","newRoleName","roleService","createRoleSuccess","assignPermission","deviceMgmtService","getMyDevicesMap","DeviceMgmtController","onLoad","showNewDeviceField","startupService","rightNavMgmtService","RightNavMgmtController","toggleRightSidebar","right_nav_toggle","document","getElementById","style","marginRight","listeners","getDashboardTree","getMyVehicles","addListener","LeftNavDashboardController","leftNavDashboardService","$filter","treeFilter","state","tree_search_pattern","search_results","handleDashboardTree","tree_data","handleMyVehicles","subscribe","test","console","toggleCheck","checkStatus","items","length","propagateCheckFromParent","subscribeCheckStatus","verifyAllParentsCheckStatus","status","subscriptionKey","mqttService","subscribeAsset","unsubscribeAsset","flag","vehiclePath","helperService","getAssetPath","subscriptionMsg","path","unsubscribe","retVal","expandAll","expand_tree","callListeners","getManagementTreeWithUser","getManagementTreeNoUser","LeftNavManagementController","startupTreeData","leftNavManagementService","availableFields","supportedFields","handleResponseFailure","setFirstGroup","lastGroupPath","collapsed","toggle","obj","selectedAsset","loading","filterTree","toggleLeftSidebar","left_nav_toggle","marginLeft","toString","getDashboardAlerts","reportData","liveAlarmData","getReportData","getAlarmData","updateFenceReport","vehicleno","eachReport","report","eachFence","fence","eachVehicle","vehicle","activeFences","activeFence","activeinfo","eachitem","fenceObj","reportName","fenceName","reportTypePath","substr","triggerType","updateAlarms","reasonType","alarmreason","type","myvehicle","timestamp","opermode","vehiclepath","deviceid","RightNavDashboardController","rightNavAlertDashboardService","geofenceReportService","vehicleService","mapService","$interval","getStyle","alertDetails","vehicleData","searchAlertStr","reports","getMyGeofenceReports","fencereport","vehicles","assg","currRep","formatAlertData","count","details","getDashboardAlertsFailure","alertResolve2","alertId","splice","alertClick","alertid","initialize","collapseAlertPanel","panel","collapse","navAlerts","category","alarms","odometer","ignition","mobility","activeFilter","finalTabHeightHalf","finalTabHeight","isOpened","car","resolveFilter","resolveFilterAll","getColorCounter","getColor","getColors","itemClicked","level","active","highlightMarker","vehiclesByNumber","pushDataToController","activeTabData","mapObj","hours","hour","minutes","minute","days","day","an","a few seconds","a","re","RegExp","Object","keys","join","getTimeDiff","start","entry","end","exit","stillActive","Date","moment","unix","duration","diff","humanize","replace","matched","returnLength","key2","vehicleClosed","vehicleOpened","returnHeight","veh","navFilter","RESOLVED","UNRESOLVED","RESOLVING","SAVING","SAVED","resolutionKeyEvent","e","ctrlKey","which","saveRep","resolved","resolveStr","rep","mapServiceUpdate","ignitionstatus","historyGeofenceReports","date","startTime","setHours","getHours","endTime","getTime","promiseList","reportId","vehiclesAssetPath","fences","detail","assgfromassetid","starttime","endtime","geofenceService","getReportHistory","readHistoryInfo","history","reportpath","fencepath","myVehicle","parseInt","fentry","fexit","getAddress","midKey","index","promise","geocodeService","popoverIndex","gotAddress","addr","vehicleAddress","WebuiPopovers","updateContent","activeAlarmData","$","webuiPopover","trigger","animation","userprefService","dialogService","filterStr","map","mapOptions","clickedMarker","markersByPath","circles","polygons","selectedFenceObj","other","setInMapLocation","loc","copy","latlng","google","maps","LatLng","setCenter","setZoom","getPolygonMidPoint","polygon","bound","LatLngBounds","extend","showHistory","show","mobilize","mobilityRequest","immobalizeDialog","confirm","templateUrl","clickOutsideToClose","escapeToClose","locals","params","ok","cancel","mapClickEvent","fenceInfoWindowClose","infoWindowClose","getMainMap","MUMBAI","BANGALORE","HYDERABAD","PUNE","DELHI","CHENNAI","KOLKATA","locations","notation","currentLocation","setUserPref","userSettings","station","getCurrentLocation","vehicleObj","rtgps","mapStyles","dark","featureType","elementType","stylers","saturation","lightness","visibility","weight","MapController","cpuService","geofenceViewService","customMapOverlay","$compile","historyService","checkNoComm","callback","currentTime","lastSeenAt","noCommThreshold","str","getType","PARKING","SERVICE_STATION","COMPETITOR_HUB","CITY_LIMIT","TOLL_PLAZA","getStroke","MIN_STROKE","DEFAULT_STROKE","tagdata","olafilter","match","checkFilterString","geoFilters","parkingLot","serviceStation","competitorHub","cityLimits","showVehicleNumberWindow","inCustomMaker","getVisible","showVehicleNumber","hide","hideVehicleNumber","setMapHeight","wh","window","isRendered","el","css","header_height","isr_interval","setInterval","clearInterval","dateFormat","markerInfowindow","InfoWindow","fenceInfowindow","inMarkers","excludeFilters","mainFilters","markerIconChangeTriggered","zoomhappened","onRoaded","offRoaded","leftToolbar","getToolbarVar","createMap","getMarkerCenter","onRoadCheck","runFilters","runStats","offRoadCheck","checkRoaded","meta","onroad","setClickedMarker","model","vehiclesByPath","hideMobilityControls","updateMarker2","Marker","position","getIcon","setContent","innerHTML","open","setMap","customOverlay","setPosition","markerPos","updateMarkerIcon","applyFilterToMarker","showAllMarkers","setVisible","close","centerMap","centerLatLng","fenceMatch","matchedMarker","floor","maplat","maplng","abs","polygonsByPath","fencePolygon","control","toLowerCase","includes","circlesByPath","fenceCircle","vehicleNumber","matchesAnyMarkerData","showVehicleNo","input","result","constructor","Array","eachidx","lowercasefilterStr","lowercaseMarkerStr","vehicleStats","showall","running","stopped","noComm","devPullout","immobilized","filter","getStats","carbattery","showAll","tollplaza","carBattery","devBattery","getMyFences","applyFilters","filterType","createPolygons","createCircles","polygonMap","paths","j","strokeColor","strokeWeight","googlePolygon","Polygon","fillColor","fillOpacity","evt","latLng","googleObject","circlesMap","googleCircle","Circle","radius","DEVBATTERY_THRESHOLD","CARBATTERY_THRESHOLD","filterData","recall","highlight","unhighlight","devbattery","current","currentMap","historyMap","highlightMe","CustomMarker","vn","fitBounds","downloadView","selectedView","latlngList","UNKNOWN","Vehicle No","Device ID","Chassis No","chassisno","Make","cartype","Last comm time","format","Odometer","OnRoad","Mobility","mobilistatusFilter","Ignition","ignitionstatusStr","Vehicle Battery","Device Battery","Team","team","Leasing Executive","le","Last Location","importFileservice","JSONToCSVConvertor","mapCanvas","Map","searchBox","places","SearchBox","controls","ControlPosition","TOP_LEFT","getPlaces","forEach","place","geometry","viewport","union","location","lastZoomLevel","origin","Point","getDirection","setIcon","onload","$apply","fenceWindowLoad","traceObj","resize","MAP_STYLES","DARK","DEFAULT","triggerMarkerIconChange","changeMarkerIcon","changeMapStyle","styleType","setOptions","styles","RED_ICON","GREEN_ICON","BLUE_ICON","getMarkerColor","mobilistatus","getIconURL","SCALE","zoomChanged","checkZoomLevel","size","Size","scaledSize","anchor","direction","url","min","max","resizeMap","runStatsAtStart","runtime","ImmobalizeController","notify","commandSent","cancelImmobalize","success","failure","executeMobilityCommand","immobilize","vehicleAPIService","lastCommand","action","username","doneat","okImmobilize","getMobilityCommandStatus","InnerMapController","$mdToast","myAlarmService","historyData","value","trace","geoFenceReports","selectedVehiclesCount","selectedFencesCount","filteredItems","filteredFenceItems","myHistoryData","jsonReportData","fenceFilter","clearMap","startMarker","endMarker","traceControls","stopMotion","moveTimeline","getHistoryData","selectedVehicle","timeLimit","body2","gpsDataPromise","reportsService","getDeviceLocation","alarmDataPromise","getAlarmInfo","batteryDataPromise","getBatteryInfo","drawTrace","handleGetLocationFailure","syncBatteryInfo","traceData","batteryData","bidx","gpstime","lastBattery","respArray","compare","b","alarmData","numsat","ignstatus","speed","parseFloat","toFixed","sort","drawPolylines","gotHistoryEvent","alarm","startIdx","endIdx","lastBeacon","label","Polyline","icons","SymbolPath","FORWARD_CLOSED_ARROW","offset","repeat","strokeOpacity","getDefaultTime","startTimeHour","endTimeHour","seconds","milliseconds","MILLISEC","hrs24","week","interval","timeline","expandedGraphs","playing","SPEEDS","excludedAlarm","togglePlay","isPointer","setPointerTransition","startMotion","stepForward","stepBackward","incrementSpeed","decrementSpeed","engine","setTime","defaultTime","HistoryController","$window","createCanvasForDownload","mapImage","afterImageRender","renderedImgCount","setTimeout","attr","dCanvas","toDataURL","appendTo","click","renderSvgToCanvas","param","left","top","svg","tcGraphs","charts","object","vis","visAxis","svgHeight","svgWidth","childGraph","canParent","ctx","strokeStyle","strokeRect","XMLSerializer","serializeToString","DOMURL","URL","webkitURL","img","Image","svgBlob","Blob","createObjectURL","drawImage","src","createElement","append","getContext","fillStyle","fillRect","image","texts","utc","getCurrentPos","counter","tLeft","font","tTop","fillText","gotData","el1","setDefaultVehicle","generateTimeline","alarmIdx","clicked","first","currentPathIdx","dummy","getDefaultGraphObject","startIndex","endIndex","point","getTimelineObjects","pointer","element","keyup","keydown","keyCode","jumpToAlarm","jumpToTime","createExpandedGraph","tempInter","expDiv","expDivParent","margin","ignChart","values","movingChart","barCharts","ign_rect","moving_rect","pre_ignstatus","pre_moving","jdx","moving","speedThreshold","x1","x2","d3Graph","resizeTcGraphs","generateExpandedGraph","parseToGraphData","draw","graphs","x","y","selectTimelineData","binSearch","array","mid","binLooping","stacksize","graphStartDrag","self","mouseX","d3","mouse","button","mouseclicked","right","zoomStartX","zoomStartTemp","xScale","invert","selectRect","bottom","restoreGraph","graphEndDrag","zoomEndTemp","zoomStart","zoomEnd","tempStartZoom","updateAllTimelines","timePopRight","mouseHoverEvent","mouseY","tempMouseX","selectRectWidth","focusRecMargin","focusTime","focusStr","rectWidth","trasnX","select","text","zoomGraphMouseEvent","tempStartZoon","selectAll","remove","clipRect","visP","xAxis","axisBottom","scale","ticks","tickFormat","d","timeFormat","y1Axis","axisLeft","y1Scale","y2Axis","axisRight","y2Scale","call","chart","lineGenY1","line","lineGenY2","graph","getYlineGen","yAxis","strokeWidth","rectX","focusCircle","focusText","nameText","focusLine","on","updateLine","val","getAxisScale","axisScale","y1","y2","dataItem","xl","xh","yl","yh","scaleLinear","range","domain","classed","timelineObject","graphY","unit","redraw","downloadScreenShot","mapWidth","mapHeight","abcd","reqelem","ignoreList","transform","comp","split","mapleft","isNaN","maptop","html2canvas","logging","onrendered","canvas","mapImageObj","useCORS","getMatches","matchArray","modelString","historyFenceInfowindow","getHistory","loadingData","time","opcode","bool","moveMapWithMarker","projection","getProjection","centerPoint","fromLatLngToPoint","pow","worldPoint","xdiff","ydiff","panX","panY","panBy","mouseMoveEvent","pageX","graphBase","barHeight","barMargin","barBase","myCanvas","cw","ch","wr","getPopLeft","gotHistory","gotHistoryEventFailed","historyFenceWindowLoad","getMyFencesListener","toggleExpandedGraphs","animate","tempTimeline","zStartInit","zEndInit","zStartTemp","zEndTemp","seekGraph","parentGraph","zMax","zMin","zoomAmount","anim","tempSelectedvehicles","HistoryTableController","getTableData","addressList","dateTime","ignitionStatus","jsonHistoryData","vehicle_Name","load","packages","setOnLoadCallback","drawTable","disableDownload","showLoading","table","visualization","Table","tableContainer","convertLatLngToAddr","hover","className","myclass","DataTable","addColumn","addRows","dateFormatter","DateFormat","pattern","showRowNumber","page","pageSize","allowHtml","alternatingRowStyle","multiSelect","clearChart","showTableData","downloadFile","toolbar","geoData","getService","handleFences","blueColor","getDefaultCircle","clickable","getDefaultPolygon","getPolygonFromInfo","polygonInfo","gpolygon","vertex","getCircleFromInfo","circleInfo","gcircle","fencecenter","fenceradius","drawFences","getToDrawFences","readFenceInfo","fenceList","createFenceObjects","JSON","parse","infoitem","settingsdata","settingstag","fencetype","fetchFences","geofencepath","getFenceInfoMap","getMyFencesMap","getMyFenceInfos","getMyFenceInfosMap","hasOwnProperty","mapLeftToolBar","setActive","rid","leftTB","addFilter","children","setFilter","toggleBar","setInMarkerLocation","historymap","independent","function","childType","checkGeoFilters","set","description","fencesActive","childClick","allActive","check","buttonClick","handleGeofenceReportInfoMap","reportInfo","handleMyGeofenceReportsMap","reportList","geofencereportpath","fenceReportService","getGeofenceReportInfoMap","getMyGeofenceReportsMap","reportDetails","setReportPath","reportPath","getReportDetails","GeofenceReportController","getSelection","getValue","row","vehicleDetail","subtract","add","historyMapObj","fenceReportObj","setSelectedCount","checked","filterVehicles","vehicleFilter","filterFences","getSelectedFences","setReport","getHistoryReport","SelectAllFences","selectAllVehicles","deSelectAllFences","deSelectAllVehicles","loadingHistoryData","initialSelect","selectAllFences","deSelectAll","verifyCheckStatus","trues","myEl","querySelector","empty","selectedVehicles","selectedFences","vehicleids","vehicleName","fen","start_time","end_time","vehicle_name","fence_name","fence_entry","fence_exit","DownloadHistoryController","sortArray","sorted","pushed","downloadCSV","getGPSLastseen","selectedGroup","recursive","handleSuccess","getMyAssignedGroupsMap","groups","download","csvData","postBody","csvArray","lastcom","utctime","pullout","carb","mobili","communication","VEHICLE NO","LAST COMM AT","PULL OUT","MOBILITY","COMMUNICATION","GPS TIME","address","$cookies","fadeInDialog","fadeIn","dialogShow","dialogStates","fadeOut","getDialogShow","setDialogShow","getNewTrackObject","getCurrentCpuTime","performance","now","tracking","trackArray","track","innerHtml","markerHeight","markerWidth","dropAnimation","div","display","vehicleNumberWindow","prototype","OverlayView","fromLatLngToDivPixel","notifier","cursor","appendChild","addDomListener","panes","getPanes","overlayImage","parentNode","removeChild","alarmService","alarmsObj","vehicleFilterPattern","filteredVehicles","alarmResponseData","loadingAlarmData","getAlarmsHistory","vehiclesids","xidx","AlarmController","DTOptionsBuilder","jsonAlarmData","searchTerm","dtOptions","newOptions","withOption","showAddress","alarmResp","alarmTime","reason","operation_mode","DialogController","closeTab","getTab","LeftToolbarDashboardController","ReportsController","managementRouter","$stateProvider","$urlRouterProvider","views","mgmttab@home.management","otherwise","config","run","HeaderController","navService","$mdSidenav","$mdMenu","$mdBottomSheet","$document","loginService","toggleItemsList","pending","when","selectItem","showSimpleToast","showActions","$event","SheetController","actions","performAction","controllerAs","bindToController","targetEvent","clickedItem","debug","simple","content","hideDelay","currState","isManagementTab","menuItems","userpref","loadAllItems","concat","changePassword","logout","closeMdMenu","FooterController","requestService","CenterController","encloseBody","firePost","user","getMyInfo","getMyGroups","getMyAssignedGroups","getMyAssetGroups","getMyUsers","getUserPermissions","getMyRoles","getMyDevices","getMyInfoMap","makeMapOnAssetPath","mergeAssetPermissions","makeAssetMap","getMyAssetGroupsMap","makeAssetList","mergeFenceInfo","handleDirectAssetResponse","getMyDirectAssetsMap","gPromise","vPromise","uPromise","rPromise","dPromise","myPromise","searchGroup","tree","insert","groupFound","kdx","createAssetType","collapsedStatus","management_tree_data","node","nodes","roots","group_id","shift","pgroupid","tgroupid","real_groupid","getGenericTreeIndex","genericTree","buildDashboardTree","visited","gtNode","utNode","resultNode","child","createDashboardTree","uiTree","buildManagementTree","assetTypeExists","uidx","createManagementTree","globalGenericTree","addLoggedInUserToTree","assetTree","pname","addAssetInfo","gidx","parentPath","getParentPath","createGenericTree","ridx","aidx","assetArray","sortOnAssetLevel","groupsPromise","vehiclesPromise","mergeChildTree","childTree","getMyDirectAssetsMapWithUser","DOT","STATE_HOME","STATE_HOME_DASHBOARD","STATE_HOME_MANAGEMENT","STATE_HOME_DOT","STATE_HOME_DASHBOARD_DOT","getLeafState","absoluteState","lastIndexOf","substring","getParentState","getRootState","getRootChildState","root","rootchild","givenState","factory","schemaService","schemaData","schemaDef","key1","displayname","displaydesc","editable","default","key3","key4","key5","key6","key7","key8","key9","level2key1","level2key2","checkfun","key10","key11","level2key3","level3key1","level3key2","key12","level3key3","level4key1","level4key2","key13","level2key4","PERM","TAB_NAME","TAB_SCHEMA","SECTION_TYPE_INVALID","SECTION_TYPE_PRIMITIVE","SECTION_TYPE_PRIMITIVE_ARRAY","SECTION_TYPE_OBJECT","SECTION_TYPE_OBJECT_ARRAY","ELEMENT_TYPE_NUMBER","ELEMENT_TYPE_TEXT","getPrimitiveType","sectionType","getArrayType","String","getSectionType","section","createInputField","_schema_uidata","field","createReadOnlyList","createEditableList","createSelectList","parseSection","sectionComponents","subSectionKey","subSection","tmpSection","valueList","parseSchema","schema","uiComponents","sidx","tabName","tabSchema","parseSchemaData","getSchema","getSchemaData","bindDataToSchema","Number","didx","objectSchema","objectValue","rolePermissions","$http","API_HOST","GEOCODE_API_HOST","authService","authListeners","errorStatusCodes","getToken","api","auth","isAuthed","post","checkLogin","fireGet","fireGeoCode","force","addAuthListener","isLoginTokenValid","handleTrackHistory","handleGetAlarms","MQTT_HOST","socketiohost","socket","toConnect","subscriptionList","initSocket","connect","onConnect","onClose","sendToken","onAuthSuccess","onAuthFailure","onReceiveMsg","io","emit","subscribeChannel","unsubscribeChannel","getTopicKey","tokens","topicKey","anchorSmoothScrollService","anchorScrollService","JSONData","ReportTitle","ShowLabel","arrData","CSV","slice","alert","fileName","uri","escape","link","href","cssText","SLASH","ROOT_GROUP","ASSET_PATH","ASSET_ID","PGROUP_PATH","PGROUP_ID","UI_ASSET_TYPE","assetTypeIdToAssetType","1","2","3","4","5","VEHICLETYPE","6","7","DEVICETYPE","15","FENCE","17","FENCEREPORT","assetTypeToAssetTypeId","getPathId","getAssetId","assetid","charAt","getParentFromPath","getParentId","getAssetTypeId","getAssetType","assetTypeId","getAssetPathLevel","getAssetLevel","assetlevel","pidx","permid","mergeUserPermissions","usersList","perm","mergeAssetAssignments","assginfo","hashObj","arrayObj","getNextPathItemEnd","slash","firstSlash","secondSlash","getNodesInPath","isUndefined","nodesInPath","itemStartIndex","flatten","recurse","cur","prop","isArray","l","isEmpty","p","flatten2","unflatten","regex","resultholder","m","exec","group","getAssignedUsers","getAssignedRoles","createNewGroup","groupName","getFenceInfo","reqbody","geofence","fenceinfo","handleGetAddress","handleGetAddressFailure","getGoefenceReportInfo","geofencereport","TOKEN_KEY","parseJwt","token","base64Url","base64","fromJson","atob","saveToken","localStorage","round","exp","removeItem","authInterceptor","request","method","response","res","constant","$httpProvider","interceptors","assetAPIService","getMyAssets","assettype","scrollTo","eID","currentYPosition","pageYOffset","documentElement","scrollTop","elmYPosition","elm","offsetTop","offsetParent","startY","stopY","distance","step","leapY","timer","readOnlyList","restrict","scope","listData","directive","icarPanelExpansion","$mdExpansionPanel","$mdExpansionPanelGroup","trasclude","myFunc","fields","slides","deleted_panel_id","master","save","discard","panelId","readMode","edit","ev","preserveScope","deleteSelected","waitFor","instance","cancelSelected","panelSchema","order","getCurrentData","html","selectedIndex","activeTab","collapsePanel","multiList","popup","defaultClick","processing","unshift","icarKeypress","attrs","bind","$eval","icarTabContent","template","tabContent","parseContent","parentDiv","newElement","childScope","$new","getIcarDirective","addContent","compile","icarSelectList","selectedCount","minSelection","maxSelection","showSelectAll","selected","showErrorMsg","exists","isIndeterminate","isChecked","toggleAll","icarReadonlyList","icarInput","icarExpanel","contentTemplate","headerTemplate","footerTemplate","confirmDialog","expandCollapse","isOpen","expand","icarEditableList","displayName","dataType","displayHint","VEHICLE_ON","VEHICLE_OFF","VEHICLE_RUNNING","VEHICLE_STOPPED","VEHICLE_ACTIVE","VEHICLE_IMMOBILIZED","VEHICLE_NOT_COMMUNICATING","VEHICLE_DEVICE_PULLOUT","processVehicleData","newData","altitude","notcommunicatingFilter","ignitionstatusFilter","devicepulloutFilter","updateVehicle","latlngService","loginSuccess","handleGetMyInfo","initCoords","geocoder","Geocoder","geocodeAddress","geocode","results","webDevTec","getTec","logo","sref","acmeNavbar","NavbarController","relativeDate","creationDate","fromNow","acmeMalarkey","malarkey","linkFunc","watcher","typist","typeSpeed","deleteSpeed","pauseDelay","loop","postfix","addClass","extraValues","pause","contributors","contributor","login","MalarkeyController","githubContributor","activate","getContributors","showLoginDialog","loginDialog","loginDialogController","handleLoginSuccess","reload","handleLoginFailure","emailFormat","onChangeCredentials","limit","getContributorsComplete","getContributorsFailed","error","toJson","get","apiHost","MainController","toggleLeftnav","runBlock","$location","ga","routerConfig","","header@home","leftnavtree@home","lefttoolbar@home","center@home","centermain@home","rightnav@home","userinfo","dialogview@home","txt","toUpperCase","themeConfig","$mdIconProvider","$mdThemingProvider","theme","primaryPalette","accentPalette","warnPalette","hue-1","definePalette","50","100","200","300","400","500","600","700","800","900","A100","A200","A400","A700","$templateCache","put"],"mappings":"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","file":"scripts/app-475311afec.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('uiplatform', ['ngAnimate', 'ngCookies', 'ngSanitize',\n      'ngMessages', 'ngAria', 'ngResource',  'ngMaterial', 'ui.bootstrap',\n      'ui.router', 'ui.tree', 'toastr', 'google.places', 'uiGmapgoogle-maps',\n        'material.components.expansionPanels', 'ui.tree-filter',\n        'angular-bind-html-compile', 'ct.ui.router.extras','datatables',\n    ]);\n\n\n})();\n\n/**\n * Created by smiddela on 20/08/16.\n */\n\n(function() {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('multiMapTestService', function($log, intellicarAPI, $q, $timeout) {\n            $log.log(\"multiMapTestService\");\n            var vm = this;\n            var lat = 12.9176383;\n            var lng = 77.6480335;\n\n            vm.center = { latitude: lat, longitude: lng };\n            vm.zoom = 12;\n            vm.bounds = {};\n\n            vm.marker = {\n                id: 0,\n                coords: { latitude: lat, longitude: lng },\n                options: { draggable: true },\n                events: {\n                    dragend: function (marker, eventName, args) {\n                        $log.log('marker dragend');\n                        var lat = marker.getPosition().lat();\n                        var lon = marker.getPosition().lng();\n                        $log.log(lat);\n                        $log.log(lon);\n\n                        vm.marker.options = {\n                            draggable: true,\n                            labelContent: \"lat: \" + vm.marker.coords.latitude + ' ' + 'lon: ' + vm.marker.coords.longitude,\n                            labelAnchor: \"100 0\",\n                            labelClass: \"marker-labels\"\n                        };\n                    }\n                }\n            };\n\n\n            vm.getCenter = function() {\n                return vm.center;\n            }\n\n            vm.getZoom = function() {\n                return vm.zoom;\n            }\n\n            vm.getMarker = function() {\n                return vm.marker;\n            }\n\n            vm.getBounds = function() {\n                return vm.bounds;\n            }\n\n            vm.updateCenter = function() {\n                //$log.log(\"updateCenter\");\n                vm.center = { latitude: vm.marker.coords.latitude, longitude: vm.marker.coords.longitude};\n                $timeout(vm.updateCenter, 1000);\n            }\n\n            vm.updateZoom = function() {\n                //$log.log(\"updateZoom\");\n                if(vm.zoom == 12)\n                    vm.zoom = 14;\n                else\n                    vm.zoom = 12;\n                $timeout(vm.updateZoom, 5000);\n            }\n\n            vm.updateMarker = function() {\n                //$log.log(\"updateMarker\");\n                vm.marker.coords = {\n                    latitude: vm.marker.coords.latitude + 0.001,\n                    longitude: vm.marker.coords.longitude + 0.001\n                };\n                $timeout(vm.updateMarker, 1000);\n            }\n\n\n\n            vm.updateMarker();\n            vm.updateCenter();\n            vm.updateZoom();\n        });\n})();\n\n/**\n * Created by smiddela on 14/08/16.\n */\n\n(function() {\n\n    angular\n        .module('uiplatform')\n        .controller('MultiMapTestController', MultiMapTestController);\n\n    function MultiMapTestController($scope, $rootScope, $log, multiMapTestService, $timeout) {\n        $log.log('MultiMapTestController');\n        var vm = this;\n\n        vm.loadMap = function() {\n            vm.inMap = {};\n            vm.inMap.zoom = multiMapTestService.getZoom();\n            vm.inMap.center = multiMapTestService.getCenter();\n            vm.inMap.bounds = multiMapTestService.getBounds();\n            vm.marker = multiMapTestService.getMarker();\n        }\n\n        vm.updateZoom = function() {\n            vm.inMap.zoom = multiMapTestService.getZoom();\n            $timeout(vm.updateZoom, 4000);\n        }\n\n        vm.options = {\n            //scrollwheel: false\n        };\n\n        var createRandomMarker = function(i, bounds, idKey) {\n            var lat_min = bounds.southwest.latitude,\n                lat_range = bounds.northeast.latitude - lat_min,\n                lng_min = bounds.southwest.longitude,\n                lng_range = bounds.northeast.longitude - lng_min;\n\n            if (idKey == null) {\n                idKey = \"id\";\n            }\n\n            var latitude = lat_min + (Math.random() * lat_range);\n            var longitude = lng_min + (Math.random() * lng_range);\n            var ret = {\n                latitude: latitude,\n                longitude: longitude,\n                title: 'm' + i\n            };\n            ret[idKey] = i;\n            return ret;\n        };\n\n        vm.randomMarkers = [];\n        // Get the bounds from the map once it's loaded\n        $scope.$watch(function() {\n            return vm.inMap.bounds;\n        }, function(nv, ov) {\n            // Only need to regenerate once\n            if (!ov.southwest && nv.southwest) {\n                var markers = [];\n                for (var i = 0; i < 50; i++) {\n                    markers.push(createRandomMarker(i, vm.inMap.bounds))\n                }\n                vm.randomMarkers = markers;\n            }\n        }, true);\n\n        vm.loadMap();\n        //vm.updateZoom();\n    }\n})();\n\n\n/**\n * Created by smiddela on 20/08/16.\n */\n\n(function() {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('mapTestService', function($log, intellicarAPI, $q, $timeout) {\n            $log.log(\"mapTestService\");\n            var vm = this;\n            var lat = 12.9176383;\n            var lng = 77.6480335;\n\n            vm.center = { latitude: lat, longitude: lng };\n            vm.zoom = 12;\n\n            vm.marker = {\n                id: 0,\n                coords: { latitude: lat, longitude: lng },\n                options: { draggable: true },\n                events: {\n                    dragend: function (marker) {\n                        $log.log('marker dragend');\n                        var lat = marker.getPosition().lat();\n                        var lon = marker.getPosition().lng();\n                        $log.log(lat);\n                        $log.log(lon);\n\n                        vm.marker.options = {\n                            draggable: true,\n                            labelContent: \"lat: \" + vm.marker.coords.latitude + ' ' + 'lon: ' + vm.marker.coords.longitude,\n                            labelAnchor: \"100 0\",\n                            labelClass: \"marker-labels\"\n                        };\n                    }\n                }\n            };\n\n\n            vm.getCenter = function() {\n                return vm.center;\n            }\n\n            vm.getZoom = function() {\n                return vm.zoom;\n            }\n\n            vm.getMarker = function() {\n                return vm.marker;\n            }\n\n            vm.updateCenter = function() {\n                //$log.log(\"updateCenter\");\n                vm.center = { latitude: vm.marker.coords.latitude, longitude: vm.marker.coords.longitude};\n                $timeout(vm.updateCenter, 1000);\n            }\n\n            vm.updateZoom = function() {\n                //$log.log(\"updateZoom\");\n                if(vm.zoom == 12)\n                    vm.zoom = 14;\n                else\n                    vm.zoom = 12;\n                $timeout(vm.updateZoom, 5000);\n            }\n\n            vm.updateMarker = function() {\n                //$log.log(\"updateMarker\");\n                vm.marker.coords = {\n                    latitude: vm.marker.coords.latitude + 0.001,\n                    longitude: vm.marker.coords.longitude + 0.001\n                };\n                $timeout(vm.updateMarker, 1000);\n            }\n\n\n\n            vm.updateMarker();\n            vm.updateCenter();\n            vm.updateZoom();\n        });\n})();\n\n/**\n * Created by smiddela on 14/08/16.\n */\n\n(function() {\n\n    angular\n        .module('uiplatform')\n        .controller('MapTestController', MapTestController);\n\n    function MapTestController($scope, $rootScope, $log, mapTestService, $timeout) {\n        $log.log('MapTestController');\n        var vm = this;\n\n        vm.loadMap = function() {\n            vm.inMap = {};\n            vm.inMap.zoom = mapTestService.getZoom();\n            vm.inMap.center = mapTestService.getCenter();\n            vm.marker = mapTestService.getMarker();\n        }\n\n        vm.updateZoom = function() {\n            vm.inMap.zoom = mapTestService.getZoom();\n            $timeout(vm.updateZoom, 4000);\n        }\n\n        vm.loadMap();\n        vm.updateZoom();\n    }\n})();\n\n\n/**\n * Created by smiddela on 28/08/16.\n */\n\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('vehicleMgmtService', vehicleMgmtService);\n\n    function vehicleMgmtService($rootScope, $log, $q, intellicarAPI, settingsService) {\n        var vm = this;\n        vm.startupData = null;\n        $log.log(\"vehicleMgmtService\");\n\n\n        vm.handleGetMyVehicles = function(resp) {\n            $log.log(resp);\n            vm.startupData = resp;\n            return vm.startupData;\n        };\n\n\n        vm.handleGetMyVehiclesFailure = function () {\n\n        };\n\n\n        vm.getData = function (stateParams) {\n            $log.log(\"vehicle getData\");\n            $log.log(stateParams);\n\n            // $log.log(settingsService.getRequestedGroupPath(stateParams));\n            // $log.log(settingsService.getCurrentGroupPath());\n            // if(settingsService.getRequestedGroupPath(stateParams) === settingsService.getCurrentGroupPath())\n            //     return vm.startupData;\n\n            return intellicarAPI.groupService.getMyVehiclesMap(settingsService.getCurrentGroup())\n                .then(vm.handleGetMyVehicles, vm.handleGetMyVehiclesFailure);\n        }\n    }\n})();\n\n/**\n * Created by smiddela on 21/08/16.\n */\n\n\n(function () {\n\n    angular\n        .module('uiplatform')\n        .controller('VehicleMgmtController', VehicleMgmtController);\n\n    function VehicleMgmtController($scope, $rootScope, $log, intellicarAPI, settingsService,\n                                   vehicleMgmtService) {\n        $log.log('VehicleMgmtController');\n        settingsService.setTab(intellicarAPI.appConstants.VEHICLE);\n        var vm = this;\n        vm.assets = [];\n        vm.groupBtnStatus = false;\n        vm.isdiplay = false;\n        vm.showBtn = false;\n\n        vm.currentGroupAsset = settingsService.lastGroup;\n\n        vm.handleStartupData = function (startupData) {\n            $log.log(startupData);\n            vm.assets = [];\n            for (var key in startupData) {\n                vm.assets.push(startupData[key]);\n            }\n\n            // $log.log(vm.assets);\n\n            if (settingsService.getCurrentGroupPath() )\n                vm.showBtn = true;\n        };\n\n\n        vm.handleStartupDataFailure = function (resp) {\n            $log.log(resp);\n        };\n\n\n        vm.init = function (currentGroup) {\n            vehicleMgmtService.getData(settingsService.getCurrentGroup())\n                .then(vm.handleStartupData, vm.handleStartupDataFailure);\n        };\n\n\n        vm.showNewVehicleField = function () {\n            $log.log('show/hide');\n            vm.isdiplay = !vm.isdiplay;\n            vm.msg = \"\"\n        };\n\n\n        if ( settingsService.getCurrentGroup()){\n            vm.assets = [];\n            vm.init();\n        }\n        // $scope.$on('loadVehicleMgmt', vm.init);\n    }\n})();\n\n\n// vm.assets.push({name: \"One\", assetid: 1, assetpath: '1/1/1/17', type: 'vehicle'});\n// vm.assets.push({name: \"Two\", assetid: 2, assetpath: '1/1/1/25', type: 'vehicle'});\n//\n// $log.log(\"my vehicle data\");\n// //$log.log(startupData);\n//\n// vm.schema = intellicarAPI.schemaService.getSchema();\n// $log.log(vm.schema);\n//\n// vm.schemaData = intellicarAPI.schemaService.getSchemaData();\n// $log.log(vm.schemaData);\n//\n// intellicarAPI.schemaService.bindDataToSchema(vm.schema, vm.schemaData);\n// $log.log(vm.schema);\n\n\n\n/**\n * Created by smiddela on 22/08/16.\n */\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('userMgmtService', userMgmtService);\n\n    function userMgmtService($rootScope, $log, $q, $state, intellicarAPI, settingsService) {\n        var vm = this;\n        $log.log(\"userMgmtService\");\n\n        vm.handleResponse = function (resp) {\n            $log.log(\"userMgmtService handleResponse\");\n            return $q.resolve(resp)\n        };\n\n        vm.handleFailure = function (resp) {\n            $log.log(\"userMgmtService handleFailure\");\n            return $q.reject(resp);\n        };\n\n\n        vm.getData = function (stateParams) {\n            $log.log(\"user getData\");\n            settingsService.setCurrentGroup(stateParams);\n            return intellicarAPI.groupService.getMyUsersMap(settingsService.getCurrentGroup());\n        };\n\n\n        vm.createUser = function (newUser) {\n            var body = {\n                pgrouppath: settingsService.getCurrentGroupPath(),\n                name: newUser.name,\n                usermeta: {password: newUser.password}\n            };\n\n            return intellicarAPI.userService.createUser(body);\n        };\n    }\n})();\n\n/**\n * Created by smiddela on 21/08/16.\n */\n\n\n\n(function () {\n\n    angular\n        .module('uiplatform')\n        .controller('UserMgmtController', UserMgmtController);\n\n    function UserMgmtController($scope, $rootScope, $log, $state,\n                                intellicarAPI, userMgmtService,\n                                settingsService, startupData, $q) {\n\n        $log.log('UserMgmtController');\n        settingsService.setTab(intellicarAPI.appConstants.USER);\n        var vm = this;\n        vm.assets = [];\n        vm.newUser = {};\n        vm.groupBtnStatus = false;\n        vm.isdiplay = false;\n        vm.showBtn = false;\n\n        vm.currentGroupAsset = settingsService.lastGroup;\n\n        vm.ASSIGN_GROUP_PERM = 10;\n        vm.ASSIGN_ROLE_PERM = 5;\n\n        $scope.groupData = {\n            // visible : true,\n            heading: '',\n            options:{\n                width: 70, // in  percentage\n                height: 70 // in percentage\n            },\n            datas:[\n                {\n                    heading:'',\n                    list :[],\n                    buttons:[\n                        {iconType:'fa', icon: 'trash', color: '#e74c3c', fColor: '#fff', onClick : function(data, func){\n                            func(data, function(processGUI){\n                                // Fire api\n                                $log.log('deasssign');\n                                $log.log(data);\n\n                                processGUI(1);\n                            });\n                        }}\n                    ]\n                },{\n                    heading:'',\n                    list :[],\n                    buttons:[\n                        {iconType:'fa', icon: 'plus', color: '#2ecc71', fColor: '#fff', onClick : function(data, func){\n                            func(data, function(processGUI){\n                                // Fire api\n                                $log.log('Asssign');\n                                $log.log(data);\n                                var userpath = data.item.assetpath;\n\n                                var body = {\n                                    grouppath:vm.selectedGrouppath,\n                                    userpath:userpath\n                                };\n                                $log.log(body);\n                                processGUI(-1);\n                            });\n                        }}\n                    ]\n                }\n            ]\n        };\n\n\n        vm.init = function () {\n            vm.assets = [];\n            for (var key in startupData) {\n                vm.assets.push(startupData[key]);\n            }\n\n            $log.log(vm.assets);\n\n            if ( settingsService.getCurrentGroupPath() )\n                vm.showBtn = true;\n\n\n            for ( var idx in startupData){\n                if (startupData[idx].permissions.indexOf(vm.ASSIGN_GROUP_PERM)>= 0 )\n                    startupData[idx].assignGroup = true;\n                else\n                    startupData[idx].assignGroup = false;\n\n                if (startupData[idx].permissions.indexOf(vm.ASSIGN_ROLE_PERM)>= 0 )\n                    startupData[idx].assignRole = true;\n                else\n                    startupData[idx].assignRole = false;\n            }\n\n\n            if (vm.currentGroupAsset) {\n                if (vm.currentGroupAsset.permissions.indexOf(vm.ASSIGN_GROUP_PERM) != 0)\n                    vm.currentGroupAsset.assignGroup = true;\n\n                if (vm.currentGroupAsset.permissions.indexOf(vm.ASSIGN_ROLE_PERM) != 0)\n                    vm.currentGroupAsset.assignRole = true;\n\n            }\n\n            $log.log(startupData);\n        };\n\n\n        vm.createUser = function () {\n            if (vm.newUser.password === vm.confirmPassword) {\n                userMgmtService.createUser(vm.newUser)\n                    .then(function (resp) {\n                            $log.log(resp);\n                            vm.newUser = {};\n                            vm.confirmPassword = '';\n                            $rootScope.$broadcast('EVENT_MGMT_TREE_CHANGE', {});\n                            vm.errorMsg = \"User created successfully.\"\n                        },\n                        function (resp) {\n                            $log.log(\"CREATE USER FAILED\");\n                            $log.log(resp);\n                            vm.errorMsg = \"Failed to create user.\"\n                        });\n            }else {\n                vm.errorMsg = \"Passwords do not match\";\n                return;\n            }\n        };\n\n        vm.showNewUserField = function () {\n            $log.log('show/hide');\n            vm.errorMsg = \"\"\n            vm.isdiplay = !vm.isdiplay;\n        };\n\n        vm.assignGroups = function(data){\n            $log.log(data);\n            $scope.groupData.heading = \"Assign Groups to Users\";\n\n            var body ={\n                grouppath:data.assetpath\n            };\n            vm.getUsers(body);\n        };\n\n\n        vm.getUsers = function(body) {\n            $scope.groupData.datas[1].heading = \"Assignable Groups\";\n            $scope.groupData.datas[0].heading = \"Assigned Groups\";\n\n            var users = intellicarAPI.userService.getMyUsersMapList({});\n\n            var groupUsers = intellicarAPI.groupService.getMyUsersMapList(body);\n\n            return $q.all([users, groupUsers])\n                .then(vm.handleUsersResponse, vm.handleFailure);\n        };\n\n        vm.handleUsersResponse = function(resp){\n            $log.log(resp);\n\n            vm.setData(resp, vm.ASSIGN_USER_PERM);\n        };\n\n\n        vm.assignRoles = function (data) {\n            $log.log(data);\n            // $scope.groupData.visible = true;\n            $scope.groupData.heading = 'Assign Roles to '+ data.name ;\n            vm.selectedGrouppath = data.assetpath;\n\n            var body ={\n                grouppath:data.assetpath\n            };\n\n            $scope.groupData.datas[1].buttons = [\n                {iconType:'fa', icon: 'plus', color: '#2ecc71', fColor: '#fff', onClick : function(data, func){\n                    func(data, function(processGUI){\n                        // Fire api\n                        $log.log('Asssign Role');\n                        $log.log(data);\n                        var userpath = data.item.assetpath;\n\n                        var body = {\n                            grouppath:vm.selectedGrouppath,\n                            userpath:userpath\n                        };\n\n                        processGUI(-1);\n                    });\n                }}\n            ];\n\n            vm.getRoles(body);\n        };\n\n        vm.getRoles = function(body){\n            var userRoles = intellicarAPI.userService.getMyRolesList({});\n\n            var groupRoles = intellicarAPI.groupService.getMyRolesList(body);\n\n            return $q.all([userRoles, groupRoles])\n                .then(vm.handleRolesResponse, vm.handleFailure);\n        };\n\n\n        vm.handleRolesResponse = function (resp) {\n            vm.setData(resp, vm.ASSIGN_ROLE_PERM);\n            $scope.groupData.datas[1].heading = \"Assignable Roles\";\n            $scope.groupData.datas[0].heading = \"Assigned Roles\";\n        };\n\n\n        vm.setData = function(resp, permission){\n            $scope.groupData.datas[0].list = [];\n            $scope.groupData.datas[1].list = [];\n\n            $scope.groupData.datas[0].list = resp[1];\n\n            var userRole = resp[1];\n            var matching = false;\n            for( var idx in resp[0] ) {\n                for ( var role in resp[1] ) {\n                    if ( resp[0][idx].assetpath == resp[1][role].assetpath){\n                        matching = true;\n                        break;\n                    }else {\n                        matching = false;\n                    }\n                }\n                if ( !matching ) {\n                    if ( resp[0][idx].permissions.indexOf(permission) >= 0 ) {\n                        $scope.groupData.datas[1].list.push(resp[0][idx]);\n                    }\n                }\n            }\n\n            $log.log($scope.groupData.datas);\n            $scope.groupData.visible = true;\n        };\n\n        vm.init();\n    }\n})();\n\n\n\n(function () {\n    'use strict';\n\n\n    angular.module('uiplatform')\n        .service('settingsService', settingsService);\n\n    function settingsService($log, $state, intellicarAPI) {\n        $log.log('settingsService');\n        var vm = this;\n        vm.setTabListener = null;\n        vm.currentGroup = null;\n\n        vm.tabs = [\n            intellicarAPI.appConstants.VEHICLE,\n            intellicarAPI.appConstants.GROUP,\n            intellicarAPI.appConstants.USER,\n            intellicarAPI.appConstants.ROLE,\n            intellicarAPI.appConstants.DEVICE\n        ];\n\n\n        vm.getTabIndex = function (assetType) {\n            var tabIndex = vm.tabs.indexOf(assetType);\n            if (tabIndex == -1)\n                return 0;\n\n            return tabIndex;\n        };\n\n\n        vm.setTab = function(assetType) {\n            vm.setTabListener(vm.getTabIndex(assetType));\n        };\n\n        vm.addSetTabListener = function(listener) {\n            vm.setTabListener = listener;\n        };\n\n\n        vm.setCurrentGroupPath = function(grouppath) {\n            vm.currentGroup = {grouppath: grouppath};\n            // console.log(vm.currentGroup);\n        };\n\n\n        vm.setCurrentGroup = function(stateParams) {\n            var grouppath = null;\n\n            if(stateParams != null && stateParams.info != null) {\n                if (stateParams.info.ui_asset_type == intellicarAPI.appConstants.GROUP) {\n                    grouppath = stateParams.info.assetpath;\n                } else {\n                    grouppath = stateParams.info.pgrouppath;\n                }\n            }\n\n            // vm.currentGroup =  grouppath;\n            vm.currentGroup = {grouppath: grouppath};\n            // console.log(vm.currentGroup);\n            //return grouppath;\n        };\n\n\n        vm.getCurrentGroup = function() {\n            return vm.currentGroup;\n        };\n\n\n        vm.getRequestedGroupPath = function(stateParams) {\n            var grouppath = null;\n\n            if(stateParams != null && stateParams.info != null) {\n                if (stateParams.info.ui_asset_type == intellicarAPI.appConstants.GROUP) {\n                    grouppath = stateParams.info.assetpath;\n                } else {\n                    grouppath = stateParams.info.pgrouppath;\n                }\n            }\n\n            return grouppath;\n        };\n\n\n        vm.getCurrentGroupPath = function() {\n            if(vm.currentGroup && 'grouppath' in vm.currentGroup)\n                return vm.currentGroup.grouppath;\n\n            return null;\n        };\n\n\n\n        vm.handleAssetClick = function(asset) {\n            var tab = \"group\";\n            // $log.log(asset);\n            // is it group, vehicle, device, user, role\n            if(vm.tabs.indexOf(asset.id) != -1) {\n                tab = asset.id;\n            } else {\n                // $log.log(\"duniya \" + asset.info.ui_asset_type);\n                tab = asset.info.ui_asset_type;\n            }\n\n            //vm.setTabStateData(tab, asset);\n\n            var tabState = intellicarAPI.stateService.STATE_HOME_MANAGEMENT_DOT + tab;\n\n            // $log.log(\"my to before cond \" + tabState);\n            // $log.log(asset);\n\n            if(vm.tabs.indexOf(asset.id) == -1) {\n                // $log.log('my to Going to state ' + tabState);\n                $state.go(tabState, asset);\n            } else {\n                $log.log('Not changing state');\n            }\n        };\n\n    }\n\n})();\n\n\n/**\n * Created by smiddela on 15/08/16.\n */\n\n(function () {\n\n    angular\n        .module('uiplatform')\n        .controller('SettingsController', SettingsController);\n    function SettingsController($scope, $rootScope, $log, $state,\n                                settingsService, intellicarAPI) {\n\n        $log.log('SettingsController');\n        var vm = this;\n\n        vm.tabs = settingsService.tabs;\n\n        vm.getTabState = function (assetType) {\n            //$log.log(intellicarAPI.stateService.STATE_HOME_MANAGEMENT_DOT + assetType);\n            return intellicarAPI.stateService.STATE_HOME_MANAGEMENT_DOT + assetType;\n        };\n\n\n        $rootScope.$on('$stateChangeStart', function (event, toState, toParams, fromState, fromParams, options) {\n            //$log.log('stateChangeStart =================');\n            //$log.log(\"from state = \" + fromState.name);\n            //$log.log(\"to state = \" + toState.name);\n            $log.log(toParams);\n\n            var leafState = intellicarAPI.stateService.getStateTree(toState.name).leaf;\n            if(leafState != intellicarAPI.appConstants.GROUP || ('tabClick' in toParams)) {\n                //$log.log(leafState);\n                for (var idx in vm.tabs) {\n                    if (leafState == vm.tabs[idx]) {\n                        //$log.log(\"selectedTab = \" + vm.selectedTab);\n                        vm.selectedTab = idx;\n                        break;\n                    }\n                }\n            } else {\n                //$log.log('selected tab ' + vm.tabs[vm.selectedTab]);\n                if(!('tabClick' in toParams)) {\n                    if (vm.tabs[vm.selectedTab] != intellicarAPI.appConstants.GROUP) {\n                        // $log.log(\"my toParams\");\n                        // $log.log(toParams);\n                        var dstState = intellicarAPI.stateService.getStateTree(toState.name).parent +\n                            intellicarAPI.stateService.dotState(vm.tabs[vm.selectedTab]);\n                        event.preventDefault();\n                        $state.go(dstState, toParams);\n                    }\n                }\n            }\n        });\n\n\n        vm.tabClick = function(assetType) {\n            var currentGroup = settingsService.getCurrentGroup();\n\n            if(currentGroup == null)\n                return;\n            //$log.log(\"my to current state: \" + assetType);\n            $log.log(currentGroup);\n            var stateParams = {\n                info: {\n                    pgrouppath: currentGroup.grouppath,\n                    assetpath: currentGroup.grouppath,\n                    ui_asset_type: assetType,\n                    tabClick: true,\n                    permissions:[]\n                }\n            };\n            // $log.log(stateParams);\n            // $log.log(\"my asset type \" + assetType);\n\n            $state.go(vm.getTabState(assetType), stateParams);\n        };\n\n        vm.setTab = function(tabIndex) {\n            vm.selectedTab = tabIndex;\n        };\n\n        vm.init = function() {\n            settingsService.addSetTabListener(vm.setTab);\n        };\n\n        vm.init();\n    }\n})();\n\n\n\n/**\n * Created by smiddela on 28/08/16.\n */\n\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('groupMgmtService', groupMgmtService);\n\n    function groupMgmtService($rootScope, $log, $q, $state, intellicarAPI, settingsService) {\n        var vm = this;\n        $log.log(\"groupMgmtService\");\n\n\n        vm.getData = function (stateParams) {\n            $log.log(\"group getData\");\n            settingsService.setCurrentGroup(stateParams);\n            return intellicarAPI.groupService.getMyGroupsMap(settingsService.getCurrentGroup());\n        };\n\n\n        vm.createGroup = function (newGroup) {\n            var body =  {\n                pgrouppath: settingsService.getCurrentGroupPath(),\n                name: newGroup.name\n            };\n\n            return intellicarAPI.groupService.createGroup(body);\n        };\n    }\n})();\n\n/**\n * Created by smiddela on 21/08/16.\n */\n\n\n\n(function () {\n\n    angular\n        .module('uiplatform')\n        .controller('GroupMgmtController', GroupMgmtController);\n\n    function GroupMgmtController($scope, $rootScope, $log,\n                                 intellicarAPI, groupMgmtService, $timeout,\n                                 settingsService, startupData, $q, $stateParams) {\n\n        $log.log('GroupMgmtController');\n        settingsService.setTab(intellicarAPI.appConstants.GROUP);\n        var vm = this;\n        vm.assets = [];\n        vm.newGroup = {};\n        vm.groupBtnStatus = false;\n        vm.isdiplay = false;\n        vm.showBtn = false;\n\n        vm.ASSIGN_USER_PERM = 10;\n        vm.ASSIGN_ROLE_PERM = 5;\n\n        vm.currentGroupAsset = settingsService.lastGroup;\n\n\n        vm.handleMyVehiclesFailure = function (data) {\n            $log.log(\"GroupMgmtController handleMyVehiclesFailure\");\n        };\n\n        // vm.selectedTreeGroup = null;\n\n        vm.handleFailure = function (resp) {\n            $log.log('handleFailure');\n            $log.log(resp);\n        };\n\n        vm.createGroup = function () {\n            vm.groupBtnStatus = true;\n            groupMgmtService.createGroup(vm.newGroup)\n                .then(function (resp) {\n                        $log.log(resp);\n                        vm.newGroup = {};\n                        $rootScope.$broadcast('EVENT_MGMT_TREE_CHANGE', {});\n                        vm.groupBtnStatus = false;\n                        vm.msg = \"Group created Successfully.\";\n                        groupMgmtService.getData($stateParams).then(\n                            function (resp) {\n                                vm.panelData(resp);\n                            }\n                        );\n                    },\n                    function (resp) {\n                        $log.log(\"CREATE GROUP FAILED\");\n                        $log.log(resp);\n                        vm.groupBtnStatus = false;\n                        vm.msg = \"Failed to create group.\"\n                    });\n        };\n\n        vm.showNewGroupField = function () {\n            $log.log('show/hide');\n            vm.isdiplay = !vm.isdiplay;\n            vm.msg = \"\"\n        };\n\n        // Standard popup object\n\n        $scope.groupData = {\n            // visible : true,\n            heading: 'Add User to the Group',\n            options: {\n                width: 70, // in  percentage\n                height: 70 // in percentage\n            },\n            datas: [\n                {\n                    heading: 'Assigned Users',\n                    list: [],\n                    buttons: [\n                        {\n                            iconType: 'fa',\n                            icon: 'trash',\n                            color: '#e74c3c',\n                            fColor: '#fff',\n                            onClick: function (data, func) {\n                                func(data, function (processGUI) {\n                                    // Fire api\n                                    $log.log('deasssign');\n                                    $log.log(data);\n\n                                    $timeout(function () {\n                                        processGUI(1);\n                                    }, 1000);\n                                });\n                            }\n                        }\n                    ]\n                }, {\n                    heading: 'Assignable Users',\n                    list: [],\n                    buttons: [\n                        {\n                            iconType: 'fa',\n                            icon: 'plus',\n                            color: '#2ecc71',\n                            fColor: '#fff',\n                            onClick: function (data, func) {\n                                func(data, function (processGUI) {\n                                    // Fire api\n                                    $log.log('Asssign');\n                                    $log.log(data);\n                                    var userpath = data.item.assetpath;\n\n                                    var body = {\n                                        grouppath: vm.selectedGrouppath,\n                                        userpath: userpath\n                                    };\n\n                                    // intellicarAPI.groupService.assignUser(body)\n                                    //     .then(vm.assignUserSuccess, vm.handleFailure);\n\n                                    $log.log(body);\n                                    $timeout(function () {\n                                        processGUI(-1);\n                                    }, 1000);\n                                });\n                            }\n                        }\n                    ]\n                }\n            ]\n        };\n\n        vm.assignUserSuccess = function (resp) {\n            $log.log(resp);\n        };\n\n\n        vm.assignUsers = function (data) {\n            $log.log(data);\n            $scope.groupData.heading = \"Add Users to the \"+ data.name + \" group\";\n            vm.selectedGrouppath = data.assetpath;\n\n            $scope.groupData.datas[1].heading = \"Assignable Users\";\n            $scope.groupData.datas[0].heading = \"Assigned Users\";\n            $scope.groupData.datas[0].list = [];\n            $scope.groupData.datas[1].list = [];\n            $scope.groupData.visible = true;\n\n            var body = {\n                grouppath: data.assetpath\n            };\n            vm.getUsers(body);\n        };\n\n        vm.assignRoles = function (data) {\n            // $scope.groupData.visible = true;\n            $log.log(data);\n            $scope.groupData.heading = \"Add Roles to the \"+ data.name + \" group\";\n            vm.selectedGrouppath = data.assetpath;\n\n            $scope.groupData.datas[0].buttons = [{\n                iconType: 'fa',\n                icon: 'trash',\n                color: '#e74c3c',\n                fColor: '#fff',\n                onClick: function (data, func) {\n                    func(data, function (processGUI) {\n\n                        var rolepath = data.item.assetpath;\n\n                        var body = {\n                            grouppath: vm.selectedGrouppath,\n                            rolepath: rolepath\n                        };\n\n                        intellicarAPI.groupService.deAssignRole(body)\n                            .then(vm.deAssignRoleSuccess, vm.handleFailure);\n\n\n                        vm.processGui = processGUI(-1);\n                    });\n                }\n            }];\n\n            $scope.groupData.datas[1].buttons = [\n                {\n                    iconType: 'fa', icon: 'plus', color: '#2ecc71', fColor: '#fff', onClick: function (data, func) {\n                    func(data, function (processGUI) {\n                        // Fire api\n                        $log.log('Asssign Role');\n                        $log.log(data);\n                        var rolepath = data.item.assetpath;\n\n                        var body = {\n                            grouppath: vm.selectedGrouppath,\n                            rolepath: rolepath\n                        };\n\n                        intellicarAPI.groupService.assignRole(body)\n                            .then(vm.assignRoleSuccess, vm.handleFailure);\n\n                        vm.processGui = processGUI(-1);\n                        $log.log(body);\n                        // $timeout(function () {\n                        //     processGUI(-1);\n                        // }, 1000);\n                    });\n                }\n                }\n            ];\n\n            $scope.groupData.datas[1].heading = \"Assignable Roles\";\n            $scope.groupData.datas[0].heading = \"Assigned Roles\";\n            $scope.groupData.datas[0].list = [];\n            $scope.groupData.datas[1].list = [];\n            $scope.groupData.visible = true;\n\n            var body = {\n                grouppath: data.assetpath\n            };\n            vm.getRoles(body);\n        };\n\n\n        vm.deAssignRoleSuccess = function (resp) {\n            $log.log(resp);\n            vm.processGui;\n        };\n\n\n        vm.assignRoleSuccess = function (resp) {\n            $log.log(resp);\n            vm.processGui;\n        };\n\n\n        vm.getUsers = function (body) {\n            var users = intellicarAPI.userService.getMyUsersMapList({});\n\n            var groupUsers = intellicarAPI.groupService.getAssignedUsersMapList(body);\n\n            return $q.all([users, groupUsers])\n                .then(vm.handleUsersResponse, vm.handleFailure);\n        };\n\n        vm.handleUsersResponse = function (resp) {\n            $log.log(resp);\n\n            vm.setData(resp, vm.ASSIGN_USER_PERM);\n        };\n\n        vm.getRoles = function (body) {\n            var userRoles = intellicarAPI.userService.getMyRolesList({});\n\n                var groupRoles = intellicarAPI.groupService.getAssignedRolesList(body);\n\n            return $q.all([userRoles, groupRoles])\n                .then(vm.handleRolesResponse, vm.handleFailure);\n        };\n\n        vm.handleRolesResponse = function (resp) {\n            vm.setData(resp, vm.ASSIGN_ROLE_PERM);\n        };\n\n        vm.setData = function (resp, permission) {\n            $scope.groupData.datas[0].list = resp[1];\n\n            var userRole = resp[1];\n            var matching = false;\n            for (var idx in resp[0]) {\n                for (var role in resp[1]) {\n                    if (resp[0][idx].assetpath == resp[1][role].assetpath) {\n                        matching = true;\n                        break;\n                    } else {\n                        matching = false;\n                    }\n                }\n                if (!matching) {\n                    if (resp[0][idx].permissions.indexOf(permission) >= 0) {\n                        $scope.groupData.datas[1].list.push(resp[0][idx]);\n                    }\n                }\n            }\n\n            $log.log($scope.groupData.datas);\n        };\n\n\n        vm.panelData = function (data) {\n            vm.assets = [];\n            for (var key in data) {\n                vm.assets.push(data[key]);\n            }\n\n            if (settingsService.getCurrentGroupPath())\n                vm.showBtn = true;\n        };\n\n\n        vm.init = function () {\n            $log.log(startupData);\n\n            for (var idx in startupData) {\n                startupData[idx].assignUser = false;\n                if (startupData[idx].permissions.indexOf(vm.ASSIGN_USER_PERM) != -1)\n                    startupData[idx].assignUser = true;\n\n                startupData[idx].assignRole = false;\n                if (startupData[idx].permissions.indexOf(vm.ASSIGN_ROLE_PERM) != -1)\n                    startupData[idx].assignRole = true;\n            }\n\n            vm.panelData(startupData);\n\n            //\n            // window.setTimeout(function(){\n            //     var newData = groupMgmtService.getData((settingsService.getCurrentGroup()));\n            //\n            //     $log.log(newData);\n            //     $log.log($q.resolve(newData));\n            // }, 5000);\n\n            $log.log($stateParams);\n\n            // vm.selectedTreeGroup= $stateParams.info;\n\n            // vm.currentGroupAsset = settingsService.getCurrentGroupPath();\n            //\n            if (vm.currentGroupAsset) {\n                if (vm.currentGroupAsset.permissions.indexOf(vm.ASSIGN_USER_PERM) != 0)\n                    vm.currentGroupAsset.assignUser = true;\n\n                if (vm.currentGroupAsset.permissions.indexOf(vm.ASSIGN_ROLE_PERM) != 0)\n                    vm.currentGroupAsset.assignRole = true;\n\n            }\n\n\n        };\n\n\n        vm.init();\n    }\n})();\n\n\n\n/**\n * Created by smiddela on 28/08/16.\n */\n\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('roleMgmtService', roleMgmtService);\n\n    function roleMgmtService($rootScope, $log, $q, $state, intellicarAPI, settingsService) {\n        var vm = this;\n        $log.log(\"roleMgmtService\");\n\n\n        vm.getData = function(stateParams) {\n            $log.log(\"role getData\");\n            settingsService.setCurrentGroup(stateParams);\n            return intellicarAPI.groupService.getMyRolesMap(settingsService.getCurrentGroup());\n        };\n    }\n})();\n\n/**\n * Created by smiddela on 21/08/16.\n */\n\n\n\n(function () {\n\n    angular\n        .module('uiplatform')\n        .controller('RoleMgmtController', RoleMgmtController);\n\n    function RoleMgmtController($scope, $rootScope, $log, $q,\n                                intellicarAPI, settingsService, startupData,\n                                roleMgmtService, permissionService, $mdDialog) {\n        $log.log('RoleMgmtController');\n        settingsService.setTab(intellicarAPI.appConstants.ROLE);\n        var vm = this;\n        vm.assets = [];\n        vm.groupBtnStatus = false;\n        vm.isdiplay = false;\n        vm.showBtn = false;\n        vm.currentGroupAsset = settingsService.lastGroup;\n\n\n        vm.ASSIGN_PERMISSION = 12;\n\n        vm.assignPermissionSuccess = function(resp){\n            $log.log(resp);\n        };\n\n\n        vm.showNewRoleField = function () {\n            $log.log('show/hide');\n            vm.isdiplay = !vm.isdiplay;\n        };\n\n        vm.addPermission = function(data){\n\n            var body = {\n                grouppath:'/1/1'\n            }\n\n            var s = intellicarAPI.treeDataService.getManagementTree(body);\n\n            $log.log(s);\n\n            vm.selectedGrouppath = data.assetpath;\n\n            var body ={\n                grouppath:data.assetpath\n            };\n            vm.getPermissions(body);\n        };\n\n\n        vm.getPermissions = function(body) {\n            var permissions = intellicarAPI.permissionService.permissionMap({});\n\n            var assignedPerm = intellicarAPI.permissionService.permissionMap({});\n\n            return $q.all([permissions, assignedPerm])\n                .then(vm.handleUsersResponse, vm.handleFailure);\n        };\n\n\n        vm.handleUsersResponse = function(resp){\n            $log.log(resp);\n            vm.setData(resp, vm.ASSIGN_PERMISSION);\n        };\n\n        vm.setData = function(resp, permission){\n            // $log.log( resp);\n            // var assignablePermList = resp[0].data.data.permmap;\n            // var assignedPermList = resp[1].data.data.permmap;\n            //\n            // $scope.groupData.datas[0].list = [];\n            //\n            // $scope.groupData.datas[1].list = [];\n            // $scope.groupData.datas[1].list = assignedPermList;\n            //\n            // var matching = false;\n            // for ( var idx in assignablePermList){\n            //     for ( var perm in assignedPermList ) {\n            //         if (assignablePermList[idx].permid == assignedPermList[perm].permid){\n            //             matching = true;\n            //             break;\n            //         }else {\n            //             matching = false;\n            //         }\n            //     }\n            //\n            //     if ( !matching ) {\n            //         $scope.groupData.datas[1].list.push(assignablePermList[idx])\n            //     }\n            // }\n            //\n            // $log.log($scope.groupData.datas);\n            // $scope.groupData.visible = true;\n        };\n\n\n        vm.createRole = function () {\n            $log.log(vm.currentGroupAsset);\n\n            name = vm.newRoleName;\n            pgrouppath = vm.currentGroupAsset.assetpath;\n            var body = {\n                name : name,\n                pgrouppath: pgrouppath\n            };\n\n\n            intellicarAPI.roleService.createRole(body)\n                .then(vm.createRoleSuccess, vm.handleFailure);\n\n        };\n\n\n        vm.createRoleSuccess = function (resp) {\n            $log.log(resp);\n        };\n\n\n        vm.init = function () {\n            // $log.log(startupData);\n            vm.assets = [];\n            for (var key in startupData) {\n                if ( startupData[key].permissions.indexOf(vm.ASSIGN_PERMISSION)>=0){\n                    startupData[key].assignPermission = true;\n                }else {\n                    startupData[key].assignPermission = false;\n                }\n                vm.assets.push(startupData[key]);\n            }\n\n            // $log.log(vm.assets);\n            if ( settingsService.getCurrentGroupPath() )\n                vm.showBtn = true;\n\n            if (vm.currentGroupAsset) {\n                if (vm.currentGroupAsset.permissions.indexOf(vm.ASSIGN_USER_PERM) != 0)\n                    vm.currentGroupAsset.assignUser = true;\n\n                if (vm.currentGroupAsset.permissions.indexOf(vm.ASSIGN_ROLE_PERM) != 0)\n                    vm.currentGroupAsset.assignRole = true;\n\n            }\n\n        };\n\n        vm.init();\n    }\n})();\n\n\n\n/**\n * Created by smiddela on 28/08/16.\n */\n\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('deviceMgmtService', deviceMgmtService);\n\n    function deviceMgmtService($rootScope, $log, $q, $state, intellicarAPI, settingsService) {\n        var vm = this;\n        $log.log(\"deviceMgmtService\");\n\n\n        vm.handleResponse = function (resp) {\n            \"device response\";\n            $log.log(resp);\n        };\n\n\n        vm.handleFailure = function (resp) {\n            \"device failure response\";\n            $log.log(resp);\n        };\n\n\n        vm.getData = function (stateParams) {\n            $log.log(\"device getData\");\n            settingsService.setCurrentGroup(stateParams);\n            return intellicarAPI.groupService.getMyDevicesMap(settingsService.getCurrentGroup());\n        };\n    }\n})();\n\n// /**\n//  * Created by smiddela on 21/08/16.\n//  */\n//\n//\n//\n// (function () {\n//\n//     angular\n//         .module('uiplatform')\n//         .controller('DeviceMgmtController', DeviceMgmtController);\n//\n//     function DeviceMgmtController($scope, $rootScope, $log, $state,\n//                                   intellicarAPI, settingsService, startupData) {\n//\n//         $log.log('DeviceMgmtController');\n//         var vm = this;\n//         vm.data = [];\n//         settingsService.setTab(intellicarAPI.appConstants.DEVICE);\n//\n//         vm.onLoad = function () {\n//             $log.log(\"my device data\");\n//             $log.log(startupData);\n//\n//             for (var key in startupData) {\n//                 vm.details = {};\n//                 if (startupData.hasOwnProperty(key)) {\n//                     //$log.log(key + \" -> \" + startupData[key].name);\n//                     vm.details['name'] = startupData[key].name;\n//                     //vm.details['id'] = startupData[key].deviceid;\n//                     vm.details['id'] = startupData[key].assetid;\n//                     $log.log(vm.details);\n//                     vm.data.push(vm.details);\n//                     $scope = vm.data;\n//                 }\n//             }\n//         };\n//\n//         vm.onLoad();\n//     }\n// })();\n//\n//\n\n\n/**\n * Created by smiddela on 21/08/16.\n */\n\n\n(function () {\n\n    angular\n        .module('uiplatform')\n        .controller('DeviceMgmtController', DeviceMgmtController);\n\n    function DeviceMgmtController($scope, $log, startupData,\n                                   intellicarAPI, settingsService) {\n        $log.log('DeviceMgmtController');\n        settingsService.setTab(intellicarAPI.appConstants.DEVICE);\n        var vm = this;\n        vm.assets = [];\n        vm.groupBtnStatus = false;\n        vm.isdiplay = false;\n        vm.showBtn = false;\n        vm.currentGroupAsset = settingsService.lastGroup;\n\n        vm.handleStartupData = function (resp) {\n            $log.log(resp);\n        };\n\n\n        vm.handleStartupDataFailure = function (resp) {\n            $log.log(resp);\n        };\n\n        vm.onLoad = function () {\n            $log.log(startupData);\n            vm.assets = [];\n            for (var key in startupData) {\n                vm.assets.push(startupData[key]);\n            }\n            $log.log(vm.assets);\n\n            if ( settingsService.getCurrentGroupPath() )\n                vm.showBtn = true;\n        };\n\n        vm.showNewDeviceField = function () {\n            $log.log('show/hide');\n            vm.isdiplay = !vm.isdiplay;\n            vm.msg = \"\"\n        };\n\n        vm.onLoad();\n    }\n})();\n\n\n\n/**\n * Created by smiddela on 26/08/16.\n */\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('startupService', startupService);\n\n    function startupService($rootScope, $log, $q, $state, intellicarAPI, settingsService) {\n        var vm = this;\n        $log.log(\"startupService\");\n    }\n})();\n/**\n * Created by smiddela on 05/11/16.\n */\n\n\n(function () {\n    angular\n        .module('uiplatform')\n        .service('rightNavMgmtService', rightNavMgmtService);\n\n    function rightNavMgmtService($log, $timeout, intellicarAPI, $q) {\n        $log.log(\"rightNavMgmtService\");\n        var vm = this;\n\n        vm.init = function () {\n\n        };\n\n        vm.init();\n    }\n})();\n\n/**\n * Created by smiddela on 05/11/16.\n */\n\n(function () {\n    angular\n        .module('uiplatform')\n        .controller('RightNavMgmtController', RightNavMgmtController);\n\n    function RightNavMgmtController($log, $scope, $timeout, rightNavMgmtService, intellicarAPI, $q) {\n        $log.log(\"RightNavMgmtController\");\n        var vm = this;\n\n        vm.init = function () {\n\n        };\n\n        \n        vm.toggleRightSidebar = function(event, data) {\n            $log.log('dashboard right nav ')\n            if ( data.right_nav_toggle) {\n                document.getElementById(\"mySidenav\").style.width = \"320px\";\n                document.getElementById(\"main\").style.marginRight = \"320px\";\n            } else{\n                document.getElementById(\"mySidenav\").style.width = \"0\";\n                document.getElementById(\"main\").style.marginRight= \"0\";\n            }\n        };\n\n        $scope.$on('toggleRightSidebar', vm.toggleRightSidebar);\n\n\n        vm.init();\n    }\n})();\n\n/**\n * Created by smiddela on 13/08/16.\n */\n\n(function() {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('leftNavDashboardService', function($log, intellicarAPI, $q) {\n            $log.log(\"leftNavDashboardService\");\n\n            var vm = this;\n            vm.listeners = {};\n\n            vm.handleResponse = function(resp) {\n                //$log.log(\"leftNavDashboardService handleResponse\");\n                $log.log(resp);\n            };\n\n\n            vm.handleFailure = function(resp) {\n                $log.log(\"leftNavDashboardService handleFailure \");\n                $log.log(resp);\n                return $q.reject(resp);\n            };\n\n\n            vm.getDashboardTree = function(body) {\n                return intellicarAPI.treeDataService.getDashboardTree(body);\n            };\n\n\n            vm.getMyVehicles = function(body) {\n                return intellicarAPI.userService.getMyVehiclesMap(body);\n            };\n\n\n            vm.addListener = function(key, listener) {\n                vm.listeners[key] = listener;\n            };\n        });\n\n})();\n\n/**\n * Created by smiddela on 15/08/16.\n */\n\n(function () {\n    angular\n        .module('uiplatform')\n        .controller('LeftNavDashboardController', LeftNavDashboardController);\n\n    // .filter('trust', function ($sce) {\n    //     return function (val) {\n    //         return $sce.trustAsHtml(val);\n    //     };\n    // });\n\n    function LeftNavDashboardController($scope, $rootScope, $log, intellicarAPI,\n                                        leftNavDashboardService, $state, $filter) {\n\n        $scope.treeFilter = $filter('uiTreeFilter');\n\n        $log.log('LeftNavDashboardController');\n        var vm = this;\n        vm.state = $state;\n        vm.tree_search_pattern = '';\n        vm.search_results;\n\n        vm.handleDashboardTree = function (data) {\n            //$log.log(\"handleDashboardTree\");\n            //$log.log(data);\n            vm.tree_data = data;\n            //$log.log(vm.tree_data);\n        };\n\n        vm.handleFailure = function (data) {\n            $log.log(\"handleFailure\");\n            $log.log(data);\n        };\n\n\n        vm.handleMyVehicles = function (resp) {\n            //$log.log(resp);\n            //subscribe all assets\n            for (var idx in resp) {\n                vm.subscribe(resp[idx], true);\n            }\n        };\n\n\n        vm.getMyVehicles = function () {\n            leftNavDashboardService.getMyVehicles({})\n                .then(vm.handleMyVehicles, vm.handleFailure);\n        };\n\n\n        vm.test = function () {\n            console.log('clicked');\n            //leftNavDashboardService.getVehicleInfo();\n        };\n\n        vm.toggleCheck = function (item) {\n            //$log.log(\"checkStatus = \" + item.checkStatus);\n            if (item.checkStatus === \"checked\") {\n                item.checkStatus = \"unchecked\";\n            } else {\n                item.checkStatus = \"checked\";\n            }\n\n            if (item.items.length) {\n                vm.propagateCheckFromParent(item.items, item.checkStatus);\n            } else {\n                //mqtt subscription for realtime data\n                vm.subscribeCheckStatus(item);\n            }\n\n            vm.verifyAllParentsCheckStatus(vm.tree_data);\n        };\n\n\n        vm.propagateCheckFromParent = function (items, status) {\n            for (var i = 0; i < items.length; ++i) {\n                var item = items[i];\n                item.checkStatus = status;\n\n                if (item.items.length) {\n                    vm.propagateCheckFromParent(item.items, status);\n                } else {\n                    //mqtt subscription for realtime data\n                    vm.subscribeCheckStatus(item);\n                }\n            }\n        };\n\n\n        vm.subscribeCheckStatus = function (item) {\n            var subscriptionKey = 'gps';\n            if (item.checkStatus === \"checked\") {\n                intellicarAPI.mqttService.subscribeAsset(item.info, subscriptionKey);\n            } else {\n                intellicarAPI.mqttService.unsubscribeAsset(item.info, subscriptionKey);\n            }\n        };\n\n\n        vm.subscribe = function (asset, flag) {\n            var subscriptionKey = 'gps';\n            var vehiclePath = intellicarAPI.helperService.getAssetPath(asset);\n            var subscriptionMsg = [{path: vehiclePath}];\n            if (flag) {\n                //intellicarAPI.mqttService.subscribeAsset(asset, subscriptionKey);\n                intellicarAPI.mqttService.subscribe(subscriptionMsg, subscriptionKey);\n            } else {\n                //intellicarAPI.mqttService.unsubscribeAsset(asset, subscriptionKey);\n                intellicarAPI.mqttService.unsubscribe(subscriptionMsg, subscriptionKey);\n            }\n        };\n\n\n        vm.verifyAllParentsCheckStatus = function (items) {\n            var retVal = \"\";\n            for (var i = 0; i < items.length; ++i) {\n                var item = items[i];\n                //$log.log(item);\n                if (item.items.length) {\n                    item.checkStatus = vm.verifyAllParentsCheckStatus(item.items);\n                }\n                if (retVal === \"\") {\n                    retVal = item.checkStatus;\n                    // console.log(\"set ret\");\n                }\n                if (retVal != item.checkStatus)\n                    return \"partlyChecked\";\n            }\n            return retVal;\n        };\n\n\n        vm.expandAll = function () {\n            if (vm.tree_search_pattern.length <= 0) {\n                $scope.$broadcast('angular-ui-tree:expand-all');\n            } else {\n                $scope.$broadcast('angular-ui-tree:collapse-all');\n            }\n        };\n\n\n        vm.expand_tree = function () {\n            $log.log('expand');\n            $scope.$broadcast('angular-ui-tree:collapse-all');\n\n        };\n\n\n        vm.init = function () {\n            // leftNavDashboardService.getDashboardTree({})\n            //     .then(vm.handleDashboardTree, vm.handleFailure);\n            //vm.getMyVehicles();\n        };\n\n        vm.init();\n    }\n})();\n\n/**\n * Created by smiddela on 13/08/16.\n */\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('leftNavManagementService', function ($log, $q, intellicarAPI) {\n            $log.log(\"leftNavManagementService\");\n\n            var vm = this;\n            vm.listeners = {};\n\n            vm.tree_data = [];\n\n\n            vm.addListener = function (key, listener) {\n                if (!(key in vm.listeners)) {\n                    vm.listeners[key] = [];\n                }\n\n                if (vm.listeners[key].indexOf(listener) === -1) {\n                    vm.listeners[key].push(listener);\n                }\n            };\n\n\n            vm.callListeners = function (msg, key) {\n                if (key in vm.listeners) {\n                    for (var idx in vm.listeners[key]) {\n                        vm.listeners[key][idx](msg, key);\n                    }\n                }\n            };\n\n\n            vm.handleResponse = function (resp) {\n                //$log.log(\"leftNavManagementService handleResponse\");\n                //$log.log(resp);\n                return $q.resolve(resp);\n            };\n\n\n            vm.handleFailure = function (resp) {\n                $log.log(\"leftNavManagementService handleFailure \");\n                $log.log(resp);\n                return $q.reject(resp);\n            };\n\n\n            vm.getManagementTreeWithUser = function (body) {\n                return intellicarAPI.treeDataService.getManagementTreeWithUser(body)\n                    .then(vm.handleResponse, vm.handleFailure);\n            };\n\n            vm.getManagementTreeNoUser = function (body) {\n                return intellicarAPI.treeDataService.getManagementTreeNoUser(body)\n                    .then(vm.handleResponse, vm.handleFailure);\n            };\n        });\n})();\n\n/**\n * Created by smiddela on 15/08/16.\n */\n\n(function () {\n\n    angular\n        .module('uiplatform')\n        .controller('LeftNavManagementController', LeftNavManagementController);\n\n    function LeftNavManagementController($rootScope,$scope, $log, startupTreeData, groupService,\n                                         leftNavManagementService, $state, $filter,\n                                         settingsService, $timeout) {\n\n        $log.log('LeftNavManagementController');\n        var vm = this;\n        vm.state = $state;\n        vm.tree_search_pattern = '';\n        vm.search_results;\n\n        $log.log(startupTreeData);\n\n\n        $scope.treeFilter = $filter('uiTreeFilter');\n\n        vm.availableFields = ['title', 'description'];\n        vm.supportedFields = ['title', 'description'];\n        //vm.firedgrouppaths = [];\n\n\n        vm.handleResponse = function (data) {\n            //$log.log(\"handleResponse\");\n            $log.log(data);\n            vm.tree_data = data;\n            return vm.tree_data;\n        };\n        //\n        // vm.handleSubGroupResponse = function (data) {\n        //     //$log.log(\"handleResponse\");\n        //     // $log.log(data);\n        //     vm.tree_data = data;\n        // };\n\n\n        vm.handleResponseFailure = function (data) {\n            $log.log(\"handleResponseFailure\");\n            $log.log(data);\n        };\n\n\n        vm.setFirstGroup = function(resp){\n            $log.log(resp);\n            if(resp.length) {\n                groupService.lastGroupPath = resp[0].info.assetpath;\n                settingsService.lastGroup = resp[0].info;\n            }\n        };\n\n        vm.handleAssetClick = function (asset, collapsed, toggle, obj) {\n            $log.log('handle asset click', collapsed);\n            // if (!collapsed) {\n            //     toggle(obj);\n            // }\n\n            if(!asset.ui_asset_type && asset.info.ui_asset_type === 'group') {\n                vm.selectedAsset = asset.id;\n                asset.loading = true;\n                groupService.lastGroupPath = asset.info.assetpath;\n                settingsService.lastGroup = asset.info;\n\n                if (asset.info.assetpath == '/1/1') {\n                    leftNavManagementService.getManagementTreeWithUser({grouppath: asset.info.assetpath})\n                        .then(vm.handleResponse, vm.handleResponseFailure);\n                } else {\n                    leftNavManagementService.getManagementTreeNoUser({grouppath: asset.info.assetpath})\n                        .then(vm.handleResponse, vm.handleResponseFailure);\n                }\n            }\n            settingsService.setCurrentGroup(asset);\n\n            settingsService.handleAssetClick(asset);\n        };\n\n\n        vm.expand_tree = function () {\n            $log.log('expand');\n            // $scope.$broadcast('angular-ui-tree:collapse-all');\n            var duplicateTree;\n\n            // if ( vm.tree_search_pattern === '' )\n            //     angular.copy(duplicateTree, vm.tree_data);\n            // else {\n            //     angular.copy(vm.tree_data, duplicateTree);\n            // }\n            vm.filterTree(vm.tree_data);\n\n        };\n\n\n        vm.filterTree = function (data) {\n            for (var i = 0; i < data.length; i++) {\n                data[i].collapsed = true;\n\n                if (data[i].items.length)\n                    vm.filterTree(data[i].items)\n            }\n        };\n\n\n        vm.toggleLeftSidebar = function(event, data) {\n            if ( data.left_nav_toggle) {\n                document.getElementById(\"myLeftSidenav\").style.width = \"320px\";\n                document.getElementById(\"main\").style.marginLeft = \"320px\";\n            } else{\n                document.getElementById(\"myLeftSidenav\").style.width = \"0\";\n                document.getElementById(\"main\").style.marginLeft= \"0\";\n            }\n        };\n\n        // vm.expandAll = function () {\n        //     if ( vm.tree_search_pattern.length <= 0 ){\n        //         $scope.$broadcast('angular-ui-tree:expand-all');\n        //         $log.log('Expanddddddddddddd')\n        //\n        //     } else {\n        //         $scope.$broadcast('angular-ui-tree:expand-all');\n        //         $log.log('Collapseeeeeeeeeeeeeee');\n        //     }\n        // };\n\n        vm.init = function (data) {\n            $log.log(startupTreeData);\n            //vm.firedgrouppaths.push(startupTreeData);\n            startupTreeData = startupTreeData.toString();\n            leftNavManagementService.getManagementTreeWithUser({grouppath:startupTreeData})\n                .then(vm.handleResponse, vm.handleResponseFailure)\n                .then(vm.setFirstGroup, vm.handleResponseFailure);\n        };\n\n\n        vm.init();\n\n        $scope.$on('toggleLeftSidebar', vm.toggleLeftSidebar);\n\n        $scope.$on('EVENT_MGMT_TREE_CHANGE', vm.init);\n    }\n\n})();\n\n\n// vm.toggleCheck = function (item) {\n//     $log.log(\"checkStatus = \" + item.checkStatus);\n//     if (item.checkStatus === \"checked\") {\n//         item.checkStatus = \"unchecked\";\n//     } else {\n//         item.checkStatus = \"checked\";\n//     }\n//\n//     if (item.items && item.items.length)\n//         vm.propagateCheckFromParent(item.items, item.checkStatus);\n//\n//     vm.verifyAllParentsCheckStatus(vm.tree_data);\n// };\n//\n// vm.propagateCheckFromParent = function (items, status) {\n//     for (var i = 0; i < items.length; ++i) {\n//         var item = items[i];\n//         item.checkStatus = status;\n//         if (item.items)\n//             vm.propagateCheckFromParent(item.items, status)\n//     }\n// };\n//\n// vm.verifyAllParentsCheckStatus = function (items) {\n//     var retVal = \"\";\n//     for (var i = 0; i < items.length; ++i) {\n//         var item = items[i];\n//         $log.log(item);\n//         if (item.items && item.items.length) {\n//             item.checkStatus = vm.verifyAllParentsCheckStatus(item.items);\n//         }\n//         if (retVal === \"\") {\n//             retVal = item.checkStatus;\n//             // console.log(\"set ret\");\n//         }\n//         if (retVal != item.checkStatus)\n//             return \"partlyChecked\";\n//\n//     }\n//     return retVal;\n// };\n\n/**\n * Created by harshas on 17/9/16.\n */\n\n(function () {\n    angular\n        .module('uiplatform')\n        .service('rightNavAlertDashboardService', function ($log, intellicarAPI, $q) {\n            $log.log(\"rightNavDashboardAlertService\");\n\n            var vm = this;\n            // vm.msgListeners = [];\n            vm.listeners = {};\n\n\n            vm.handleResponse = function (resp) {\n                //$log.log(\"leftNavDashboardService handleResponse\");\n                $log.log(resp);\n            };\n\n\n            vm.handleFailure = function (resp) {\n                $log.log(\"rightNavDashboardService handleFailure \");\n                $log.log(resp);\n                return $q.reject(resp);\n            };\n\n            vm.getDashboardAlerts = function (body) {\n                return intellicarAPI.treeDataService.getDashboardTree(body);\n            };\n\n            // vm.addListener = function(key, listener) {\n            //     vm.listeners[key] = listener;\n            // };\n\n\n            // vm.alertClick = function (alertid) {\n            //     for (var eachidx in vm.msgListeners) {\n            //         vm.msgListeners[eachidx](alertid);\n            //     }\n            // };\n            //\n            //\n            // vm.addListener = function (listener) {\n            //     if (vm.msgListeners.indexOf(listener) == -1) {\n            //         vm.msgListeners.push(listener);\n            //     }\n            // };\n\n\n            var data = [{\n                vehicleid: 'MH02EH1318',\n                vehiclepath: '1/1/3/1',\n                deviceid: 4567,\n                fencerep: [\n                    {\n                        fenceid: 1,\n                        fencename: 'SNS Motors - Meera Road',\n                        reportid: 1234,\n                        reportname: 'Mumbai North Service centers',\n                        triggerdat: 14024332,\n                        triggerloc: 'bng',\n                        triggertype: 'entry'\n                    }, {\n                        fenceid: 2,\n                        fencename: 'Royce Nissan - Meera Road',\n                        reportid: 1234,\n                        reportname: 'Mumbai North Service centers',\n                        triggerdat: 14024332,\n                        triggerloc: 'bng',\n                        triggertype: 'exit'\n                    }\n                ]\n            }, {\n                vehicleid: 'MH02EH1233',\n                vehiclepath: '1/1/3/1',\n                deviceid: 4567,\n                fencerep: [\n                    {\n                        fenceid: 1,\n                        fencename: 'Ritu Nissan - Thane',\n                        reportid: 234,\n                        reportname: 'Thane Service centers',\n                        triggerdat: 14024332,\n                        triggerloc: 'bng',\n                        triggertype: 'entry'\n                    }, {\n                        fenceid: 2,\n                        fencename: 'Ecotech - Thane',\n                        reportid: 1234,\n                        reportname: 'Thane Service centers',\n                        triggerdat: 14024332,\n                        triggerloc: 'bng',\n                        triggertype: 'exit'\n                    }\n                ]\n            }];\n\n\n\n            var reportData = {};\n            var liveAlarmData = {};\n\n            vm.getReportData = function() {\n                return reportData;\n            };\n\n            vm.getAlarmData = function() {\n                return liveAlarmData;\n            };\n\n\n            vm.updateFenceReport = function (msg) {\n                if (msg == null)\n                    return;\n\n                //$log.log(msg);\n\n                var topic = msg[0];\n                var data = msg[1];\n                //$log.log(data);\n                var vehicleno = data.vehicleno;\n\n\n                for (var eachReport in reportData) {\n                    var report = reportData[eachReport];\n                    for (var eachFence in report) {\n                        var fence = report[eachFence];\n                        for (var eachVehicle in fence) {\n                            var vehicle = fence[eachVehicle];\n                            //$log.log(vehicle);\n                            if (vehicle.vehicleno == vehicleno) {\n                                //$log.log(\"Removing \" + vehicleno + \" from \" + vehicle.reportName);\n                                delete vehicle;\n                                break;\n                            }\n                        }\n                    }\n                }\n\n\n                if (data.activeFences && data.activeFences.length) {\n                    //$log.log(msg);\n                    for (var idx in data.activeFences) {\n                        var activeFence = data.activeFences[idx];\n                        var activeinfo = activeFence['activeinfo'];\n                        //$log.log(activeinfo);\n                        for(var eachitem in activeinfo) {\n                            var fenceObj = activeinfo[eachitem];\n                            var reportName = activeinfo[eachitem].reportName;\n                            var fenceName = activeinfo[eachitem].fenceName;\n                            //$log.log(\"reportname = \" + reportName);\n                            //$log.log(fenceName);\n                            if (!(reportName in reportData)) {\n                                reportData[reportName] = {};\n                            }\n\n                            if (!(fenceName in reportData[reportName])) {\n                                reportData[reportName][fenceName] = {};\n                            }\n\n                            if (!(vehicleno in reportData[reportName][fenceName])) {\n                                if(fenceObj.reportTypePath.substr(fenceObj.reportTypePath.length - 2) == '38'){\n                                    fenceObj.triggerType = true;\n                                }else{\n                                    fenceObj.triggerType = false;\n                                }\n                                fenceObj.vehicleno = vehicleno;\n                                // fenceObj.vehiclepath = reportData[reportName][fenceName];\n                                // console.log(reportData[reportName][fenceName]);\n                                //$log.log(\"Adding \" + vehicleno + \" to \" + reportName);\n                                reportData[reportName][fenceName][vehicleno] = fenceObj;\n                            }\n                        }\n                    }\n                }\n                //vm.pushDataToController(reportData);\n                //vm.callListeners('updatefencereport', {});\n            };\n\n\n            vm.addListener = function (key, listener) {\n                if (!(key in vm.listeners)) {\n                    vm.listeners[key] = [];\n                }\n\n                if (vm.listeners[key].indexOf(listener) === -1) {\n                    vm.listeners[key].push(listener);\n                }\n            };\n\n\n            vm.callListeners = function (msg, key) {\n                if (key in vm.listeners) {\n                    for (var idx in vm.listeners[key]) {\n                        vm.listeners[key][idx](msg, key);\n                    }\n                }\n            };\n\n            vm.updateAlarms = function(msg, key){\n                if (msg == null ) return;\n\n                var data = msg[1];\n                var reasonType = data.alarmreason;\n\n                var vehicleno = data.vehicleno;\n\n                for ( var type in liveAlarmData ) {\n                    for ( var myvehicle in liveAlarmData[type]){\n                        if (vehicleno == myvehicle) {\n                            //$log.log(\"Removing \" + vehicleno + \" from \" + vehicle.reportName);\n                            delete myvehicle;\n                            break;\n                        }\n                    }\n                }\n\n                if (!(reasonType in liveAlarmData)) {\n                    liveAlarmData[reasonType] = {};\n                }\n\n                liveAlarmData[reasonType][vehicleno]={};\n                liveAlarmData[reasonType][vehicleno].timestamp = data.timestamp;\n                liveAlarmData[reasonType][vehicleno].latitude = data.latitude;\n                liveAlarmData[reasonType][vehicleno].longitude = data.longitude;\n                liveAlarmData[reasonType][vehicleno].opermode = data.opermode;\n                liveAlarmData[reasonType][vehicleno].vehiclepath = data.vehiclepath;\n                liveAlarmData[reasonType][vehicleno].deviceid = data.deviceid;\n\n                // $log.log(liveAlarmData);\n            };\n\n\n            vm.init = function () {\n                intellicarAPI.mqttService.addListener('rtfence', vm.updateFenceReport);\n                intellicarAPI.mqttService.addListener('rtalarm', vm.updateAlarms);\n            };\n\n\n            vm.init();\n\n        });\n})();\n\n/**\n * Created by smiddela on 15/08/16.\n */\n\n(function () {\n    angular\n        .module('uiplatform')\n        .controller('RightNavDashboardController', RightNavDashboardController);\n\n    function RightNavDashboardController($log, $scope, $timeout, rightNavAlertDashboardService,\n                                         geofenceReportService, vehicleService, mapService,\n                                         intellicarAPI, $q, $interval) {\n        $log.log(\"RightNavDashboardController\");\n        var vm = this;\n        vm.alertDetails = [];\n        vm.vehicleData = {};\n        vm.searchAlertStr = '';\n        vm.reports = {};\n\n        vm.handleFailure = function (resp) {\n            $log.log('handleFailure');\n            $log.log(resp);\n        };\n\n\n        vm.getMyGeofenceReports = function (resp) {\n            //$log.log(resp);\n            vm.reports = geofenceReportService.getMyGeofenceReports();\n            //$log.log(vm.reports);\n\n            for (var idx in vm.reports) {\n                var subscriptionMsg = [];\n                subscriptionMsg.push({fencereport: idx, vehicles: []});\n                for (var eachitem in vm.reports[idx].assg) {\n                    subscriptionMsg[0].vehicles.push(vm.reports[idx].assg[eachitem].assetpath);\n                }\n                intellicarAPI.mqttService.subscribe(subscriptionMsg, 'rtfence');\n\n                //$log.log(subscriptionMsg);\n            }\n            vm.currRep = vm.reports[0];\n        };\n\n        // vm.getMyGeofenceReportsMap = function () {\n        //     geofenceReportService.getMyGeofenceReportsMap()\n        //         .then(vm.getMyGeofenceReports, vm.handleFailure);\n        // };\n\n\n        vm.getDashboardAlerts = function (data) {\n            // $log.log(data);\n            vm.formatAlertData(data);\n\n            // $log.log(vm.alertDetails);\n        };\n\n        var count = 0;\n        vm.formatAlertData = function (data) {\n            var details = {};\n            for (var i = 0; i < data.length; i++) {\n                details = {};\n                details.name = data[i].info.name;\n                details.assetpath = data[i].info.assetpath;\n                details.id = count++;\n                vm.alertDetails.push(details);\n\n                if (data[i].items.length)\n                    vm.formatAlertData(data[i].items)\n            }\n        };\n\n        vm.getDashboardAlertsFailure = function (data) {\n            $log.log(\"getDashboardTreeFailure\");\n            $log.log(data);\n        };\n\n\n        vm.alertResolve2 = function (alertId) {\n            $log.log(alertId);\n            for (var i = 0; i < vm.alertDetails.length; i++) {\n                if (alertId == vm.alertDetails[i].id) {\n                    $log.log('matched');\n                    vm.alertDetails.splice(i, 1);\n                    return;\n                }\n            }\n        };\n\n\n        vm.alertClick = function (alertid) {\n            rightNavAlertDashboardService.alertClick(alertid);\n        };\n\n\n        vm.initialize = function () {\n            rightNavAlertDashboardService.getDashboardAlerts({})\n                .then(vm.getDashboardAlerts, vm.getDashboardAlertsFailure);\n        };\n\n\n        vm.collapseAlertPanel = function (panel) {\n            panel.collapse();\n        };\n\n        vm.navAlerts = [\n            {\n                category: 'Hub Report',\n                alarms: [{id: '8910'}, {odometer: '40'}, {ignition: 'On'}, {mobility: 'moblized'}]\n            }, {\n                category: 'Geofence',\n                alarms: [{id: '1234'}, {odometer: '20'}, {ignition: 'On'}, {mobility: 'moblized'}]\n            }, {\n                category: 'Device pullout',\n                alarms: [{id: '4567'}, {odometer: '32'}, {ignition: 'off'}, {mobility: 'moblized'}]\n            }, {\n                category: 'City limit',\n                alarms: [{id: '8910'}, {odometer: '40'}, {ignition: 'On'}, {mobility: 'moblized'}]\n            }\n        ];\n\n\n        // vm.mydata = rightNavAlertDashboardService.updateFenceReport();\n        // $log.log(vm.mydata);\n        //\n        // vm.activeTabData = vm.mydata;\n\n        vm.activeFilter = 'all';\n        vm.finalTabHeightHalf = 35 + 2;// 2 for margin\n        vm.finalTabHeight = 160 + 2; // 2 for margin\n\n        vm.isOpened = function (car, data) {\n            // if(car.active){\n            //     data.childOpened++;\n            // }else{\n            //     data.childOpened--;\n            // }\n        };\n\n\n        vm.resolveFilter = true;\n        vm.resolveFilterAll = true;\n\n        vm.getColorCounter = 0;\n\n        vm.getColor = 'border-top: 1px solid #f00;';\n        vm.getColors = function () {\n            vm.getColorCounter++;\n            if (vm.getColorCounter == 1) {\n                return getStyle('#2ecc71');\n            } else if (vm.getColorCounter == 2) {\n                return getStyle('#34495e');\n            } else if (vm.getColorCounter == 3) {\n                return getStyle('#3498db');\n            } else if (vm.getColorCounter == 4) {\n                return getStyle('#9b59b6');\n            } else if (vm.getColorCounter == 5) {\n                return getStyle('#1abc9c');\n            } else if (vm.getColorCounter == 6) {\n                return getStyle('#f1c40f');\n            } else if (vm.getColorCounter == 7) {\n                return getStyle('#e67e22');\n            } else if (vm.getColorCounter == 8) {\n                return getStyle('#e74c3c');\n            } else if (vm.getColorCounter == 9) {\n                return getStyle('#d35400');\n            }\n        };\n        function getStyle(color) {\n            return 'border-top: 2px solid ' + color + '; ';\n        }\n\n        vm.itemClicked = function (data, level) {\n            data.active = !data.active;\n            if (level == 3) {\n                mapService.highlightMarker(vehicleService.vehiclesByNumber[data.vehicleno].assetpath);\n            }\n        };\n\n        vm.updateFenceReport = function (msg) {\n            // console.log(msg);\n        };\n\n        rightNavAlertDashboardService.pushDataToController = function (data) {\n            vm.activeTabData = data;\n            // console.log(data);\n        };\n\n        var mapObj = {\n            hours: 'h',\n            hour: 'h',\n            minutes: 'min',\n            minute: 'min',\n            days: 'd',\n            day: 'd',\n            an: '1',\n            'a few seconds': '1 min',\n            a: '1'\n        };\n        var re = new RegExp(Object.keys(mapObj).join(\"|\"), \"gi\");\n\n        vm.getTimeDiff = function (data) {\n            var start = data.entry;\n            var end = data.exit;\n            if (start - end <= 0) {\n                data.stillActive = true;\n                end = new Date();\n            }\n            start /= 1000;\n            end /= 1000;\n            start = moment.unix(start);\n\n            end = moment.unix(end);\n            return moment.duration(end.diff(start)).humanize().replace(re, function (matched) {\n                return mapObj[matched];\n            });\n        };\n\n\n        vm.returnLength = function (data, level) {\n            var length = 0;\n            if (level == 1) {\n                for (key in data) {\n                    for (key2 in data[key]) {\n                        if (key2 != 'active') {\n                            length++;\n                        }\n                    }\n                }\n                return length;\n            } else if (level == 2) {\n                for (key in data) {\n                    if (key != 'active') {\n                        length++;\n                    }\n                }\n                return length;\n            }\n        };\n\n        var vehicleClosed = 0;\n        var vehicleOpened = 0;\n\n        vm.returnHeight = function (data) {\n            if (data.active) {\n                vehicleClosed = vehicleOpened = 0;\n                for (veh in data) {\n                    if (veh != 'active') {\n                        if (data[veh].active) {\n                            vehicleOpened++;\n                        } else {\n                            vehicleClosed++;\n                        }\n                    }\n                }\n                return ((vehicleClosed * 37) + (vehicleOpened * 137) + 37 ) + 'px';\n            } else {\n                return '37px';\n            }\n        };\n\n\n        vm.navFilter = function (data) {\n            return true;\n        };\n\n        // Functions and variables of Right nav report box\n\n        vm.RESOLVED = 'RESOLVED';\n        vm.UNRESOLVED = 'UNRESOLVED';\n        vm.RESOLVING = 'RESOLVING';\n        vm.SAVING = 'SAVING';\n        vm.SAVED = 'SAVED';\n\n\n        vm.resolutionKeyEvent = function (e, data) {\n            if (e.ctrlKey && (e.which == 83)) {\n                e.preventDefault();\n                vm.saveRep(data);\n                return false;\n            }\n            if (e.ctrlKey && (e.which == 13)) {\n                e.preventDefault();\n                vm.resolve(data);\n                return false;\n            }\n        };\n\n        vm.resolve = function (car) {\n            // console.log(car);\n            if (car.state != vm.RESOLVING) {\n                if (car.resolved) {\n                    // Do stuff for un resolving\n\n                    car.state = vm.RESOLVING;\n                    $timeout(function () { // Run this without $timeout after getting API response\n                        car.state = vm.RESOLVED;\n                        car.resolved = false;\n                        car.resolveStr = 'resolved';\n                    }, 2000);\n                } else {\n                    //Do stuff for resolving\n\n\n                    car.state = vm.RESOLVING;\n                    $timeout(function () {// Run this without $timeout after getting API response\n                        car.state = vm.UNRESOLVED;\n                        car.resolved = true;\n                        car.resolveStr = 'unresolved';\n                    }, 2000);\n                }\n            }\n        };\n\n        vm.saveRep = function (rep) {\n            if (rep.state != vm.SAVING) {\n                //console.log('saving...');\n                rep.state = vm.SAVING;\n\n\n                //Do some stuffs to save the report\n                $timeout(function () {// Run this without $timeout after getting API response\n                    rep.state = vm.SAVED;\n                }, 2000);\n            }\n        };\n\n\n        vm.mapServiceUpdate = function (msg) {\n            //$log.log('mapServiceUpdate');\n            //$log.log(msg);\n            if (!(msg.vehicleno in vm.vehicleData)) {\n                vm.vehicleData[msg.vehicleno] = {}\n            }\n\n            vm.vehicleData[msg.vehicleno].ignitionstatus = msg.ignitionstatus;\n        };\n\n\n        vm.updateFenceReport = function (data) {\n            //vm.activeTabData = rightNavAlertDashboardService.getReportData();\n        };\n\n        vm.historyGeofenceReports = function (data) {\n            // $log.log(data);\n            var date = new Date();\n            var startTime = date.setHours(date.getHours() - 24);//1 day before\n            var endTime = new Date().getTime();\n\n            var promiseList = [];\n            vm.reports = [];\n            for (var idx in data) {\n                var rep = {};\n                rep.reportName = data[idx].name;\n                rep.reportId = idx;\n                rep.vehiclesAssetPath = [];\n                rep.vehicles = [];\n                rep.fences = [];\n\n                for (var vehicle in data[idx].assg) {\n                    var detail = {\n                        id: data[idx].assg[vehicle].assetpath,\n                        name: data[idx].assg[vehicle].name\n                    };\n                    if (data[idx].assg[vehicle].assgfromassetid == 4) {\n                        rep.vehiclesAssetPath.push(data[idx].assg[vehicle].assetpath);\n                        rep.vehicles.push(detail);\n                    } else if (data[idx].assg[vehicle].assgfromassetid == 15) {\n                        rep.fences.push(detail);\n                    }\n                }\n                vm.reports.push(rep);\n\n                // $log.log(new Date(startTime), new Date(endTime));\n                var body = {\n                    fencereport: idx,\n                    vehicles: rep.vehiclesAssetPath,\n                    starttime: startTime / 1000,\n                    endtime: endTime / 1000\n                };\n                promiseList.push(intellicarAPI.geofenceService.getReportHistory(body));\n            }\n\n            return $q.all(promiseList)\n                .then(vm.readHistoryInfo, vm.handleFailure);\n        };\n\n        vm.readHistoryInfo = function (history) {\n            if (!history[0])\n                return;\n            var data = history[0].data.data;\n            // $log.log(vm.reports);\n\n            // $log.log(data);\n            if (!data.length) {\n                return;\n            }\n\n            for (var details in data) {\n                for (var idx in vm.reports) {\n                    if (vm.reports[idx].reportId == data[details].reportpath) {\n                        for (var fence in vm.reports[idx].fences) {\n                            if (vm.reports[idx].fences[fence].id == data[details].fencepath) {\n                                for (var vehicle in vm.reports[idx].vehicles) {\n                                    var myVehicle = vm.reports[idx].vehicles[vehicle];\n                                    if (myVehicle.id == data[details].deviceid) {\n                                        if (!(vm.reports[idx].fences[fence][myVehicle.name]))\n                                            vm.reports[idx].fences[fence][myVehicle.name] = [];\n                                        var startTime = parseInt(data[details].fentry);\n                                        var endTime = parseInt(data[details].fexit);\n                                        if ((startTime < endTime) && (endTime - startTime) > ( 1000 * 60 * 3 )) {\n                                            vm.reports[idx].fences[fence][myVehicle.name].push({\n                                                fentry: data[details].fentry,\n                                                fexit: data[details].fexit\n                                            })\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                        break;\n                    }\n                }\n            }\n            // $log.log(vm.reports);\n        };\n\n        vm.toggleRightSidebar = function (event, data) {\n            $log.log('dashboard right nav ')\n            if (!data.right_nav_toggle) {\n                document.getElementById(\"mySidenav\").style.width = \"320px\";\n                document.getElementById(\"main\").style.marginRight = \"320px\";\n            } else {\n                document.getElementById(\"mySidenav\").style.width = \"0\";\n                document.getElementById(\"main\").style.marginRight = \"0\";\n            }\n        };\n\n        vm.getAddress = function (midKey, index, lat, lng) {\n            // vm.vehicleAddress='Loading';\n            // WebuiPopovers.updateContentAsync( '.'+vm.popoverIndex,'') //Update the Popover content after the popover is created.\n\n            var body = {\n                data: [[lat, lng]]\n            };\n            var promise = (intellicarAPI.geocodeService.getAddress(body));\n\n            vm.popoverIndex = 'pops' + midKey + index;\n            return $q.resolve(promise)\n                .then(vm.gotAddress, vm.handleFailure);\n        };\n\n        vm.gotAddress = function (data) {\n            // $log.log(data.data.data);\n\n            if (!data.data.data.length) return;\n\n            var addr = data.data.data;\n\n            for (var idx in addr)\n                addr = addr[idx];\n\n            var vehicleAddress = addr[1]\n\n            // $log.log(vm.popoverIndex);\n\n            // $('.'+vm.popoverIndex).attr('data-content', vm.vehicleAddress);\n            $log.log(vehicleAddress);\n            WebuiPopovers.updateContent('.' + vm.popoverIndex, vehicleAddress) //Update the Popover content after the popover is created.\n        }\n\n        $scope.$on('toggleRightSidebar', vm.toggleRightSidebar);\n\n        vm.init = function () {\n            geofenceReportService.addListener('mygeofencereportsinfo', vm.getMyGeofenceReports);\n            vm.activeTabData = rightNavAlertDashboardService.getReportData();\n            vm.activeAlarmData = rightNavAlertDashboardService.getAlarmData();\n            geofenceReportService.addListener('mygeofencereportsinfo', vm.historyGeofenceReports);\n\n            $interval(function () {\n                $('.eye-icon').webuiPopover({trigger: 'hover', width: 300, animation: 'pop'});\n            }, 3000);\n        };\n\n        vm.init();\n    }\n})();\n\n\n\n/**\n * Created by harshas on 23/11/16.\n */\n\n/**\n * Created by smiddela on 20/08/16.\n */\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('mapService', function ($log, $interval, $q, $timeout, userprefService,\n                                         intellicarAPI, vehicleService, $mdDialog,\n                                         dialogService) {\n            $log.log(\"mapService\");\n            var vm = this;\n            vm.listeners = {};\n            vm.filterStr = \"\";\n\n            vm.inMap = {\n                map: null,\n                mapOptions: {},\n                markers: {\n                    clickedMarker: {},\n                    markersByPath: {}\n                },\n                circles: [],\n                polygons: [],\n                selectedFenceObj: {\n                    latitude: '',\n                    longitude: '',\n                    name: '',\n                    other: ''\n                }\n            };\n\n            vm.setInMapLocation = function (loc) {\n                vm.inMap.center = angular.copy(loc);\n                var latlng = new google.maps.LatLng (vm.inMap.center.latitude, vm.inMap.center.longitude);\n                vm.inMap.map.setCenter(latlng);\n                vm.inMap.map.setZoom(11);\n            };\n\n            vm.getPolygonMidPoint = function (polygon) {\n                var bound = new google.maps.LatLngBounds();\n                for (var idx in polygon) {\n                    bound.extend(new google.maps.LatLng(polygon[idx].latitude, polygon[idx].longitude));\n                }\n                return bound.getCenter();\n            };\n\n\n            vm.showHistory = function () {\n                dialogService.show('home.history', {\n                    clickedMarker: vm.inMap.markers.clickedMarker\n                });\n            };\n\n            vm.mobilize = function (mobilityRequest) {\n                vm.inMap.markers.clickedMarker.mobilityRequest = mobilityRequest;\n\n                var immobalizeDialog = $mdDialog.confirm({\n                    controller: 'ImmobalizeController',\n                    templateUrl: 'app/components/landingpage/dashboard/map/immobalize-dialog.html',\n                    clickOutsideToClose: true,\n                    escapeToClose: true,\n                    locals: {\n                        params: {\n                            clickedMarker: vm.inMap.markers.clickedMarker\n                        }\n                    }\n                }).ok('Yes').cancel('No');\n\n                $mdDialog.show(immobalizeDialog)\n                    .then(function () {\n                        //$log.log(\"Yes Function\");\n                    }, function () {\n                        //$log.log(\"No Function\");\n                    })\n            };\n\n            vm.mapClickEvent = function () {\n                vm.fenceInfoWindowClose();\n                vm.infoWindowClose();\n            };\n\n            vm.getMainMap = function () {\n                return vm.inMap;\n            };\n\n\n            vm.loc = {\n                USER: 'USER',\n                MUMBAI: 'MUMBAI',\n                BANGALORE: 'BANGALORE',\n                HYDERABAD: 'HYDERABAD',\n                PUNE: 'PUNE',\n                DELHI: 'DELHI',\n                CHENNAI: 'CHENNAI',\n                KOLKATA: 'KOLKATA'\n            };\n\n\n            vm.locations = [\n                {\n                    id: vm.loc.USER,\n                    notation: 'USR',\n                    latlng: {latitude: 19.195549, longitude: 72.936381}\n                }, {\n                    id: vm.loc.MUMBAI,\n                    notation: 'MUM',\n                    latlng: {latitude: 19.195549, longitude: 72.936381}\n                }, {\n                    id: vm.loc.BANGALORE,\n                    notation: 'BLR',\n                    latlng: {latitude: 12.967995, longitude: 77.597953}\n                }, {\n                    id: vm.loc.HYDERABAD,\n                    notation: 'HYD',\n                    latlng: {latitude: 17.384125, longitude: 78.479447}\n                }, {\n                    id: vm.loc.PUNE,\n                    notation: 'PUN',\n                    latlng: {latitude: 18.521445, longitude: 73.866031}\n                }, {\n                    id: vm.loc.DELHI,\n                    notation: 'DEL',\n                    latlng: {latitude: 28.614132, longitude: 77.215449}\n                }, {\n                    id: vm.loc.CHENNAI,\n                    notation: 'CHE',\n                    latlng: {latitude: 13.075837, longitude: 80.206900}\n                }, {\n                    id: vm.loc.KOLKATA,\n                    notation: 'KOL',\n                    latlng: {latitude: 22.6754795, longitude: 88.0877022}\n                }\n            ];\n\n            vm.currentLocation = vm.locations[1];\n\n            vm.setUserPref = function (userSettings) {\n                //console.log(userSettings);\n                vm.currentLocation = vm.locations[0];\n                vm.currentLocation.latlng = userSettings.station;\n                vm.center = vm.currentLocation.latlng;\n                vm.callListeners(userSettings, 'setUserPref');\n            };\n\n            vm.getCurrentLocation = function () {\n                return vm.currentLocation;\n            };\n\n            vm.center = vm.currentLocation.latlng;\n            vm.zoom = 11;\n            vm.bounds = {};\n\n            vm.getCenter = function () {\n                return vm.center;\n            };\n\n            vm.getZoom = function () {\n                return vm.zoom;\n            };\n\n\n            vm.getBounds = function () {\n                return vm.bounds;\n            };\n\n\n            vm.addListener = function (key, listener) {\n                if (!(key in vm.listeners)) {\n                    vm.listeners[key] = [];\n                }\n\n                if (vm.listeners[key].indexOf(listener) === -1) {\n                    vm.listeners[key].push(listener);\n                }\n            };\n\n\n            vm.callListeners = function (msg, key) {\n                if (key in vm.listeners) {\n                    for (var idx in vm.listeners[key]) {\n                        vm.listeners[key][idx](msg, key);\n                    }\n                }\n            };\n\n            vm.updateMarker = function (vehicleObj, key) {\n                var rtgps = vehicleObj.rtgps;\n                // if (!('id' in rtgps)) {\n                //     var deviceidStr = rtgps.deviceid;\n                //     if (deviceidStr.substring(0, 5) == '213GL') {\n                //         deviceidStr = deviceidStr.substring(5);\n                //     }\n                //     rtgps.id = parseInt(deviceidStr);\n                //     rtgps.options = {};\n                //     rtgps.options.visible = false;\n                // }\n\n                vm.callListeners(rtgps, key);\n            };\n\n\n            vm.init = function () {\n                //$log.log('map init()');\n                vehicleService.addListener('rtgps', vm.updateMarker);\n                userprefService.addListener('setUserPref', vm.setUserPref);\n            };\n\n            vm.init();\n\n\n            vm.mapStyles = {};\n            vm.mapStyles.default = [];\n            vm.mapStyles.dark = [\n                {\n                    \"featureType\": \"all\",\n                    \"elementType\": \"labels.text.fill\",\n                    \"stylers\": [\n                        {\n                            \"saturation\": 36\n                        },\n                        {\n                            \"color\": \"#000000\"\n                        },\n                        {\n                            \"lightness\": 40\n                        }\n                    ]\n                },\n                {\n                    \"featureType\": \"all\",\n                    \"elementType\": \"labels.text.stroke\",\n                    \"stylers\": [\n                        {\n                            \"visibility\": \"on\"\n                        },\n                        {\n                            \"color\": \"#000000\"\n                        },\n                        {\n                            \"lightness\": 16\n                        }\n                    ]\n                },\n                {\n                    \"featureType\": \"all\",\n                    \"elementType\": \"labels.icon\",\n                    \"stylers\": [\n                        {\n                            \"visibility\": \"off\"\n                        }\n                    ]\n                },\n                {\n                    \"featureType\": \"administrative\",\n                    \"elementType\": \"geometry.fill\",\n                    \"stylers\": [\n                        {\n                            \"color\": \"#000000\"\n                        },\n                        {\n                            \"lightness\": 20\n                        }\n                    ]\n                },\n                {\n                    \"featureType\": \"administrative\",\n                    \"elementType\": \"geometry.stroke\",\n                    \"stylers\": [\n                        {\n                            \"color\": \"#000000\"\n                        },\n                        {\n                            \"lightness\": 17\n                        },\n                        {\n                            \"weight\": 1.2\n                        }\n                    ]\n                },\n                {\n                    \"featureType\": \"landscape\",\n                    \"elementType\": \"geometry\",\n                    \"stylers\": [\n                        {\n                            \"color\": \"#000000\"\n                        },\n                        {\n                            \"lightness\": 20\n                        }\n                    ]\n                },\n                {\n                    \"featureType\": \"poi\",\n                    \"elementType\": \"geometry\",\n                    \"stylers\": [\n                        {\n                            \"color\": \"#000000\"\n                        },\n                        {\n                            \"lightness\": 21\n                        }\n                    ]\n                },\n                {\n                    \"featureType\": \"road.highway\",\n                    \"elementType\": \"geometry.fill\",\n                    \"stylers\": [\n                        {\n                            \"color\": \"#000000\"\n                        },\n                        {\n                            \"lightness\": 17\n                        }\n                    ]\n                },\n                {\n                    \"featureType\": \"road.highway\",\n                    \"elementType\": \"geometry.stroke\",\n                    \"stylers\": [\n                        {\n                            \"color\": \"#000000\"\n                        },\n                        {\n                            \"lightness\": 29\n                        },\n                        {\n                            \"weight\": 0.2\n                        }\n                    ]\n                },\n                {\n                    \"featureType\": \"road.arterial\",\n                    \"elementType\": \"geometry\",\n                    \"stylers\": [\n                        {\n                            \"color\": \"#000000\"\n                        },\n                        {\n                            \"lightness\": 18\n                        }\n                    ]\n                },\n                {\n                    \"featureType\": \"road.local\",\n                    \"elementType\": \"geometry\",\n                    \"stylers\": [\n                        {\n                            \"color\": \"#000000\"\n                        },\n                        {\n                            \"lightness\": 16\n                        }\n                    ]\n                },\n                {\n                    \"featureType\": \"transit\",\n                    \"elementType\": \"geometry\",\n                    \"stylers\": [\n                        {\n                            \"color\": \"#000000\"\n                        },\n                        {\n                            \"lightness\": 19\n                        }\n                    ]\n                },\n                {\n                    \"featureType\": \"water\",\n                    \"elementType\": \"geometry\",\n                    \"stylers\": [\n                        {\n                            \"color\": \"#0f252e\"\n                        },\n                        {\n                            \"lightness\": 17\n                        }\n                    ]\n                }\n            ];\n\n        });\n})();\n\n(function () {\n\n    angular\n        .module('uiplatform')\n        .controller('MapController', MapController)\n        .controller('ImmobalizeController', ImmobalizeController);\n\n\n    function MapController($scope, $log, cpuService, mapService,\n                           $interval, geofenceViewService, $timeout, customMapOverlay, $compile,\n                           vehicleService, historyService, $state, $mdDialog, intellicarAPI) {\n        $log.log('MapController');\n        var vm = this;\n        var dateFormat = 'DD-MM-YYYY HH:mm';\n\n        var wh = $(window).height();\n        var header_height = 95;\n\n        var markerInfowindow = new google.maps.InfoWindow();\n        var fenceInfowindow = new google.maps.InfoWindow();\n\n\n        vm.inMap = mapService.getMainMap();\n        vm.inMarkers = vm.inMap.markers.inMarkers;\n        vm.markersByPath = vm.inMap.markers.markersByPath;\n        vm.selectedFenceObj = vm.inMap.selectedFenceObj;\n        vm.filterStr = mapService.filterStr;\n        vm.excludeFilters = [\n            'icon', 'le', 'onroad', 'regno',\n            'carbattery', 'devbattery', 'odometer',\n            'latitude', 'longitude', 'altitude', 'direction', 'nosatellites',\n            'speed', 'rpm'\n        ];\n        vm.mainFilters = ['Running', 'Stopped', 'Active', 'Immobilized', 'Not Communicating', 'Device pullout'];\n        vm.markerIconChangeTriggered = false;\n        vm.zoomhappened = true;\n\n        vm.onRoaded = true;\n        vm.offRoaded = false;\n\n        vm.leftToolbar = function () {\n            return geofenceViewService.getToolbarVar();\n        };\n\n\n        vm.loadMap = function () {\n            vm.inMap.zoom = mapService.getZoom();\n            vm.inMap.center = mapService.getCenter();\n            vm.inMap.bounds = mapService.getBounds();\n            vm.createMap();\n        };\n\n\n        vm.setUserPref = function (userSettings) {\n            //vm.inMap.center = userSettings.station;\n            vm.inMap.map.setCenter(new google.maps.LatLng(userSettings.station.latitude, userSettings.station.longitude));\n        };\n\n\n        vm.getMarkerCenter = function (marker) {\n            return {latitude: marker.latitude, longitude: marker.longitude};\n        };\n\n        vm.onRoadCheck = function () {\n            // $log.log(\"onroad check\");\n            vm.runFilters(vm.filterStr);\n            vm.runStats();\n        };\n\n\n        vm.offRoadCheck = function () {\n            //$log.log(\"offroad check\");\n            vm.runFilters(vm.filterStr);\n            vm.runStats();\n        };\n\n\n        vm.checkRoaded = function (rtgps) {\n            if (rtgps && rtgps.meta) {\n                if (rtgps.meta.onroad) {\n                    if (vm.onRoaded) {\n                        return true;\n                    }\n                } else {\n                    if (vm.offRoaded) {\n                        return true;\n                    }\n                }\n            }\n\n            // $log.log(\"false\");\n            return false;\n        };\n\n\n        vm.setClickedMarker = function (model) {\n            if (model.vehiclepath in vm.markersByPath) {\n                //delete model['marker'];\n                // console.log(model.vehiclepath);\n                vm.inMap.markers.clickedMarker = vehicleService.vehiclesByPath[model.vehiclepath];\n                vm.inMap.markers.clickedMarker.hideMobilityControls = (vehicleService.vehiclesByPath[model.vehiclepath].permissions.indexOf(74) == -1);\n                $scope.clickedMarker = vm.inMap.markers.clickedMarker;\n                $scope.hideMobilityControls = vm.inMap.markers.clickedMarker.hideMobilityControls;\n            }\n        };\n\n\n        vm.updateMarker2 = function (rtgps) {\n            // $log.log('updateMarker2');\n            // $log.log(rtgps);\n\n            //vm.inMarkers.push(rtgps);\n\n\n            var marker = new google.maps.Marker({\n                position: new google.maps.LatLng(rtgps.latitude, rtgps.longitude),\n                icon: vm.getIcon(rtgps),\n                vehiclepath: rtgps.vehiclepath\n            });\n\n            // var data = rtgps.vehiclepath;\n\n            if (!(rtgps.vehiclepath in vm.markersByPath)) {\n                vm.markersByPath[rtgps.vehiclepath] = marker;\n            }\n\n            google.maps.event.addListener(marker, 'click', function (event) {\n                vm.setClickedMarker(this);\n                markerInfowindow.setContent(document.getElementById(\"marker_infowindow\").innerHTML);\n\n                markerInfowindow.open(map, this);\n            });\n\n            marker.setMap(vm.inMap.map);\n            vm.customOverlay(rtgps);\n        };\n\n\n        vm.updateMarker = function (rtgps) {\n            if ((rtgps.vehiclepath in vm.inCustomMaker) && (vm.geoFilters.showVehicleNo)) {\n                vm.inCustomMaker[rtgps.vehiclepath].setPosition(rtgps);\n            }\n\n            if (rtgps.vehiclepath in vm.markersByPath) {\n                var markerPos = new google.maps.LatLng(rtgps.latitude, rtgps.longitude);\n                vm.markersByPath[rtgps.vehiclepath].setPosition(markerPos);\n                vm.updateMarkerIcon(rtgps);\n            }\n\n            vm.applyFilterToMarker(rtgps, vm.filterStr);\n        };\n\n\n        vm.showAllMarkers = function () {\n            for (var idx in vm.markersByPath) {\n                var rtgps = vehicleService.vehiclesByPath[idx].rtgps;\n                vm.markersByPath[idx].setVisible(vm.checkRoaded(rtgps));\n            }\n        };\n\n        vm.runFilters = function (filterStr) {\n            vm.filterStr = filterStr;\n            mapService.filterStr = filterStr;\n            markerInfowindow.close();\n\n            if (vm.filterStr.length == 0) {\n                vm.showAllMarkers();\n                //vm.inMap.map.setZoom(11);\n                return;\n            }\n\n            console.log(\"filter=\", vm.filterStr);\n\n            /* center the map based on the first marker position that matches the filter */\n            var centerMap = false;\n            var centerLatLng = null;\n            var fenceMatch = false;\n            var matchedMarker = null;\n\n            if (vm.filterStr.length > 2) {\n                for (var idx in vm.markersByPath) {\n                    var visible = vm.applyFilterToMarker(vehicleService.vehiclesByPath[idx].rtgps, filterStr);\n                    if (visible) {\n                        matchedMarker = vm.markersByPath[idx];\n                        var lat = Math.floor(matchedMarker.getPosition().lat());\n                        var lng = Math.floor(matchedMarker.getPosition().lng());\n                        var maplat = Math.floor(vm.inMap.map.getCenter().lat());\n                        var maplng = Math.floor(vm.inMap.map.getCenter().lng());\n\n                        if (lat == maplat && lng == maplng && !centerMap) {\n                            if (Math.abs(matchedMarker.getPosition().lat() - vm.inMap.map.getCenter().lat()) > 0.2) {\n                                vm.inMap.map.setCenter(matchedMarker.getPosition());\n                            }\n\n                            if (vm.mainFilters.indexOf(vm.filterStr) == -1) {\n                                vm.inMap.map.setCenter(matchedMarker.getPosition());\n                                vm.inMap.map.setZoom(16);\n                            }\n\n                            centerMap = true;\n                        }\n                        centerLatLng = matchedMarker.getPosition();\n                    }\n                }\n\n                for (var idx in vm.polygonsByPath) {\n                    if (centerMap)\n                        break;\n\n                    var fencePolygon = vm.polygonsByPath[idx];\n                    if (fencePolygon.control.info.tagdata.olafilter == 'citylimit')\n                        continue;\n                    if (!fencePolygon.control.info.name.toString().toLowerCase().includes(filterStr.toString().toLowerCase()))\n                        continue;\n\n                    fenceMatch = true;\n                    for (var item in fencePolygon.path) {\n                        var latlng = fencePolygon.path[item];\n                        centerLatLng = new google.maps.LatLng(latlng.latitude, latlng.longitude);\n                        if (Math.abs(latlng.latitude - vm.inMap.map.getCenter().lat()) < 0.5 &&\n                            Math.abs(latlng.longitude - vm.inMap.map.getCenter().lng()) < 0.5) {\n                            //console.log(\"Centering map at \", fencePolygon.control.info.name);\n                            vm.inMap.map.setCenter(centerLatLng);\n                            vm.inMap.map.setZoom(16);\n                            centerMap = true;\n                            break;\n                        }\n                    }\n                }\n\n\n                for (var idx in vm.circlesByPath) {\n                    if (centerMap)\n                        break;\n\n                    var fenceCircle = vm.circlesByPath[idx];\n                    if (fenceCircle.control.info.tagdata.olafilter == 'citylimit')\n                        continue;\n                    if (!fenceCircle.control.info.name.toString().toLowerCase().includes(filterStr.toString().toLowerCase()))\n                        continue;\n\n                    fenceMatch = true;\n                    var latlng = fenceCircle.center;\n                    centerLatLng = new google.maps.LatLng(latlng.latitude, latlng.longitude);\n                    if (Math.abs(latlng.latitude - vm.inMap.map.getCenter().lat()) < 0.5 &&\n                        Math.abs(latlng.longitude - vm.inMap.map.getCenter().lng()) < 0.5) {\n                        //console.log(\"Centering map at \", fenceCircle.control.info.name);\n                        vm.inMap.map.setCenter(centerLatLng);\n                        vm.inMap.map.setZoom(16);\n                        centerMap = true;\n                        break;\n                    }\n                }\n\n                if (fenceMatch) {\n                    vm.showAllMarkers();\n                }\n\n                if (centerLatLng && !centerMap) {\n                    vm.inMap.map.setCenter(centerLatLng);\n                    if (vm.mainFilters.indexOf(vm.filterStr) == -1)\n                        vm.inMap.map.setZoom(16);\n                }\n            }\n\n            if (vm.vehicleNumber) {\n                showVehicleNumberWindow();\n            }\n        };\n\n        vm.applyFilterToMarker = function (rtgps, filterStr) {\n            if (rtgps == null)\n                return false;\n\n            if (!(rtgps.vehiclepath in vm.markersByPath)) {\n                // console.log(rtgps.vehiclepath);\n                return false;\n            }\n\n            var visible = false;\n            if (!vm.matchesAnyMarkerData(rtgps, filterStr)) {\n                visible = false;\n                if (rtgps.vehiclepath in vm.inCustomMaker) {\n                    vm.inCustomMaker[rtgps.vehiclepath].hide();\n                }\n            } else {\n                visible = true;\n                if (rtgps.vehiclepath in vm.inCustomMaker && vm.geoFilters.showVehicleNo) {\n                    vm.inCustomMaker[rtgps.vehiclepath].show();\n                }\n            }\n\n            visible = vm.checkRoaded(rtgps) && visible;\n            vm.markersByPath[rtgps.vehiclepath].setVisible(visible);\n\n            if (rtgps.vehiclepath in vm.inCustomMaker) {\n                if (visible && vm.geoFilters.showVehicleNo) {\n                    vm.inCustomMaker[rtgps.vehiclepath].show();\n                } else {\n                    vm.inCustomMaker[rtgps.vehiclepath].hide();\n                }\n            }\n            return visible;\n        };\n\n\n        vm.matchesAnyMarkerData = function (input, filterStr) {\n            var result = false;\n\n            if (input.constructor == Object || input.constructor == Array) {\n                for (var eachidx in input) {\n\n                    if (input[eachidx] == null)\n                        continue;\n\n                    result = result || vm.matchesAnyMarkerData(input[eachidx], filterStr);\n                }\n\n                return result;\n            }\n\n            if (vm.excludeFilters.indexOf(input) != -1)\n                return false;\n\n            var lowercasefilterStr = filterStr.toString().toLowerCase();\n            var lowercaseMarkerStr = input.toString().toLowerCase();\n\n            if (lowercaseMarkerStr.includes(lowercasefilterStr)) {\n                return true;\n            }\n\n            return false;\n        };\n\n\n        vm.vehicleStats = {\n            showall: 0,\n            running: 0,\n            stopped: 0,\n            active: 0,\n            noComm: 0,\n            devPullout: 0,\n            immobilized: 0\n        };\n\n\n        vm.runStats = function () {\n            for (var filter in vm.vehicleStats) {\n                if (filter === 'showall') { // <---- Why we put condition ?\n                    vm.vehicleStats[filter] = vm.getStats(filter);\n                } else {\n                    vm.vehicleStats[filter] = vm.getStats(filter);\n                }\n            }\n        };\n\n\n        vm.getStats = function (filterStr) {\n            var count = 0;\n            vm.vehicleStats.noComm = 0;\n            vm.vehicleStats.devPullout = 0;\n            for (var idx in vehicleService.vehiclesByPath) {\n                var rtgps = vehicleService.vehiclesByPath[idx].rtgps;\n                if (vm.checkRoaded(rtgps)) {\n                    checkNoComm(rtgps, function (rtgps) {\n                        vm.vehicleStats.noComm++;\n                    });\n                    if (rtgps.carbattery < 2) {\n                        vm.vehicleStats.devPullout++;\n                    }\n                    if (vm.matchesAnyMarkerData(rtgps, filterStr)) {\n                        count++;\n                    } else { // <--- Can we use else if instead of this ?\n                        if (filterStr === \"showall\") {\n                            count++;\n                        }\n                    }\n                }\n            }\n            //$log.log(\"Filtered vehicles = \" + count);\n            return count;\n        };\n\n\n        vm.geoFilters = {\n            showAll: true,\n            parkingLot: true,\n            serviceStation: true,\n            competitorHub: true,\n            tollplaza: true,\n            cityLimits: false,\n            carBattery: false,\n            devBattery: false,\n            noComm: false,\n            showVehicleNo: false\n        };\n\n        geofenceViewService.setData('geoFilters', vm.geoFilters);\n\n        var PARKING = 'parking';\n        var SERVICE_STATION = 'servicestation';\n        var COMPETITOR_HUB = 'competitor';\n        var CITY_LIMIT = 'citylimit';\n        var TOLL_PLAZA = 'tollplaza';\n\n        var DEFAULT_STROKE = 6;\n        var MIN_STROKE = 3;\n\n\n        vm.getMyFences = function (fences) {\n            geofenceViewService.setData('geofences', true);\n            vm.applyFilters({filterType: 'showAll'});\n\n            vm.createPolygons(fences.polygons);\n            vm.createCircles(fences.circles);\n        };\n\n        vm.createPolygons = function (polygons) {\n            var polygonMap = {};\n            for (var idx in polygons) {\n                var paths = [];\n                for (var j = 0; j < polygons[idx].path.length; j++) {\n                    paths.push(new google.maps.LatLng(polygons[idx].path[j].latitude,\n                        polygons[idx].path[j].longitude));\n                }\n\n                var color = getColor(polygons[idx].control.info.tagdata);\n                polygons[idx].strokeColor = color;\n\n                var strokeWeight = getStroke(polygons[idx].control.info.tagdata);\n                polygons[idx].strokeWeight = strokeWeight;\n\n                var googlePolygon = new google.maps.Polygon({\n                    path: paths,\n                    strokeColor: polygons[idx].strokeColor,\n                    strokeWeight: polygons[idx].strokeWeight,\n                    fillColor: polygons[idx].fillColor,\n                    fillOpacity: polygons[idx].fillOpacity,\n                    info: polygons[idx].control.info\n                });\n\n                google.maps.event.addListener(googlePolygon, 'click', function (evt) {\n                    vm.selectedFenceObj = this;\n                    fenceInfowindow.setContent(document.getElementById(\"fence_infowindow\").innerHTML);\n                    fenceInfowindow.setPosition(evt.latLng);\n                    fenceInfowindow.open(vm.inMap.map, this);\n                });\n\n                if (checkFilterString(polygons[idx].control.info.tagdata)) {\n                    googlePolygon.setMap(vm.inMap.map);\n                }\n\n                polygons[idx].googleObject = googlePolygon;\n                polygonMap[polygons[idx].control.info.assetpath] = polygons[idx];\n            }\n            vm.polygonsByPath = polygonMap;\n        };\n\n\n        vm.createCircles = function (circles) {\n            var circlesMap = {};\n            for (var idx in circles) {\n\n                var color = getColor(circles[idx].control.info.tagdata);\n                circles[idx].strokeColor = color;\n\n                var strokeWeight = getStroke(circles[idx].control.info.tagdata);\n                circles[idx].strokeWeight = strokeWeight;\n\n                var googleCircle = new google.maps.Circle({\n                    strokeColor: circles[idx].strokeColor,\n                    strokeWeight: circles[idx].strokeWeight,\n                    fillColor: circles[idx].fillColor,\n                    fillOpacity: circles[idx].fillOpacity,\n                    center: new google.maps.LatLng(circles[idx].center.latitude, circles[idx].center.longitude),\n                    radius: circles[idx].radius,\n                    info: circles[idx].control.info\n                });\n\n                google.maps.event.addListener(googleCircle, 'click', function (evt) {\n                    vm.selectedFenceObj = this;\n                    fenceInfowindow.setPosition(evt.latLng);\n                    fenceInfowindow.setContent(document.getElementById(\"fence_infowindow\").innerHTML);\n                    fenceInfowindow.open(vm.inMap.map, this);\n                });\n\n                if (checkFilterString(circles[idx].control.info.tagdata)) {\n                    googleCircle.setMap(vm.inMap.map);\n                }\n\n                circles[idx].googleObject = googleCircle;\n                circlesMap[circles[idx].control.info.assetpath] = circles[idx];\n\n            }\n            vm.circlesByPath = circlesMap;\n        };\n\n\n        var DEVBATTERY_THRESHOLD = 3.55;\n        var CARBATTERY_THRESHOLD = 9.5;\n\n        vm.applyFilters = function (filterData, recall) {\n            var idx;\n            var marker;\n            if (recall == null) {\n                recall = 1;\n            }\n\n            if (filterData.filterType == 'carBattery') {\n                for (idx in vm.markersByPath) {\n                    marker = vm.markersByPath[idx];\n                    if (vm.geoFilters.carBattery) {\n                        if (vehicleService.vehiclesByPath[idx].rtgps.carbattery < CARBATTERY_THRESHOLD &&\n                            vm.checkRoaded(vehicleService.vehiclesByPath[idx].rtgps)) {\n                            vm.inCustomMaker[marker.vehiclepath].highlight('orange');\n                        }\n                    } else {\n                        if (recall == 1) {\n                            vm.inCustomMaker[marker.vehiclepath].unhighlight();\n                            vm.applyFilters({filterType: 'devBattery'}, recall - 1);\n                            vm.applyFilters({filterType: 'noComm'}, recall - 1);\n                        }\n                    }\n                }\n            } else if (filterData.filterType == 'devBattery') {\n                for (idx in vm.markersByPath) {\n                    marker = vm.markersByPath[idx];\n                    if (vm.geoFilters.devBattery) {\n                        if (vehicleService.vehiclesByPath[idx].rtgps.devbattery < DEVBATTERY_THRESHOLD &&\n                            vm.checkRoaded(vehicleService.vehiclesByPath[idx].rtgps)) {\n                            vm.inCustomMaker[marker.vehiclepath].highlight('yellow');\n                        }\n                    } else {\n                        if (recall == 1) {\n                            vm.inCustomMaker[marker.vehiclepath].unhighlight();\n                            vm.applyFilters({filterType: 'carBattery'}, recall - 1);\n                            vm.applyFilters({filterType: 'noComm'}, recall - 1);\n                        }\n\n                    }\n                }\n            } else if (filterData.filterType == 'noComm') {\n                for (idx in vm.markersByPath) {\n                    marker = vm.markersByPath[idx];\n                    if (vm.geoFilters.noComm) {\n                        checkNoComm(vehicleService.vehiclesByPath[idx].rtgps, function () {\n                            if (vm.checkRoaded(vehicleService.vehiclesByPath[idx].rtgps)) {\n                                vm.inCustomMaker[marker.vehiclepath].highlight('red');\n\n                            }\n                        });\n                    }\n                    else {\n                        if (recall == 1) {\n                            vm.inCustomMaker[marker.vehiclepath].unhighlight();\n                            vm.applyFilters({filterType: 'devBattery'}, recall - 1);\n                            vm.applyFilters({filterType: 'carBattery'}, recall - 1);\n                        }\n                    }\n                }\n            } else if (filterData.filterType == 'showVehicleNo') {\n                // Do something to notify showVehicleNo filter is On\n            } else {\n                if ($state.current.name == 'home.history')\n                    vm.currentMap = historyService.historyMap.map;\n                else\n                    vm.currentMap = vm.inMap.map;\n\n                if (vm.circlesByPath) {\n                    // $log.log(vm.circlesByPath);\n                    for (var idx in vm.circlesByPath) {\n                        var filterStr = vm.circlesByPath[idx].control.info.tagdata;\n                        vm.circlesByPath[idx].googleObject.setMap(null);\n\n                        if (checkFilterString(filterStr)) {\n                            vm.circlesByPath[idx].strokeWeight = getStroke(filterStr);\n                            vm.circlesByPath[idx].strokeColor = getColor(filterStr);\n                            vm.circlesByPath[idx].googleObject.setMap(vm.currentMap);\n                            //startAnimation(vm.circlesByPath[idx]);\n                        }\n                    }\n                }\n                if (vm.polygonsByPath) {\n                    for (var idx in vm.polygonsByPath) {\n                        filterStr = vm.polygonsByPath[idx].control.info.tagdata;\n                        vm.polygonsByPath[idx].googleObject.setMap(null);\n                        if (checkFilterString(filterStr)) {\n                            vm.polygonsByPath[idx].googleObject.setMap(vm.currentMap);\n                            //startAnimation(vm.polygonsByPath[idx]);\n                        }\n                    }\n                }\n            }\n        };\n\n\n        function checkNoComm(marker, callback) {\n            var currentTime = new Date().getTime();\n            var lastSeenAt = marker.timestamp.getTime();\n            var noCommThreshold = vehicleService.noCommThreshold;\n            if (currentTime - lastSeenAt > noCommThreshold) {\n                if (callback) {\n                    callback(marker);\n                }\n            }\n        }\n\n\n        function getColor(str) {\n            var type = getType(str);\n\n            if (type == PARKING) {\n                return 'black';\n            } else if (type == SERVICE_STATION) {\n                return '#bc31ff';\n            } else if (type == COMPETITOR_HUB) {\n                return 'red';\n            } else if (type == CITY_LIMIT) {\n                return 'blue';\n            } else if (type == TOLL_PLAZA) {\n                return '#f37813';\n            }\n\n            return '#31ff36';\n        }\n\n        function getStroke(str) {\n            var type = getType(str);\n            if (type == CITY_LIMIT) {\n                return MIN_STROKE;\n            }\n\n            return DEFAULT_STROKE;\n        }\n\n\n        function startAnimation(obj) {\n            var count = 0;\n            //$log.log(getType(obj.control.info.tagdata));\n            if (getType(obj.control.info.tagdata) !== CITY_LIMIT) {\n                $interval(function () {\n                    count++;\n                    if (count % 2 == 0)\n                        obj.strokeWeight = DEFAULT_STROKE;\n                    else\n                        obj.strokeWeight = MIN_STROKE;\n\n                }, 500, 4);\n            }\n        }\n\n\n        function getType(tagdata) {\n            var str = tagdata.olafilter;\n\n            if (str.match(/parking/g) && str.match(/parking/g).length > 0)\n                return PARKING;\n            if (str.match(/servicestation/g) && str.match(/servicestation/g).length > 0)\n                return SERVICE_STATION;\n            if (str.match(/competitor/g) && str.match(/competitor/g).length > 0)\n                return COMPETITOR_HUB;\n            if (str.match(/citylimit/g) && str.match(/citylimit/g).length > 0)\n                return CITY_LIMIT;\n            if (str.match(/tollplaza/g) && str.match(/tollplaza/g).length > 0)\n                return TOLL_PLAZA;\n\n            return null;\n        }\n\n\n        function checkFilterString(tagdata) {\n            var str = tagdata.olafilter;\n\n            //$log.log(\"olafilter = \" + str);\n            if (vm.geoFilters.parkingLot && str.match(/parking/g) && str.match(/parking/g).length > 0) {\n                // $log.log(\"vm.geoFilters.parkingLot = \" + vm.geoFilters.parkingLot);\n                return true;\n            }\n\n            if (vm.geoFilters.serviceStation && str.match(/servicestation/g) && str.match(/servicestation/g).length > 0) {\n                // $log.log(\"vm.geoFilters.serviceStation = \" + vm.geoFilters.serviceStation);\n                return true;\n            }\n\n            if (vm.geoFilters.competitorHub && str.match(/competitor/g) && str.match(/competitor/g).length > 0) {\n                // $log.log(\"vm.geoFilters.competitorHub = \" + vm.geoFilters.competitorHub);\n                return true;\n            }\n\n            if (vm.geoFilters.competitorHub && str.match(/tollplaza/g) && str.match(/tollplaza/g).length > 0) {\n                // $log.log(\"vm.geoFilters.tollplaza = \" + vm.geoFilters.tollplaza);\n                return true;\n            }\n\n            if (vm.geoFilters.cityLimits && str.match(/citylimit/g) && str.match(/citylimit/g).length > 0) {\n                // $log.log(vm.geoFilters.cityLimits);\n                return true;\n            }\n\n            return false;\n        }\n\n        vm.addListener = function () {\n            vehicleService.addListener('rtgps2', vm.updateMarker2);\n            mapService.addListener('rtgps', vm.updateMarker);\n            geofenceViewService.addListener('getMyFences', vm.getMyFences);\n            geofenceViewService.addListener('applyFilters', vm.applyFilters);\n            mapService.addListener('setUserPref', vm.setUserPref);\n        };\n\n        // Google Map Custom HTML Marker ================================================================================================================\n\n        vm.inCustomMaker = {};\n\n        mapService.highlightMarker = function (vehiclePath) {\n            vm.highlightMarker(vehiclePath);\n        };\n\n        vm.highlightMarker = function (vehiclePath) {\n            if (vehiclePath in vm.inCustomMaker) {\n                vm.inCustomMaker[vehiclePath].highlightMe();\n            } else {\n                console.log('[CUSTOM OVERLAY] no marker found to highLight!');\n            }\n        };\n\n\n        vm.customOverlay = function (rtgps) {\n            if (!(rtgps.vehiclepath in vm.inCustomMaker)) {\n                vm.inCustomMaker[rtgps.vehiclepath] = new customMapOverlay.CustomMarker(rtgps.latitude, rtgps.longitude, mapService.inMap.map, {marker: rtgps});\n            }\n        };\n\n        function showVehicleNumberWindow() {\n            for (idx in vm.inCustomMaker) {\n                if (vm.markersByPath[vm.inCustomMaker[idx].args.marker.vehiclepath].getVisible()) {\n                    vm.inCustomMaker[idx].show();\n                    vm.inCustomMaker[idx].showVehicleNumber();\n                } else {\n                    vm.inCustomMaker[idx].hide();\n                    vm.inCustomMaker[idx].hideVehicleNumber();\n                }\n            }\n        }\n\n        vm.showVehicleNumber = function (vn) {\n            //vm.runFilters(vm.filterStr);\n            vm.vehicleNumber = vn;\n            if (vm.vehicleNumber) {\n                showVehicleNumberWindow();\n            } else {\n                for (idx in vm.inCustomMaker) {\n                    vm.inCustomMaker[idx].hide();\n                    vm.inCustomMaker[idx].hideVehicleNumber();\n                }\n            }\n        };\n\n\n        vm.fitBounds = function (event, active) {\n            //console.log(\"fitBounds\");\n\n            var bounds = new google.maps.LatLngBounds();\n            for (var idx in vm.markersByPath) {\n                var rtgps = vehicleService.vehiclesByPath[idx].rtgps;\n                if(vm.markersByPath[idx].getVisible() && vm.checkRoaded(rtgps)) {\n                    bounds.extend(vm.markersByPath[idx].getPosition());\n                }\n            }\n            vm.inMap.map.fitBounds(bounds);\n        };\n\n\n        geofenceViewService.showVehicleNumber = function (vn) {\n            vm.showVehicleNumber(vn);\n        };\n\n\n        vm.downloadView = function (event, active) {\n            var selectedView = [];\n            var latlngList = [];\n            var UNKNOWN = \"UNKNOWN\";\n            for (var idx in vm.inMap.markers.markersByPath) {\n                var marker = vm.inMap.markers.markersByPath[idx];\n                if (marker.getVisible()) {\n                    var rtgps = vehicleService.vehiclesByPath[idx].rtgps;\n\n                    selectedView.push({\n                        \"Vehicle No\": rtgps.vehicleno,\n                        \"Device ID\": rtgps.deviceid,\n                        \"Chassis No\": rtgps.meta.chassisno,\n                        \"Make\": rtgps.meta.cartype,\n                        \"Last comm time\": moment(rtgps.timestamp).format(dateFormat),\n                        \"Odometer\": rtgps.odometer,\n                        \"OnRoad\": rtgps.meta.onroad,\n                        \"Mobility\": rtgps.mobilistatusFilter,\n                        \"Ignition\": rtgps.ignitionstatusStr,\n                        \"Vehicle Battery\": rtgps.carbattery,\n                        \"Device Battery\": rtgps.devbattery,\n                        //\"City\": rtgps.meta.city,\n                        \"Team\": rtgps.meta.team,\n                        \"Leasing Executive\": rtgps.meta.le,\n                        \"Last Location\": UNKNOWN,\n                        \"LatLng\": rtgps.latitude + \",\" + rtgps.longitude\n                    });\n\n                    latlngList.push([rtgps.latitude, rtgps.longitude]);\n                }\n            }\n\n            intellicarAPI.geocodeService.getAddress(latlngList)\n                .then(function (resp) {\n                    for (var idx in resp) {\n                        selectedView[idx][\"Last Location\"] = resp[idx][1];\n                    }\n                    intellicarAPI.importFileservice.JSONToCSVConvertor(selectedView, \"ViewReport\", true);\n                }, function (resp) {\n                    intellicarAPI.importFileservice.JSONToCSVConvertor(selectedView, \"ViewReport\", true);\n                });\n        };\n\n\n        vm.createMap = function () {\n            var mapCanvas = document.getElementById(\"map\");\n            vm.inMap.mapOptions = {\n                center: new google.maps.LatLng(vm.inMap.center.latitude, vm.inMap.center.longitude),\n                zoom: vm.inMap.zoom\n            };\n            vm.inMap.map = new google.maps.Map(mapCanvas, vm.inMap.mapOptions);\n\n            vm.inMap.map.addListener('click', function () {\n                markerInfowindow.close();\n                fenceInfowindow.close();\n            });\n\n            var searchBox = new google.maps.places.SearchBox(document.getElementById('pac-input'));\n\n            vm.inMap.map.controls[google.maps.ControlPosition.TOP_LEFT]\n                .push(document.getElementById('pac-input'));\n\n            google.maps.event.addListener(searchBox, 'places_changed', function () {\n                var places = searchBox.getPlaces();\n\n                if (places.length == 0) {\n                    return;\n                }\n\n                var bounds = new google.maps.LatLngBounds();\n                places.forEach(function (place) {\n\n                    if (place.geometry.viewport) {\n                        // Only geocodes have viewport.\n                        bounds.union(place.geometry.viewport);\n                    } else {\n                        bounds.extend(place.geometry.location);\n                    }\n                });\n                vm.inMap.map.fitBounds(bounds);\n            });\n\n            vm.lastZoomLevel = vm.inMap.map.getZoom();\n        };\n\n        vm.updateMarkerIcon = function (rtgps) {\n            // vm.markersByPath[rtgps.vehiclepath].icon.fillColor = vm.getMarkerColor(rtgps);\n            // vm.markersByPath[rtgps.vehiclepath].icon.rotation = rtgps.direction;\n            vm.markersByPath[rtgps.vehiclepath].icon = vm.getIcon(rtgps);\n            vm.markersByPath[rtgps.vehiclepath].icon.origin = new google.maps.Point(0, vm.getDirection(rtgps));\n            vm.markersByPath[rtgps.vehiclepath].setIcon(vm.markersByPath[rtgps.vehiclepath].icon);\n        };\n\n\n        vm.onload = function () {\n            $scope.$apply(function () {\n                $compile(document.getElementById(\"markerWindow\"))($scope);\n            });\n        };\n\n\n        vm.fenceWindowLoad = function () {\n            $scope.$apply(function () {\n                $compile(document.getElementById(\"fenceWindow\"))($scope);\n            });\n        };\n\n\n        vm.mobilize = function (mobilityRequest) {\n            vm.inMap.markers.clickedMarker.rtgps.mobilityRequest = mobilityRequest;\n\n            // $log.log(vm.inMap.markers.clickedMarker);\n\n            var immobalizeDialog = $mdDialog.confirm({\n                controller: 'ImmobalizeController',\n                templateUrl: 'app/components/landingpage/dashboard/map/immobalize-dialog.html',\n                clickOutsideToClose: true,\n                escapeToClose: true,\n                locals: {\n                    params: {\n                        clickedMarker: vm.inMap.markers.clickedMarker.rtgps\n                    }\n                }\n            }).ok('Yes').cancel('No');\n\n            $mdDialog.show(immobalizeDialog)\n                .then(function () {\n                    //$log.log(\"Yes Function\");\n                }, function () {\n                    //$log.log(\"No Function\");\n                })\n        };\n\n\n        vm.showHistory = function () {\n            // $log.log(\"show History\");\n            historyService.setData('getHistory', false);\n            historyService.historyMap.traceObj = [];\n            mapService.showHistory();\n        };\n\n\n        function setMapHeight() {\n            // console.log('hel man');\n            wh = $(window).height();\n            // isRendered('.angular-google-map-container', function (el) {\n            //     el.css('height', (wh - header_height) + 'px');\n            // });\n            isRendered('.alert-md-content', function (el) {\n                el.css('height', (wh - header_height) + 'px');\n            });\n\n            isRendered('#map', function (el) {\n                el.css('height', (wh - header_height) + 'px');\n            });\n        }\n\n        $(window).resize(function () {\n            setMapHeight();\n        });\n\n        function isRendered(el, callback) {\n            var isr_interval = setInterval(function () {\n                if ($(el).length > 0) {\n                    callback($(el));\n                    clearInterval(isr_interval);\n                }\n            }, 200)\n        }\n\n\n        var MAP_STYLES = {\n            DARK: 'dark',\n            DEFAULT: 'default'\n        };\n\n\n        vm.triggerMarkerIconChange = function () {\n            if (Math.abs(vm.inMap.map.getZoom() - vm.lastZoomLevel) > 2) {\n                //console.log(\"changing marker icons\");\n                vm.changeMarkerIcon();\n            }\n            vm.markerIconChangeTriggered = false;\n        };\n\n\n        vm.changeMapStyle = function () {\n            var zoom = vm.inMap.map.getZoom();\n            if (zoom < 10) {\n                if (vm.inMap.styleType != MAP_STYLES.DARK) {\n                    vm.inMap.styleType = MAP_STYLES.DARK;\n                    vm.inMap.map.setOptions({styles: mapService.mapStyles[MAP_STYLES.DARK]})\n                }\n            } else {\n                if (vm.inMap.styleType != MAP_STYLES.DEFAULT) {\n                    vm.inMap.styleType = MAP_STYLES.DEFAULT;\n                    vm.inMap.map.setOptions({styles: mapService.mapStyles[MAP_STYLES.DEFAULT]})\n                }\n            }\n        };\n\n        var RED_ICON = 'red';\n        var GREEN_ICON = 'green';\n        var BLUE_ICON = 'blue';\n        var ORANGE_ICON = 'orange';\n\n\n        vm.getMarkerColor = function (rtgps) {\n            // $log.log(rtgps.vehicleno, rtgps.mobilistatus, rtgps.ignitionstatus);\n            if (!rtgps.mobilistatus) {\n                return RED_ICON;\n            } else {\n                if (rtgps.ignitionstatus) {\n                    return GREEN_ICON;\n                } else {\n                    return BLUE_ICON;\n                }\n            }\n            return ORANGE_ICON;\n        };\n\n\n        vm.getIconURL = function (rtgps) {\n            return ['assets/images/markers', 'extralarge', vm.getMarkerColor(rtgps) + '-dot.png'].join('/');\n        };\n\n\n        var SCALE = 16;\n\n\n        vm.zoomChanged = function () {\n            if (vm.checkZoomLevel(1, 8)) {\n                SCALE = 8;\n            } else if (vm.checkZoomLevel(9, 10)) {\n                SCALE = 16;\n            } else if (vm.checkZoomLevel(11, 12)) {\n                SCALE = 24;\n            } else if (vm.checkZoomLevel(13, 14)) {\n                SCALE = 32;\n            } else {\n                SCALE = 40;\n            }\n\n\n            vm.changeMarkerIcon();\n\n            vm.changeMapStyle();\n            //$timeout(vm.changeMarkerIcon, 1000);\n        };\n\n\n        vm.changeMarkerIcon = function () {\n            for (var idx in vm.inMap.markers.markersByPath) {\n                var marker = vm.inMap.markers.markersByPath[idx];\n                var icon = marker.icon;\n                var rtgps = vehicleService.vehiclesByPath[marker.vehiclepath].rtgps;\n\n                icon.size = new google.maps.Size(SCALE, SCALE);\n                icon.origin = new google.maps.Point(0, vm.getDirection(rtgps));\n                icon.scaledSize = new google.maps.Size(SCALE, SCALE * 36);\n                icon.anchor = new google.maps.Point(SCALE / 2, SCALE / 2);\n                marker.setIcon(icon);\n            }\n        };\n\n\n        vm.getDirection = function (rtgps) {\n            if (rtgps.direction == null)\n                return 0;\n\n            var direction = Math.floor(rtgps.direction / 10) * SCALE;\n            if (direction > SCALE * 36)\n                direction = SCALE * 36;\n\n            // console.log(direction);\n            return direction;\n        };\n\n\n        vm.getIcon = function (rtgps) {\n            return {\n                url: vm.getIconURL(rtgps),\n                size: new google.maps.Size(SCALE, SCALE),\n                origin: new google.maps.Point(0, vm.getDirection(rtgps)),\n                scaledSize: new google.maps.Size(SCALE, SCALE * 36),\n                anchor: new google.maps.Point(SCALE / 2, SCALE / 2)\n            };\n        };\n\n\n        vm.checkZoomLevel = function (min, max) {\n            return (vm.inMap.map.getZoom() >= min && vm.inMap.map.getZoom() <= max);\n        };\n\n\n        vm.resizeMap = function () {\n            google.maps.event.trigger(vm.inMap.map, 'resize');\n            return true;\n        };\n\n\n        vm.runStatsAtStart = function () {\n            for (var runtime = 5000; runtime < 15000; runtime += 5000) {\n                $timeout(vm.runStats, runtime);\n            }\n\n            $interval(vm.runStats, 15000);\n        };\n\n\n        vm.init = function () {\n            vm.loadMap();\n            setMapHeight();\n            vm.addListener();\n\n            vm.runStatsAtStart();\n\n            markerInfowindow.addListener('domready', function () {\n                vm.onload();\n            });\n\n            fenceInfowindow.addListener('domready', function () {\n                vm.fenceWindowLoad();\n            });\n\n            $interval(vm.resizeMap, 1000);\n\n            vm.inMap.map.addListener('zoom_changed', function () {\n                vm.zoomhappened = true;\n                //vm.zoomChanged();\n            });\n\n            vm.inMap.map.addListener('tilesloaded', function () {\n                vm.zoomChanged();\n            });\n        };\n\n        $scope.$on('downloadView', vm.downloadView);\n        $scope.$on('fitBounds', vm.fitBounds);\n\n        vm.init();\n    }\n\n\n    function ImmobalizeController($scope, $log, $mdDialog, params, intellicarAPI, vehicleService) {\n        //var vm = this;\n        //$log.log('ImmobalizeController');\n\n\n        $scope.msg = '';\n        $scope.notify = '';\n        $scope.commandSent = false;\n        $scope.vehicleno = params.clickedMarker.vehicleno;\n        $scope.deviceid = params.clickedMarker.deviceid;\n        $scope.mobilityRequest = params.clickedMarker.mobilityRequest;\n\n\n        $scope.cancelImmobalize = function () {\n            $mdDialog.cancel();\n        };\n\n\n        $scope.success = function (resp) {\n            // $log.log(\"success\");\n            // $log.log(resp);\n            $scope.msg = params.clickedMarker.mobilityRequest ? 'Mobilize request sent' : 'Immobilize request sent';\n            $scope.notify = '';\n\n        };\n\n\n        $scope.failure = function (resp) {\n            //$log.log(\"failure\");\n            //$log.log(resp);\n            $scope.msg = 'Request not sent';\n            $scope.notify = '';\n            if (resp.status == 403) {\n                $scope.notify = 'You are not authorized to perform this operation';\n            }\n        };\n\n\n        $scope.executeMobilityCommand = function (resp) {\n            // $log.log(resp);\n            var vehiclepath = {'vehiclepath': params.clickedMarker.vehiclepath};\n\n            if (resp.length > 0) {\n                if (params.clickedMarker.mobilityRequest) {\n                    $scope.mobilize(resp[0], vehiclepath);\n                } else {\n                    $scope.immobilize(resp[0], vehiclepath);\n                }\n            } else {\n                if (params.clickedMarker.mobilityRequest) {\n                    intellicarAPI.vehicleAPIService.mobilize(vehiclepath)\n                        .then($scope.success, $scope.failure);\n                    //$log.log(\"mobilize request sent\");\n                } else {\n                    intellicarAPI.vehicleAPIService.immobilize(vehiclepath)\n                        .then($scope.success, $scope.failure);\n                    //$log.log(\"immobilize request sent\");\n                }\n            }\n        };\n\n\n        $scope.immobilize = function (lastCommand, vehiclepath) {\n            if (!params.clickedMarker.mobilistatus && lastCommand.action == 'immobilize') {\n                $scope.msg = 'Request not sent';\n                $scope.notify = \"Vehicle already in immobilized state\";\n                return;\n            }\n\n            if (lastCommand.action == 'immobilize') {\n                $scope.msg = 'Duplicate request!! Request not sent';\n                $scope.notify = 'There is a pending immobilize request sent by ' +\n                    lastCommand.username + ' at ' + new Date(lastCommand.doneat);\n                //$log.log(\"immobilize request not sent\");\n            } else if (lastCommand.action == 'mobilize') {\n                intellicarAPI.vehicleAPIService.immobilize(vehiclepath)\n                    .then($scope.success, $scope.failure);\n                //$log.log(\"immobilize request sent\");\n            }\n        };\n\n\n        $scope.mobilize = function (lastCommand, vehiclepath) {\n            if (params.clickedMarker.mobilistatus && lastCommand.action == 'mobilize') {\n                $scope.msg = 'Request not sent';\n                $scope.notify = \"Vehicle already in mobilized state\";\n                return;\n            }\n\n            if (lastCommand.action == 'mobilize') {\n                $scope.msg = 'Duplicate request!! Request not sent';\n                $scope.notify = 'There is a pending mobilize request sent by ' +\n                    lastCommand.username + ' at ' + new Date(lastCommand.doneat);\n                //$log.log(\"immobilize request not sent\");\n            } else if (lastCommand.action == 'immobilize') {\n                intellicarAPI.vehicleAPIService.mobilize(vehiclepath)\n                    .then($scope.success, $scope.failure);\n                //$log.log(\"immobilize request sent\");\n            }\n        };\n\n\n        $scope.okImmobilize = function () {\n            $scope.commandSent = true;\n            if (vehicleService.vehiclesByPath[params.clickedMarker.vehiclepath].permissions.indexOf(74) == -1) {\n                $scope.msg = 'Request not sent';\n                $scope.notify = 'You are not authorized to perform this operation';\n                return;\n            }\n\n            var data = {'vehiclepath': params.clickedMarker.vehiclepath};\n            intellicarAPI.vehicleAPIService.getMobilityCommandStatus(data)\n                .then($scope.executeMobilityCommand,\n                    function (resp) {\n                        $log.log(\"getMobilityCommandStatus failure\");\n                        // $log.log(resp);\n                    });\n        };\n\n\n        $scope.init = function () {\n            $scope.commandSent = false;\n            $scope.msg = params.clickedMarker.mobilityRequest ? \"Mobilize ?\" : \"Immobilize ?\";\n        };\n\n        $scope.init();\n\n        var red = '#ff4955';\n        var green = '#27ae60'; //new color code for green #2ad230\n        var blue = '#4673ff';\n        var yellow = '#f3b212';\n        var orange = '#f37813';\n    }\n\n})();\n\n\n// if(str == 'red'){\n//     color = '#e74c3c'\n// }else if(str == 'green'){\n//     color = '#27ae60'\n// }else if(str == 'blue'){\n//     color = '#0000ff'\n// }else if(str == 'yellow'){\n//     color = '#f39c12'\n// }\n\n/**\n * Created by harshas on 14/10/16.\n */\n\n(function () {\n    angular\n        .module('uiplatform')\n        .controller('InnerMapController', InnerMapController);\n\n    function InnerMapController($rootScope, $scope, $log, $mdToast, historyService,\n                                $state, $interval, $filter) {\n        $log.log('InnerMapController');\n        // var vm = this;\n        // var marker = historyService.historyMapObj.dashboardMapObj.clickedMarker;\n        //\n        // //$log.log(marker);\n        // var historyMap = historyService.historyMapObj.historyMap;\n        // var timeIncreaseBy = 240000;\n        // var initialTime;\n        // var tracePoint;\n        // var graphCanvas;\n        // var context;\n        //\n        // $scope.slider = historyService.playerControls.slider;\n        // var animationCount = historyService.playerControls.animationCount;\n        //\n        // $scope.setSliderTime = function () {\n        //     if (!(marker && marker.trace.path.length))\n        //         return;\n        //\n        //     $scope.initialSliderTime = 0;\n        //     $scope.finalSliderTime = (marker.trace.path[marker.trace.path.length - 1].gpstime -\n        //         marker.trace.path[0].gpstime ) / 1000;\n        // };\n        //\n        // $scope.setSliderTime();\n        //\n        // var initialPoint = marker.trace.path[animationCount];\n        // if (initialPoint) {\n        //     $scope.tracePointGpsTime = initialPoint.gpstime;\n        //     $scope.tracePointOdometer = initialPoint.odometer;\n        //     $scope.tracePointSpeed = initialPoint.speed;\n        //     $scope.ignStatus = initialPoint.ignstatus;\n        // }\n        //\n        // $scope.play = true;\n        // $scope.ffrate = historyService.playerControls.ffRate;\n        //\n        // $scope.moveOneStep = function (movementType) {\n        //     if (!marker.trace.path.length)\n        //         return;\n        //\n        //\n        //     var path = marker.trace.path;\n        //\n        //     if (movementType == 'forward') {\n        //         animationCount++;\n        //         if (path.length - 1 < animationCount)\n        //             animationCount = path.length - 1;\n        //\n        //     } else {\n        //         animationCount--;\n        //         if (animationCount <= 0)\n        //             animationCount = 0;\n        //     }\n        //\n        //     $scope.slider = (path[animationCount].gpstime - path[0].gpstime) / 1000\n        //     updateTracePoint(path[animationCount]);\n        //\n        //     initialTime = path[animationCount].gpstime;\n        // };\n        //\n        //\n        // $scope.getSliderTime = function () {\n        //     if (marker && marker.trace.path.length) {\n        //         return new Date(marker.trace.path[0].gpstime + Math.floor($scope.slider) * 1000);\n        //     }\n        // };\n        //\n        //\n        // $scope.onChangeSlider = function () {\n        //     if (marker && !marker.trace.path.length)\n        //         return;\n        //\n        //     $scope.sliderTime = $scope.getSliderTime();\n        //     // $log.log(\"jump slider to \" + $scope.sliderTime);\n        //\n        //     $scope.slider = Math.floor($scope.slider);\n        //\n        //     var len = marker.trace.path.length;\n        //     var path = marker.trace.path;\n        //     var initialSliderTime = path[0].gpstime;\n        //     var clickedSliderTimeLimit = initialSliderTime + $scope.slider * 1000;\n        //\n        //     for (var idx = 0; idx < len; idx++) {\n        //         if (path[idx].gpstime > clickedSliderTimeLimit)\n        //             break;\n        //     }\n        //\n        //     animationCount = idx - 1;\n        //     initialTime = path[animationCount].gpstime;\n        //     updateTracePoint(path[animationCount]);\n        // };\n        //\n        //\n        // var updateTracePoint = function (tracePoint) {\n        //     marker.latitude = tracePoint.latitude;\n        //     marker.longitude = tracePoint.longitude;\n        //\n        //     $scope.tracePointGpsTime = tracePoint.gpstime;\n        //     $scope.tracePointOdometer = tracePoint.odometer;\n        //     $scope.tracePointSpeed = tracePoint.speed;\n        //     $scope.ignStatus = tracePoint.ignstatus;\n        // };\n        //\n        //\n        // $scope.traceRoute = function () {\n        //     //if (marker.trace.path.length && $scope.gotHistory()) {\n        //     if (marker.trace.path.length && $scope.gotHistory()) {\n        //         initialTime = marker.trace.path[animationCount].gpstime;\n        //\n        //         $scope.animateMarker = $interval(function () {\n        //             // $log.log(marker, animationCount);\n        //             initialTime += (timeIncreaseBy * $scope.ffrate);\n        //             while (animationCount < marker.trace.path.length) {\n        //                 // $log.log('in loop ' + animationCount);\n        //                 tracePoint = marker.trace.path[animationCount];\n        //                 if (tracePoint.gpstime <= initialTime) {\n        //\n        //                     updateTracePoint(tracePoint);\n        //\n        //                     $scope.slider = (tracePoint.gpstime - marker.trace.path[0].gpstime) / 1000;\n        //                     $scope.sliderTime = $scope.getSliderTime();\n        //\n        //                     if (animationCount % 10 === 0) {\n        //                         //$log.log(animationCount);\n        //                         moveMapWithMarker(marker);\n        //                     }\n        //                     animationCount++;\n        //                 } else {\n        //                     break;\n        //                 }\n        //             }\n        //\n        //             if (animationCount >= marker.trace.path.length || !$scope.gotHistory()) {\n        //                 $scope.stopAnimation();\n        //                 moveMapWithMarker(marker);\n        //             }\n        //\n        //         }, 200);\n        //     }\n        // };\n        //\n        //\n        // $scope.fastForward = function () {\n        //     if ($scope.ffrate < 128) {\n        //         $scope.ffrate *= 2;\n        //     }\n        // };\n        //\n        //\n        // $scope.goSlow = function () {\n        //     if ($scope.ffrate > (1 / 128)) {\n        //         $scope.ffrate /= 2;\n        //     }\n        // };\n        //\n        //\n        // $scope.getAnimationRate = function () {\n        //     var animationRate = Math.floor((timeIncreaseBy / 1000) * $scope.ffrate);\n        //     $mdToast.show(\n        //         $mdToast.simple()\n        //             .textContent('Playing ' + animationRate + ' secs in 1 sec')\n        //             .position(100, 100)\n        //             .hideDelay(3000)\n        //     );\n        // };\n        //\n        //\n        // $scope.stopAnimation = function () {\n        //     // animationCount = 0;\n        //     stopPlay();\n        //     //$scope.slider = 0;\n        //     if (marker && marker.trace.path.length > 0 && animationCount) {\n        //         animationCount = 0;\n        //         $scope.slider = 0;\n        //         marker.latitude = marker.trace.path[animationCount].latitude;\n        //         marker.longitude = marker.trace.path[animationCount].longitude;\n        //     }\n        // };\n        //\n        //\n        // var stopPlay = function () {\n        //     $interval.cancel($scope.animateMarker);\n        //     $scope.play = true;\n        // };\n        //\n        // $scope.$on('$destroy', function () {\n        //     historyService.playerControls.slider = $scope.slider;\n        //     historyService.playerControls.animationCount = animationCount;\n        //     historyService.playerControls.ffRate = $scope.ffrate;\n        //     //  historyService.setData('getHistory', false);\n        //     $scope.stopAnimation();\n        // });\n        //\n        //\n        // $scope.playAnimation = function () {\n        //     //$log.log('playAnimation');\n        //     $scope.play = false;\n        //     $scope.traceRoute();\n        // };\n        //\n        //\n        // $scope.pauseAnimation = function () {\n        //     //$log.log('pauseAnimation');\n        //     $scope.play = true;\n        //     $scope.pauseInterval();\n        // };\n        //\n        //\n        // $scope.pauseInterval = function () {\n        //     $interval.cancel($scope.animateMarker);\n        //     $scope.animateMarker = undefined;\n        // };\n        //\n        //\n        // $scope.gotHistory = function () {\n        //     return historyService.getData('getHistory');\n        // };\n        //\n        //\n        // $scope.gotHistoryEvent = function () {\n        //     animationCount = 0;\n        //     $scope.slider = 0;\n        //     $scope.ffrate = 1;\n        //     historyService.resetPlayerControls();\n        //\n        //     $scope.setSliderTime();\n        //     var initialPoint = marker.trace.path[0];\n        //     //$log.log(marker);\n        //\n        //     $scope.tracePointGpsTime = initialPoint.gpstime;\n        //     $scope.tracePointOdometer = initialPoint.odometer;\n        //     $scope.tracePointSpeed = initialPoint.speed;\n        //\n        //     marker.latitude = marker.trace.path[0].latitude;\n        //     marker.longitude = marker.trace.path[0].longitude;\n        //\n        //     historyService.historyMapObj.latitude = marker.trace.path[marker.trace.path.length-1].latitude;\n        //     historyService.historyMapObj.longitude = marker.trace.path[marker.trace.path.length-1].longitude;\n        //     drawGraph();\n        // };\n        //\n        //\n        // $rootScope.$on('gotHistoryEvent', function (event, data) {\n        //     // if($state.current.name == 'home.history')\n        //     //     $scope.gotHistoryEvent();\n        // });\n        //\n        // var moveMapWithMarker = function (marker) {\n        //     var map = historyMap.mapControl.getGMap();\n        //     var projection = map.getProjection();\n        //\n        //     var centerPoint = projection.fromLatLngToPoint(map.getCenter());\n        //     var scale = Math.pow(2, map.getZoom());\n        //\n        //     var worldPoint = projection.fromLatLngToPoint(new google.maps.LatLng({\n        //         lat: marker.latitude,\n        //         lng: marker.longitude\n        //     }));\n        //\n        //     var xdiff = Math.abs((worldPoint.x - centerPoint.x) * scale);\n        //\n        //     var ydiff = Math.abs((worldPoint.y - centerPoint.y) * scale);\n        //     var panX = Math.floor((worldPoint.x - centerPoint.x) * scale);\n        //\n        //     var panY = Math.floor((worldPoint.y - centerPoint.y) * scale);\n        //     if (xdiff > 500 || ydiff > 200) {\n        //         map.panBy(panX, panY);\n        //     }\n        // };\n        //\n        // function returnLoopCount(arr, idx) {\n        //     if (arr[idx + 1]) {\n        //         return parseInt((arr[idx + 1].gpstime - arr[idx].gpstime) / 1000 / topDiff);\n        //     }\n        // }\n        //\n        // var topDiff;\n        //\n        // function drawGraph() {\n        //     var pathArray = marker.trace.path;\n        //     var dummyEl;\n        //     var tempPathArray = [];\n        //     var diff = 0;\n        //     var diffMap = {};\n        //\n        //     // creating diff map\n        //     for (var idx = 0; idx < pathArray.length; idx++) {\n        //         if (pathArray[idx + 1]) {\n        //             diff = (pathArray[idx + 1].gpstime - pathArray[idx].gpstime) / 1000;\n        //             if (!(diff in diffMap)) {\n        //                 diffMap[diff] = 1;\n        //             } else {\n        //                 diffMap[diff] = diffMap[diff] + 1;\n        //             }\n        //         }\n        //     }\n        //\n        //     topDiff = 0;\n        //     for (key in diffMap) {\n        //         if (diffMap[key] > topDiff) {\n        //             topDiff = key;\n        //         }\n        //     }\n        //\n        //     // creating new array by adding dummy\n        //     for (var i = 0; i < pathArray.length; i++) {\n        //         returnLoopCount(pathArray, i);\n        //         if (pathArray[i].ignstatus) {\n        //             tempPathArray.push(pathArray[i]);\n        //         } else {\n        //             if (i > 0) {\n        //                 dummyEl = angular.copy(!pathArray[i - 1]);\n        //                 for (var j = 0; j < returnLoopCount(pathArray, i); j++) {\n        //                     tempPathArray.push(dummyEl);\n        //                 }\n        //             } else {\n        //                 tempPathArray.push(!pathArray[0]);\n        //             }\n        //         }\n        //     }\n        //\n        //     pathArray = tempPathArray;\n        //\n        //     var length = pathArray.length;\n        //     var width = parseInt($('#historyGraphCanvas').width());\n        //     var ratio = 1 / (width / length );\n        //     var ratio2 = width / length;\n        //     if ((parseInt(ratio) - ratio) > 0.5) {\n        //         ratio = parseInt(ratio) + 1;\n        //     } else {\n        //         ratio = parseInt(ratio);\n        //     }\n        //     if (ratio == 0) {\n        //         ratio = 1;\n        //     }\n        //     var counter = ratio;\n        //     var counter2 = 0;\n        //     graphCanvas.width = width;\n        //     context.clearRect(0, 0, graphCanvas.width, graphCanvas.height);\n        //\n        //     for (path in pathArray) {\n        //         counter++;\n        //         counter2++;\n        //         if (counter >= ratio) {\n        //             counter = 0;\n        //             renderRectangle(counter2, pathArray[path], ratio2);\n        //         }\n        //     }\n        // }\n        //\n        //\n        // function renderRectangle(point, path, ratio) {\n        //     point = parseInt(point * ratio);\n        //     var width = parseInt(ratio) + 1;\n        //     if (path.ignstatus) {\n        //         context.fillStyle = \"orange\";\n        //         context.fillRect(point, 20, width, 100);\n        //     }\n        //     if (parseInt(path.speed) > 0) {\n        //         context.fillStyle = \"green\";\n        //         context.fillRect(point, 70, width, 50);\n        //     }\n        // }\n        //\n        //\n        // isRendered('historyGraphCanvas', function (el) {\n        //     graphCanvas = el;\n        //     context = graphCanvas.getContext(\"2d\");\n        // });\n        //\n        //\n        // function isRendered(id, callback) {\n        //     var inter = $interval(function () {\n        //         if (document.getElementById(id)) {\n        //             $interval.cancel(inter);\n        //             callback(document.getElementById(id));\n        //         }\n        //     }, 200);\n        // }\n        //\n        //\n        // vm.init = function(){\n        //\n        // };\n        //\n        // vm.init();\n    }\n\n})();\n\n/**\n * Created by Rinas Musthafa on 11/27/2016.\n */\n\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('historyService', historyService);\n\n    function historyService($log, mapService, $rootScope, intellicarAPI, vehicleService, $timeout, myAlarmService, $q) {\n\n        var vm = this;\n\n        vm.historyData = {};\n        vm.listeners = {};\n\n\n        vm.setData = function (key, value) {\n            vm.historyData[key] = value;\n        };\n\n        vm.getData = function (key) {\n            if (key in vm.historyData)\n                return vm.historyData[key];\n            return null;\n        };\n\n\n        vm.historyMap = {\n            map: {},\n            mapOptions: {\n                center: new google.maps.LatLng(mapService.getCenter().latitude, mapService.getCenter().longitude),\n                zoom: mapService.getZoom()\n            },\n            traceObj: [],\n            markersByPath: mapService.inMap.markers.markersByPath,\n            vehiclesByPath: vehicleService.vehiclesByPath,\n            trace: {\n                path: []\n            }\n        };\n\n\n        vm.geoFenceReports = {\n            startTime: '',\n            endTime: '',\n            reportId: '',\n            selectedVehiclesCount: 0,\n            selectedFencesCount: 0,\n\n            filteredItems: [],\n            filteredFenceItems: [],\n\n            myHistoryData: [],\n            jsonReportData: [],\n            reports: [],\n            fenceFilter: '',\n            currRep: []\n        };\n\n\n        vm.setInMapLocation = function (loc) {\n            vm.historyMap.mapOptions.center = angular.copy(loc);\n            var latlng = new google.maps.LatLng(vm.historyMap.mapOptions.center.latitude, vm.historyMap.mapOptions.center.longitude);\n            vm.historyMap.map.setCenter(latlng);\n        };\n\n        vm.addListener = function (key, listener) {\n            if (!(key in vm.listeners)) {\n                vm.listeners[key] = [];\n            }\n\n            if (vm.listeners[key].indexOf(listener) === -1) {\n                vm.listeners[key].push(listener);\n            }\n        };\n\n\n        vm.callListeners = function (msg, key) {\n            if (key in vm.listeners) {\n                for (var idx in vm.listeners[key]) {\n                    vm.listeners[key][idx](msg, key);\n                }\n            }\n        };\n\n        vm.clearMap = function () {\n            if (vm.historyMap.startMarker) {\n                vm.historyMap.startMarker.setMap(null);\n            }\n            if (vm.historyMap.endMarker) {\n                vm.historyMap.endMarker.setMap(null);\n            }\n            if ('setMap' in vm.historyMap.trace) {\n                vm.historyMap.trace.setMap(null);\n            }\n            vm.traceControls.stopMotion();\n            vm.traceControls.current = 0;\n            vm.traceControls.moveTimeline();\n        };\n\n        vm.getHistoryData = function () {\n            vm.clearMap();\n            if (!vm.historyMap.selectedVehicle) {\n                vm.historyMap.errorMsg = \"Please Select Vehicle\";\n                $rootScope.$broadcast('gotHistoryEventFailed');\n                return;\n            }\n\n            if (vm.historyMap.startTime && vm.historyMap.endTime) {\n                if (vm.historyMap.startTime.length && vm.historyMap.endTime.length) {\n\n                    var starttime = moment(vm.historyMap.startTime).unix() * 1000;\n                    var endtime = moment(vm.historyMap.endTime).unix() * 1000;\n\n                    if (endtime - starttime > timeLimit) {\n                        vm.historyMap.errorMsg = \"Maximum time limit is one week.\";\n                        $rootScope.$broadcast('gotHistoryEventFailed');\n                        return;\n                        // endtime = starttime + timeLimit;\n                    }\n\n                    if (endtime <= starttime) {\n                        vm.historyMap.errorMsg = \"End time should be >= Start time\";\n                        $rootScope.$broadcast('gotHistoryEventFailed');\n                        return;\n                    }\n\n                    var body = {\n                        vehicle: {\n                            vehiclepath: vm.historyMap.selectedVehicle.rtgps.deviceid.toString(),\n                            starttime: starttime,\n                            endtime: endtime\n                        }\n                    };\n                    var body2 = {\n                        vehiclepath: [vm.historyMap.selectedVehicle.rtgps.deviceid.toString()],\n                        starttime: starttime,\n                        endtime: endtime\n                    };\n\n                    var gpsDataPromise = intellicarAPI.reportsService.getDeviceLocation(body);\n                    var alarmDataPromise = intellicarAPI.myAlarmService.getAlarmInfo(body2);\n                    var batteryDataPromise = intellicarAPI.reportsService.getBatteryInfo(body);\n\n                    $q.all([gpsDataPromise, alarmDataPromise, batteryDataPromise])\n                        .then(vm.drawTrace, vm.handleGetLocationFailure);\n\n                } else {\n                    vm.historyMap.errorMsg = \"Enter valid start and end time\";\n                    $rootScope.$broadcast('gotHistoryEventFailed');\n                    return;\n                }\n            } else {\n                // $log.log(vm.historyMap.startTime, vm.historyMap.endTime);\n                vm.historyMap.errorMsg = \"Enter valid start and end time.\";\n                $rootScope.$broadcast('gotHistoryEventFailed');\n                return;\n            }\n        };\n\n\n        vm.handleGetLocationFailure = function (resp) {\n            $log.log(\"handleGetLocationFailure\");\n            $log.log(resp);\n            vm.historyMap.trace.path = [];\n        };\n\n        vm.syncBatteryInfo = function (traceData, batteryData) {\n            for (var idx = 0, bidx = 0; idx < traceData.length && bidx < batteryData.length; bidx++) {\n                while (idx < traceData.length && bidx < batteryData.length &&\n                    parseInt(traceData[idx].gpstime) <= parseInt(batteryData[bidx].gpstime)) {\n                    traceData[idx].carbattery = batteryData[bidx].carbattery;\n                    traceData[idx].devbattery = batteryData[bidx].devbattery;\n                    vm.lastBattery = batteryData[bidx];\n                    idx++;\n                }\n            }\n        };\n\n        vm.drawTrace = function (respArray) {\n            vm.setData('getHistory', true);\n            vm.historyMap.errorMsg = '';\n\n            var traceData = [];\n            var alarmData = [];\n            var path = [];\n\n            if (respArray == null) {\n                traceData = vm.historyMap.traceData;\n                alarmData = vm.historyMap.alarmData;\n            } else {\n                if (respArray.length == 3) {\n                    traceData = vm.historyMap.traceData = respArray[0];\n                    alarmData = vm.historyMap.alarmData = respArray[1];\n                    vm.syncBatteryInfo(traceData, respArray[2]);\n                } else {\n                    return;\n                }\n            }\n\n            if (traceData.length == 0) {\n                vm.historyMap.errorMsg = \"No Data\";\n                $rootScope.$broadcast('gotHistoryEventFailed');\n                return;\n            }\n\n            for (var idx in traceData) {\n                var position = traceData[idx];\n                if (position.latitude == null || position.longitude == null || position.latitude == 0 || position.longitude == 0) {\n                    continue;\n                }\n                var latlng = new google.maps.LatLng(position.latitude, position.longitude);\n                latlng.odometer = position.odometer;\n                latlng.heading = position.heading;\n                latlng.numsat = position.numsat;\n                latlng.ignstatus = position.ignstatus;\n                latlng.gpstime = parseInt(position.gpstime);\n                latlng.speed = parseFloat(position.speed.toFixed(2));\n                latlng.carbattery = position.carbattery ? parseFloat(position.carbattery.toFixed(2)) : vm.lastBattery.carbattery;\n                latlng.devbattery = position.devbattery ? parseFloat(position.devbattery.toFixed(2)) : vm.lastBattery.devbattery;\n                path.push(latlng);\n            }\n\n            function compare(a, b) {\n                return a.gpstime - b.gpstime;\n            }\n\n            if (path.length > 0) {\n                path.sort(compare);\n                vm.drawPolylines(path, 0, path.length);\n                vm.historyMap.traceObj = path;\n                if (vm.historyMap.map != null && vm.historyMap.map.setCenter) {\n                    // var latlng = new google.maps.LatLng(path[0].lat(), path[0].lng());\n                    // vm.historyMap.map.setCenter(latlng);\n                    // vm.historyMap.map.setZoom(11);\n                    vm.historyMap.trace.setMap(vm.historyMap.map);\n                    vm.historyMap.startMarker.setMap(vm.historyMap.map);\n                    vm.historyMap.endMarker.setMap(vm.historyMap.map);\n                }\n                $rootScope.$broadcast('gotHistoryEvent', {gotHistoryEvent: true, path: path, alarm: alarmData});\n            } else {\n                vm.historyMap.errorMsg = \"No GPS Signal\";\n                $rootScope.$broadcast('gotHistoryEventFailed');\n            }\n        };\n\n        vm.drawPolylines = function (path, startIdx, endIdx) {\n\n            path.splice(endIdx + 1, path.length - endIdx - 1);\n            path.splice(0, startIdx);\n\n            if (vm.historyMap.startMarker) {\n                vm.historyMap.startMarker.setMap(null);\n            }\n            if (vm.historyMap.endMarker) {\n                vm.historyMap.endMarker.setMap(null);\n            }\n            if ('setMap' in vm.historyMap.trace) {\n                vm.historyMap.trace.setMap(null);\n            }\n\n            vm.historyMap.startMarker = new google.maps.Marker({\n                icon: 'assets/images/markers/red-marker.png',\n                position: path[0]\n            });\n            var lastBeacon = path[path.length - 1];\n            vm.historyMap.endMarker = new google.maps.Marker({\n                position: lastBeacon,\n                label: 'E',\n                title: 'End point'\n            });\n\n            vm.historyMap.trace = new google.maps.Polyline({\n                path: path,\n                icons: [{\n                    icon: {\n                        path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW\n                    },\n                    offset: '100px',\n                    repeat: '100px'\n                }],\n                strokeColor: \"blue\",\n                strokeWeight: 2,\n                strokeOpacity: 1\n            });\n\n            var bounds = new google.maps.LatLngBounds();\n            for (var idx in path) {\n                bounds.extend(path[idx]);\n            }\n            vm.historyMap.map.fitBounds(bounds);\n\n            vm.historyMap.trace.setMap(vm.historyMap.map);\n            vm.historyMap.startMarker.setMap(vm.historyMap.map);\n            vm.historyMap.endMarker.setMap(vm.historyMap.map);\n        }\n\n        vm.getDefaultTime = function (start, end) {\n            var dateFormat = 'YYYY-MM-DD HH:mm';\n\n            if (start && end) {\n                var startTime = moment(start).format(dateFormat);\n                var endTime = moment(end).format(dateFormat);\n            } else {\n                // setting time from 6:00 AM to 7:00 PM\n\n                var startTimeHour = 6;\n                var endTimeHour = 19;\n                if (moment().unix() - moment().hours(startTimeHour).unix() < 0) {\n                    startTimeHour -= 24;\n                    endTimeHour -= 24;\n                }\n\n                var startTime = moment().hours(startTimeHour).minutes(0).seconds(0).milliseconds(0).format(dateFormat);\n                var endTime = moment().hours(endTimeHour).minutes(0).seconds(0).milliseconds(0).format(dateFormat);\n            }\n\n            return {\n                startTime: startTime,\n                endTime: endTime\n            }\n        };\n\n        var MILLISEC = 1000;\n        var hrs24 = 86400 * MILLISEC;\n        var week = hrs24 * 7;\n        var timeLimit = week * 2;\n\n\n        vm.traceControls = {\n            interval: 30000, // 30 seconds\n            timeline: [],\n            expandedGraphs: 'half',\n            playing: false,\n            SPEEDS: [2000, 1000, 500, 250, 125, 62, 31, 15, 8],\n            speed: 4, // normal\n            current: 0,\n            excludedAlarm: ['End_of_Over_speed', 'IGNITION_OFF', 'IGNITION_ON'],\n            togglePlay: function () {\n                vm.traceControls.isPointer();\n                if (vm.traceControls.playing) {\n                    vm.traceControls.stopMotion();\n                } else {\n                    vm.traceControls.setPointerTransition(true);\n                    vm.traceControls.startMotion()\n                }\n            },\n            stepForward: function () {\n                if (vm.traceControls.current < vm.traceControls.timeline.length - 1) {\n                    vm.traceControls.current++;\n                    vm.traceControls.setPointerTransition(false);\n                    vm.traceControls.moveTimeline();\n                }\n            },\n            stepBackward: function () {\n                if (vm.traceControls.current > 0) {\n                    vm.traceControls.current--;\n                    vm.traceControls.setPointerTransition(false);\n                    vm.traceControls.moveTimeline();\n                }\n            },\n            incrementSpeed: function () {\n                if (vm.traceControls.speed < vm.traceControls.SPEEDS.length - 1) {\n                    vm.traceControls.speed++;\n                    if (vm.traceControls.playing) {\n                        vm.traceControls.startMotion();\n                    }\n                    vm.traceControls.setPointerTransition(true);\n                }\n            },\n            decrementSpeed: function () {\n                if (vm.traceControls.speed > 0) {\n                    vm.traceControls.speed--;\n                    if (vm.traceControls.playing) {\n                        vm.traceControls.startMotion();\n                    }\n                    vm.traceControls.setPointerTransition(true);\n                }\n            },\n            engine: {}\n        };\n\n        vm.setTime = function (start, end) {\n            var defaultTime = vm.getDefaultTime(start, end);\n            vm.historyMap.startTime = defaultTime.startTime;\n            vm.historyMap.endTime = defaultTime.endTime;\n\n            vm.geoFenceReports.startTime = defaultTime.startTime;\n            vm.geoFenceReports.endTime = defaultTime.endTime;\n        }\n\n\n        vm.init = function () {\n            vm.setTime();\n        };\n\n        vm.init();\n\n    }\n\n})();\n\n\n/**\n * Created by Rinas Musthafa on 11/27/2016.\n */\n\n(function () {\n    angular\n        .module('uiplatform')\n        .controller('HistoryController', HistoryController)\n        .controller('HistoryTableController', HistoryTableController);\n\n\n    function HistoryController($scope, $window, $interval, historyService, $stateParams, $log, vehicleService, mapService, $timeout,\n                               dialogService, geofenceViewService, $compile) {\n\n        var vm = this;\n\n\n        vm.downloadScreenShot = function () {\n            var mapWidth = $('#history_map').width();\n            var mapHeight = $('#history_map').height();\n            //$('#history_map [style*=transform]')[0]\n            //html2canvas(document.getElementById('history_map'), {\"onrendered\":function(canvas) {\n            var abcd = $('#history_map [style*=transform]');\n            var reqelem = abcd[0];\n            if (reqelem.style['z-index'] == '4') {\n                reqelem = abcd[1];\n            }\n            reqelem = $(reqelem);\n            var ignoreList = [\n                $('#history_map .gmnoprint img')[0],\n                $('#history_map .gm-style .gm-style-pbc .gm-style-pbt'),\n                $('#history_map > div > .gm-style > .gmnoprint > .gm-style-mtc'),\n                $('#history_map > div > .gm-style > .gmnoprint.gm-bundled-control.gm-bundled-control-on-bottom')[0]\n            ]\n\n            for(var idx in ignoreList){\n                $(ignoreList[idx]).attr('data-html2canvas-ignore', 'true');\n            }\n\n            var transform=reqelem.css(\"transform\")\n            var comp=transform.split(\",\") //split up the transform matrix\n            var mapleft=parseFloat(comp[4]) //get left value\n            if (isNaN(mapleft))\n                mapleft = 0;\n            var maptop=parseFloat(comp[5])  //get top value\n            if (isNaN(maptop))\n                maptop = 0;\n            reqelem.css({ //get the map container. not sure if stable\n                \"transform\":\"none\",\n                \"left\":mapleft,\n                \"top\":maptop,\n            });\n            if (abcd.length > 1){\n                $(abcd[1]).css({ //get the map container. not sure if stable\n                    \"transform\":\"none\",\n                    \"left\":mapleft,\n                    \"top\":maptop,\n                });\n            }\n\n            html2canvas($('#history_map'), {\n                \"logging\": true,\n                \"onrendered\":function(canvas) {\n                var mapImage = new Image();\n                    mapImage.src = canvas.toDataURL(\"image/png\")\n\n                // window.open(mapImage);\n\n                    var mapImageObj = {\n                        height: mapHeight,\n                        width: mapWidth,\n                        image: mapImage\n                    }\n\n                    createCanvasForDownload(mapImageObj);\n                reqelem.css({\n                    left:0,\n                    top:0,\n                    \"transform\":transform\n                });\n                    if (abcd.length > 1){\n                        $(abcd[1]).css({ //get the map container. not sure if stable\n                            \"transform\":transform,\n                            \"left\":0,\n                            \"top\":0,\n                        });\n                    }\n            },\n                width : mapWidth,\n                height: mapHeight,\n                useCORS : true\n        });\n        }\n\n        function createCanvasForDownload(mapImage) {\n            var canParent = $('.downloadImage')\n\n            var dCanvas = document.createElement('canvas');\n            dCanvas.id     = \"downloadImageCanvas\";\n            dCanvas.width  = canParent.width();\n            dCanvas.height = canParent.height();\n            canParent.append(dCanvas);\n\n            var ctx = dCanvas.getContext(\"2d\");\n            ctx.fillStyle = '#fff';\n            ctx.fillRect(0, 0, canParent.width(), canParent.height());\n            ctx.drawImage(mapImage.image, 10, 10 , mapImage.width , mapImage.height);\n\n            renderSvgToCanvas({idx: 0, left: 10, top: mapImage.height + 20 , parent: true});\n            renderSvgToCanvas({idx: 1, left: mapImage.width, top: 0, childGraph:true});\n            renderSvgToCanvas({idx: 2, left: mapImage.width, top: 1, childGraph:true});\n            renderSvgToCanvas({idx: 3, left: mapImage.width, top: 2, childGraph:true});\n\n            var texts = [\n                moment.utc(vm.getCurrentPos().gpstime).format('d MMM YY, h:mm:ss A'),\n                'Ignition : ' + (vm.getCurrentPos().ignstatus ? 'On' : 'Off'),\n                'Speed : ' + vm.getCurrentPos().speed + 'kmph',\n                'Odometer : ' + vm.getCurrentPos().odometer + ' km',\n                vm.traceControls.selectedVehicle.rtgps.meta.cartype,\n            ];\n\n            for(var idx in texts){\n                var counter = texts.length - idx;\n                var tLeft = mapImage.width + 40;\n                ctx.font=\"12px gotham\";\n                ctx.fillStyle = '#777';\n                var tTop = canParent.height() - 20 - ( 22 * counter );\n                ctx.fillText(texts[idx], tLeft, tTop);\n            }\n\n            var renderedImgCount = 0;\n            function afterImageRender() {\n                renderedImgCount++;\n                if(renderedImgCount >= 4){\n                    setTimeout(function () {\n                        var a = $(\"<a>\")\n                            .attr(\"href\", dCanvas.toDataURL(\"image/png\"))\n                            .attr(\"download\", \"img.png\")\n                            .appendTo(\"body\");\n                        a[0].click();\n                    },100)\n                }\n            }\n\n            function renderSvgToCanvas(param) {\n\n                var idx = param.idx;\n                var left = param.left;\n                var top = param.top;\n\n                var svg = $(vm.tcGraphs.charts[idx].data.svg);\n                vm.tcGraphs.charts[idx].object.vis.attr(\"transform\", \"translate(0,0) scale(1, 0.69)\");\n                vm.tcGraphs.charts[idx].object.visAxis.attr(\"transform\", \"translate(0,0) scale(1, 0.69)\");\n\n                var svgHeight = svg.height();\n                var svgWidth  = svg.width();\n\n                if(param.childGraph){\n                    svgHeight = svgHeight - ( svgHeight * 0.05 );\n                    left += 20;\n                    svgWidth -= 20;\n                    top = ((svg.height() ) * top ) + 10;\n                }\n\n                if(param.parent){\n                    svgHeight = svgHeight + ( svgHeight * 0.2 );\n                    top = canParent.height() - svgHeight - 20;\n                    svgWidth = mapImage.width;\n                    ctx.strokeStyle = '#777';\n                    ctx.strokeRect(left, top, svgWidth, svgHeight);\n                }\n\n                var data = (new XMLSerializer()).serializeToString(svg[0]);\n                var DOMURL = window.URL || window.webkitURL || window;\n                var img = new Image();\n                var svgBlob = new Blob([data], {type: 'image/svg+xml;charset=utf-8'});\n                var url = DOMURL.createObjectURL(svgBlob);\n                img.onload = function () {\n                    ctx.drawImage(img, left, top, svgWidth, svgHeight);\n                    vm.tcGraphs.charts[idx].object.vis.attr(\"transform\", \"translate(0,0) scale(1, 1)\");\n                    vm.tcGraphs.charts[idx].object.visAxis.attr(\"transform\", \"translate(0,0) scale(1, 1)\");\n                    afterImageRender();\n                };\n                img.src = url;\n            }\n\n        }\n\n        $scope.getMatches = function (str) {\n            var matchArray = [];\n            if (str == null) str = '';\n            var modelString;\n            str = str.toLowerCase();\n            for (var idx in vm.historyMap.markersByPath) {\n                modelString = vehicleService.vehiclesByPath[idx].rtgps.vehicleno;\n                modelString = modelString.toLowerCase();\n                if (modelString.indexOf(str) != -1) {\n                    matchArray.push(vehicleService.vehiclesByPath[idx]);\n                }\n            }\n            return matchArray;\n        }\n\n        dialogService.setTab(0);\n\n        var historyFenceInfowindow = new google.maps.InfoWindow();\n\n\n        function loadMap() {\n            vm.historyMap = historyService.historyMap;\n            vm.historyMap.map = new google.maps.Map(document.getElementById(\"history_map\"),\n                vm.historyMap.mapOptions);\n            vm.historyMap.map.addListener('click', function () {\n\n            });\n            setMapHeight();\n            $interval(vm.resizeMap, 1000);\n        }\n\n        vm.getHistory = function () {\n            vm.gotData = false;\n            vm.loadingData = true;\n            setMapHeight();\n            historyService.setData('getHistory', false);\n            historyService.getHistoryData();\n        };\n\n        function setMapHeight() {\n            if (vm.gotData) {\n                header_height = 160;\n            } else {\n                header_height = 50;\n            }\n            isRendered('.mapDView', function (el1) {\n                var wh = el1.height();\n                isRendered('#history_map', function (el) {\n                    el.css('height', (wh - header_height) + 'px');\n                });\n            });\n        }\n\n\n        $(window).resize(function () {\n            setMapHeight();\n        });\n\n\n        function isRendered(el, callback) {\n            var isr_interval = setInterval(function () {\n                if ($(el).length > 0) {\n                    callback($(el));\n                    clearInterval(isr_interval);\n                }\n            }, 200)\n        }\n\n\n        function setDefaultVehicle() {\n            //$log.log(vm.historyMap.selectedVehicle);\n            if (vm.historyMap.selectedVehicle == null) {\n                // var startInterval = $interval(function () {\n                var keys = Object.keys(vehicleService.vehiclesByPath);\n                if (keys.length > 0) {\n                    // $log.log(vehicleService.vehiclesByPath[keys[0]]);\n                    vm.historyMap.selectedVehicle = vehicleService.vehiclesByPath[keys[0]];\n                    // $interval.cancel(startInterval);\n                }\n                // }, 500 )\n            }\n        }\n\n\n        vm.resizeMap = function () {\n            google.maps.event.trigger(vm.historyMap.map, 'resize');\n            return true;\n        };\n\n\n        vm.traceControls = historyService.traceControls;\n\n        vm.traceControls.jumpToTime = function (time) {\n            if (vm.traceControls.current + time < vm.traceControls.startIndex) {\n                vm.traceControls.current = 0;\n                vm.traceControls.moveTimeline();\n            } else if (vm.traceControls.current + time > vm.traceControls.endIndex) {\n                vm.traceControls.current = vm.traceControls.timeline.length - 1;\n                vm.traceControls.moveTimeline();\n            } else if(vm.traceControls.current + time < vm.traceControls.startIndex){\n                vm.traceControls.current += time;\n                vm.traceControls.moveTimeline();\n            }\n        };\n\n        vm.traceControls.jumpToAlarm = function (opcode) {\n            var idx=vm.traceControls.current + opcode;\n            while( idx < vm.traceControls.endIndex && idx >= 0){\n                if(vm.traceControls.timeline[idx].alarmData){\n                    vm.traceControls.current = idx;\n                    vm.traceControls.moveTimeline();\n                    break;\n                }\n                idx+=opcode;\n            }\n        }\n\n        vm.traceControls.setPointerTransition = function (bool) {\n            if (bool) {\n                vm.traceControls.pointer.css('transition', vm.traceControls.SPEEDS[vm.traceControls.speed] + 'ms linear');\n            } else {\n                vm.traceControls.pointer.css('transition', 0 + 'ms linear');\n            }\n        };\n\n        vm.traceControls.isPointer = function () {\n            if (!vm.traceControls.pointer) {\n                vm.traceControls.pointer = $('.tc_pointer');\n            }\n            vm.traceControls.setPointerTransition(true);\n        };\n\n        vm.traceControls.stopMotion = function () {\n            if (vm.traceControls.playing) {\n                vm.traceControls.playing = false;\n                $interval.cancel(vm.traceControls.engine);\n            }\n        };\n\n        vm.traceControls.startMotion = function () {\n            if (vm.traceControls.timeline.length > vm.traceControls.startIndex && vm.traceControls.current < vm.traceControls.endIndex) {\n                vm.traceControls.panel.clicked = false;\n                vm.traceControls.playing = true;\n                if (vm.traceControls.engine) {\n                    $interval.cancel(vm.traceControls.engine);\n                }\n                vm.traceControls.current++;\n                vm.traceControls.moveTimeline();\n                vm.traceControls.engine = $interval(function () {\n                    if (vm.traceControls.current >= vm.traceControls.endIndex) {\n                        $interval.cancel(vm.traceControls.engine);\n                        vm.traceControls.playing = false;\n                    } else {\n                        vm.traceControls.current++;\n                    }\n                    vm.traceControls.moveTimeline();\n                }, vm.traceControls.SPEEDS[vm.traceControls.speed]);\n            }\n        };\n\n        vm.traceControls.moveTimeline = function () {\n            if (vm.historyMap.startMarker && vm.traceControls.current < vm.traceControls.endIndex) {\n                vm.historyMap.startMarker.setPosition(vm.traceControls.timeline[vm.traceControls.current]);\n                moveMapWithMarker(vm.historyMap.startMarker);\n                vm.traceControls.updateAllTimelines(vm.traceControls.timeline[vm.traceControls.current].gpstime);\n            }\n        };\n\n        vm.traceControls.updateAllTimelines = function (timestamp) {\n            selectTimelineData(timestamp);\n            for (var idx in vm.tcGraphs.charts) {\n                vm.tcGraphs.charts[idx].object.updateLine(timestamp, vm.tcGraphs.charts[idx]);\n            }\n        };\n\n\n        var moveMapWithMarker = function (marker) {\n            if (marker == null)\n                return;\n            var map = vm.historyMap.map;\n            var projection = map.getProjection();\n\n            var centerPoint = projection.fromLatLngToPoint(map.getCenter());\n            var scale = Math.pow(2, map.getZoom());\n\n            var worldPoint = projection.fromLatLngToPoint(marker.getPosition());\n\n            var xdiff = Math.abs((worldPoint.x - centerPoint.x) * scale);\n\n            var ydiff = Math.abs((worldPoint.y - centerPoint.y) * scale);\n            var panX = Math.floor((worldPoint.x - centerPoint.x) * scale);\n\n            var panY = Math.floor((worldPoint.y - centerPoint.y) * scale);\n            if (xdiff > 500 || ydiff > 200) {\n                map.panBy(panX, panY);\n            }\n        };\n\n\n        vm.traceControls.mouseMoveEvent = function (event) {\n            var start = vm.traceControls.timeline.length;\n            var width = vm.traceControls.panel.element.width();\n            var position = vm.traceControls.panel.element.offset().left;\n            if (position < 0)\n                position = 0;\n            vm.traceControls.current = parseInt((event.pageX - position) * start / width) + 1;\n            if (vm.traceControls.current >= vm.traceControls.timeline.length)\n                vm.traceControls.current = vm.traceControls.timeline.length - 1;\n            vm.traceControls.moveTimeline();\n        };\n\n        vm.traceControls.speedThreshold = 3;\n        vm.traceControls.graphBase = 0;\n        vm.traceControls.barHeight = 7;\n        vm.traceControls.barMargin = 1;\n        vm.traceControls.barBase = 0;\n        vm.traceControls.myCanvas = null;\n        vm.traceControls.ctx;\n        vm.traceControls.cw;\n        vm.traceControls.ch;\n        vm.traceControls.wr;\n\n        function drawTimeline() {\n            // creating canvas\n            if (vm.traceControls.myCanvas != null) {\n                vm.traceControls.myCanvas.remove();\n            }\n            vm.traceControls.myCanvas = document.createElement('canvas');\n            vm.traceControls.ctx = vm.traceControls.myCanvas.getContext(\"2d\");\n            vm.traceControls.cw = vm.traceControls.panel.element.width();\n            vm.traceControls.ch = vm.traceControls.panel.element.height();\n            vm.traceControls.wr = vm.traceControls.panel.element.width() / vm.traceControls.timeline.length;\n            vm.traceControls.myCanvas.height = vm.traceControls.ch;\n            vm.traceControls.myCanvas.width = vm.traceControls.cw;\n            vm.traceControls.panel.element.append(vm.traceControls.myCanvas);\n\n            vm.traceControls.ctx.fillStyle = '#f00';\n            vm.traceControls.ctx.fillRect(0, 0, vm.traceControls.timeline.length * vm.traceControls.wr, vm.traceControls.ch);\n            vm.traceControls.ctx.fill();\n            // drawing things\n            vm.traceControls.ctx.clearRect(0, 0, vm.traceControls.timeline.length * vm.traceControls.wr, vm.traceControls.ch);\n            var pre_ignstatus = false;\n            var pre_moving = false;\n            var ign_rect = {};\n            var moving_rect = {};\n            var graphLineLimit = parseInt(vm.traceControls.timeline.length / 1000);\n            graphLineLimit *= 10;\n            if (graphLineLimit < 10)\n                graphLineLimit = 10;\n            var highestSpeed = 0;\n\n            vm.traceControls.ctx.strokeStyle = 'rgba(0,0,0, 0.04)';\n            for (var idx in vm.traceControls.timeline) {\n                if (idx % graphLineLimit == 0) {\n                    vm.traceControls.ctx.moveTo(idx * vm.traceControls.wr, 0);\n                    vm.traceControls.ctx.lineTo(idx * vm.traceControls.wr, vm.traceControls.ch);\n                }\n            }\n            vm.traceControls.ctx.stroke();\n            vm.traceControls.ctx.strokeStyle = 'rgba(0,0,0, 0.1)';\n            for (var idx = 1; idx < 4; idx++) {\n                vm.traceControls.ctx.moveTo(0, idx * vm.traceControls.ch / 4);\n                vm.traceControls.ctx.lineTo(vm.traceControls.cw, idx * vm.traceControls.ch / 4);\n            }\n            vm.traceControls.ctx.stroke();\n            for (var idx in vm.traceControls.timeline) {\n                var speed = vm.traceControls.timeline[idx].speed;\n                if (highestSpeed < speed)\n                    highestSpeed = speed;\n                var ignition = vm.traceControls.timeline[idx].ignstatus;\n                var moving = false;\n                if (vm.traceControls.timeline[idx].speed > vm.traceControls.speedThreshold) {\n                    moving = true;\n                }\n                if (ignition && !pre_ignstatus) {\n                    ign_rect.x = idx;\n                } else if (pre_ignstatus) {\n                    ign_rect.w = idx - ign_rect.x;\n                    vm.traceControls.ctx.fillStyle = '#9DAAFF';\n                    vm.traceControls.ctx.fillRect(ign_rect.x * vm.traceControls.wr, vm.traceControls.barBase, ign_rect.w * vm.traceControls.wr, vm.traceControls.barHeight);\n                    vm.traceControls.ctx.fill();\n                }\n                if (moving && !pre_moving) {\n                    moving_rect.x = idx;\n                } else if (pre_moving) {\n                    moving_rect.w = idx - moving_rect.x;\n                    vm.traceControls.ctx.fillStyle = '#63DB5D';\n                    vm.traceControls.ctx.fillRect(moving_rect.x * vm.traceControls.wr, vm.traceControls.barBase + ((vm.traceControls.barHeight + vm.traceControls.barMargin) ), moving_rect.w * vm.traceControls.wr, vm.traceControls.barHeight);\n                    vm.traceControls.ctx.fill();\n                }\n                pre_ignstatus = ignition;\n                pre_moving = moving;\n                vm.traceControls.ctx.fill();\n            }\n            if (highestSpeed < 60) {\n                highestSpeed = 60;\n            }\n            highestSpeed += 30 + vm.traceControls.graphBase;\n            vm.traceControls.ctx.beginPath();\n            vm.traceControls.ctx.moveTo(0, vm.traceControls.ch - vm.traceControls.graphBase);\n            vm.traceControls.ctx.strokeStyle = '#e74c3c';\n            vm.traceControls.ctx.fillStyle = 'rgba(255, 69, 0, 0.2)';\n            for (var idx in vm.traceControls.timeline) {\n                if (vm.traceControls.timeline[idx].speed < vm.traceControls.speedThreshold)\n                    vm.traceControls.timeline[idx].speed = 0;\n                var speed = vm.traceControls.timeline[idx].speed / highestSpeed * vm.traceControls.ch;\n                vm.traceControls.ctx.lineTo(idx * vm.traceControls.wr, vm.traceControls.ch - speed - vm.traceControls.graphBase);\n            }\n            vm.traceControls.ctx.lineTo(vm.traceControls.timeline.length * vm.traceControls.wr, vm.traceControls.ch - vm.traceControls.graphBase);\n            vm.traceControls.ctx.lineTo(0, vm.traceControls.ch - vm.traceControls.graphBase);\n            vm.traceControls.ctx.closePath();\n            vm.traceControls.ctx.stroke();\n            vm.traceControls.ctx.fill();\n\n            vm.traceControls.alarmArray = [];\n            for (var idx in vm.traceControls.timeline){\n                if(vm.traceControls.timeline[idx].alarmData){\n                    var alarm = vm.traceControls.timeline[idx].alarmData;\n\n                    vm.traceControls.ctx.lineWidth = 3;\n                    vm.traceControls.ctx.beginPath();\n                    vm.traceControls.ctx.strokeStyle = 'rgba(241, 196, 15,1.0)';\n                    // vm.traceControls.ctx.fillStyle = 'rgba(230, 126, 34,0.05)';\n                    vm.traceControls.ctx.arc(idx * vm.traceControls.wr,23,4,0,2*Math.PI);\n                    vm.traceControls.ctx.stroke();\n                    // vm.traceControls.ctx.fill();\n\n                    vm.traceControls.alarmArray.push({\n                        x:idx * vm.traceControls.wr,\n                        y:23,\n                        r:4,\n                        idx:idx\n                    })\n                }\n            }\n\n        }\n\n        function generateTimeline(data) {\n            var path = data.path;\n            var alarmData = data.alarm;\n            var alarmIdx = 0;\n\n            if(path.length < 1){\n                vm.traceControls.timeline = [];\n                return;\n            }\n            // setting and resetting track history  variables\n            vm.traceControls.selectedVehicle = vm.historyMap.selectedVehicle;\n            vm.traceControls.panel.clicked = true;\n\n            var timeline = [];\n            var first = angular.copy(path[0]);\n            var last = angular.copy(path[path.length - 1]);\n            var currentTime = first.gpstime;\n            var currentPathIdx = 0;\n\n            while (1) {\n                if (currentPathIdx >= path.length) {\n                    break;\n                }\n                if (currentTime >= path[currentPathIdx].gpstime) { // regular points\n                    if(alarmData.length > alarmIdx && Math.abs(alarmData[alarmIdx].gpstime - path[currentPathIdx].gpstime) <= 30000 ){\n                        if(vm.traceControls.excludedAlarm.indexOf(alarmData[alarmIdx].alarmreason) == -1){\n                            path[currentPathIdx].alarmData = alarmData[alarmIdx];\n                        }\n                        alarmIdx++;\n                    }\n                    timeline.push(path[currentPathIdx]);\n                    currentTime = path[currentPathIdx].gpstime + vm.traceControls.interval;\n                    currentPathIdx++;\n                } else { // dummy points\n                    var dummy = getDefaultGraphObject(path[currentPathIdx]);\n                    dummy.gpstime = currentTime;\n                    timeline.push(dummy);\n                    currentTime += vm.traceControls.interval;\n                }\n            }\n            vm.traceControls.timeline = timeline;\n\n            vm.traceControls.startIndex = 0;\n            vm.traceControls.endIndex = vm.traceControls.timeline.length;\n        }\n\n        function mouseIsInsideCircle(mouseX,mouseY,cx,cy,radius){\n            var dx=mouseX-cx;\n            var dy=mouseY-cy;\n            return(dx*dx+dy*dy<=radius*radius);\n        }\n\n        function getDefaultGraphObject(point) {\n            var latlng = angular.copy(point);\n            // latlng.id = vm.historyMap.deviceid;\n            // latlng.deviceid = vm.historyMap.deviceid;\n            latlng.gpstime = 0;\n            latlng.speed = 0\n            latlng.odometer = 0\n            latlng.heading = 0\n            latlng.ignstatus = 0\n            return latlng;\n        }\n\n        function getTimelineObjects() {\n            vm.traceControls.pointer = $('.tc_pointer');\n            vm.traceControls.panel = {\n                clicked: true,\n            };\n            vm.traceControls.panel.element = $('.tc_panel');\n            // vm.traceControls.panel.element.mousedown(function (event) {\n            //\n            //         if (!vm.traceControls.playing) {\n            //             if (!vm.traceControls.panel.clicked) {\n            //                 vm.traceControls.panel.clicked = true;\n            //             } else {\n            //                 vm.traceControls.panel.clicked = false;\n            //             }\n            //         }\n            //\n            //         vm.traceControls.pointer.css('transition', 0 + 'ms linear');\n            //         vm.traceControls.mouseMoveEvent(event);\n            // });\n            // $($window).mouseup(function () {\n            //     // vm.traceControls.panel.clicked = false;\n            //     // vm.traceControls.pointer.css('transition', vm.traceControls.SPEEDS[vm.traceControls.speed] + 'ms linear');\n            // });\n            // vm.traceControls.panel.element.mousemove(function (event) {\n            //\n            //     var clickedOnCircle = false;\n            //     // if the mouse is inside the circle\n            //     var cpos = $(vm.traceControls.myCanvas).offset();\n            //     for(idx in vm.traceControls.alarmArray){\n            //         var msp = vm.traceControls.alarmArray[idx];\n            //         if(mouseIsInsideCircle(event.pageX - cpos.left, event.pageY - cpos.top, msp.x, msp.y, msp.r+1)){\n            //             vm.traceControls.panel.clicked = false;\n            //             vm.traceControls.current = msp.idx;\n            //             vm.traceControls.moveTimeline();\n            //             clickedOnCircle = true;\n            //         }\n            //     }\n            //     if(!clickedOnCircle){\n            //         if (vm.traceControls.panel.clicked) {\n            //             vm.traceControls.setPointerTransition(false);\n            //             vm.traceControls.mouseMoveEvent(event);\n            //         }\n            //     }\n            // });\n\n            $($window).keyup(function () {\n                vm.traceControls.setPointerTransition(true);\n            });\n            $($window).keydown(function (event) {\n                vm.traceControls.setPointerTransition(false);\n                if (event.keyCode == 32 || event.keyCode == 31) {\n                    event.preventDefault();\n                    vm.traceControls.togglePlay();\n                }\n                // if(!vm.traceControls.playing ){\n                if (event.keyCode == 37) { // left\n                    if(event.ctrlKey){\n                        vm.traceControls.jumpToAlarm(-1);\n                    }else {\n                        vm.traceControls.jumpToTime(-1);\n                    }\n                } else if (event.keyCode == 38) { // up\n                    vm.traceControls.jumpToTime(10);\n                } else if (event.keyCode == 39) { // right\n                    if(event.ctrlKey){\n                        vm.traceControls.jumpToAlarm(1);\n                    }else{\n                        vm.traceControls.jumpToTime(1);\n                    }\n                } else if (event.keyCode == 40) { // down\n                    vm.traceControls.jumpToTime(-10);\n                }\n                // }\n            });\n        }\n\n        vm.getPopLeft = function () {\n            if(vm.traceControls.myCanvas == null)\n                return 0;\n            return (( vm.traceControls.current * vm.traceControls.wr ) + $(vm.traceControls.myCanvas).offset().left) + 'px';\n        };\n\n        vm.gotHistoryEvent = function (event, data) {\n            vm.gotHistory = historyService.getData('getHistory');\n            vm.gotData = true;\n            vm.loadingData = false;\n            setMapHeight();\n            generateTimeline(data);\n            generateExpandedGraph();\n            // drawTimeline();\n        };\n\n        vm.gotHistoryEventFailed = function () {\n            vm.gotData = false;\n            vm.loadingData = false;\n            vm.gotHistory = historyService.getData('getHistory');\n            setMapHeight();\n        };\n\n        vm.getCurrentPos = function () {\n            return vm.traceControls.timeline[vm.traceControls.current];\n        };\n\n\n        vm.historyFenceWindowLoad = function () {\n            $scope.$apply(function () {\n                $compile(document.getElementById(\"historyFenceWindow\"))($scope);\n            });\n        };\n\n        vm.getMyFencesListener = function (fences) {\n            //$log.log(fences);\n            if (fences.polygons)\n                vm.createPolygons(fences.polygons);\n\n            if (fences.circles)\n                vm.createCircles(fences.circles);\n        };\n\n\n        vm.createPolygons = function (polygons) {\n            var polygonMap = {};\n            for (var idx in polygons) {\n                google.maps.event.addListener(polygons[idx].googleObject, 'click', function (evt) {\n                    vm.selectedFenceObj = this;\n                    historyFenceInfowindow.setContent(document.getElementById(\"history_fence_infowindow\").innerHTML);\n                    historyFenceInfowindow.setPosition(evt.latLng);\n                    historyFenceInfowindow.open(vm.historyMap.map, this);\n                });\n\n                // if (checkFilterString( polygons[idx].control.info.tagdata)){\n                //  polygons[idx].googleObject.setMap( vm.historyMap.map);\n                // }\n            }\n        };\n\n        vm.createCircles = function (circles) {\n            for (var idx in circles) {\n                google.maps.event.addListener(circles[idx].googleObject, 'click', function (evt) {\n                    vm.selectedFenceObj = this;\n                    historyFenceInfowindow.setPosition(evt.latLng);\n                    historyFenceInfowindow.setContent(document.getElementById(\"history_fence_infowindow\").innerHTML);\n                    historyFenceInfowindow.open(vm.historyMap.map, this);\n                });\n                circles[idx].googleObject.setMap(vm.historyMap.map);\n            }\n        };\n\n\n        vm.toggleExpandedGraphs = function (id) {\n            if (id == 'toggle') {\n                if (vm.traceControls.expandedGraphs == 'full') {\n                    vm.traceControls.expandedGraphs = 'half';\n                } else {\n                    vm.traceControls.expandedGraphs = 'full';\n                }\n            } else if (id == 'close') {\n                if (vm.traceControls.expandedGraphs == false) {\n                    vm.traceControls.expandedGraphs = 'half';\n                } else {\n                    vm.traceControls.expandedGraphs = false;\n                }\n            }\n            $timeout(function () {\n                resizeTcGraphs();\n                moveMapWithMarker(vm.historyMap.startMarker);\n            }, 1000);\n        };\n\n        function createExpandedGraph(callback) {\n            // if(vm.traceControls.expDiv == null){\n                var tempInter = $interval(function () {\n                    if ($('.tc_panel, .tcg_item').length > 1) {\n                        $interval.cancel(tempInter);\n                        vm.traceControls.expDiv = $('.tcg_item');\n                        vm.traceControls.expDivParent = $('.tc_panel');\n\n                        for (var idx in vm.tcGraphs.charts) {\n                            if(vm.tcGraphs.charts[idx].data.parent){\n                                vm.tcGraphs.charts[idx].data.height = vm.traceControls.expDivParent.height() ;\n                                vm.tcGraphs.charts[idx].data.width = vm.traceControls.expDivParent.width();\n                            }else{\n                                vm.tcGraphs.charts[idx].data.height = vm.traceControls.expDiv.height() - 30;\n                                vm.tcGraphs.charts[idx].data.width = vm.traceControls.expDiv.width();\n                            }\n                            if (!vm.tcGraphs.charts[idx].data.margin)\n                                vm.tcGraphs.charts[idx].data.margin = vm.tcGraphs.margin;\n\n                            if(vm.tcGraphs.charts[idx].data.parent){ // creating bar chart Data\n\n                                var ignChart = {color:'#3498db', values:[]}\n                                var movingChart = {color:'#2ecc71', values:[]}\n                                vm.tcGraphs.charts[idx].data.barCharts = []\n                                var ign_rect = {};\n                                var moving_rect = {};\n                                var pre_ignstatus = false;\n                                var pre_moving = false;\n                                for (var jdx in vm.traceControls.timeline) {\n                                    var ignition = vm.traceControls.timeline[jdx].ignstatus;\n                                    var moving = false;\n                                    if (vm.traceControls.timeline[jdx].speed > vm.traceControls.speedThreshold) {\n                                        moving = true;\n                                    }\n                                    if (ignition && !pre_ignstatus) {\n                                        ign_rect.x1 = jdx;\n                                    } else if (!ignition && pre_ignstatus) {\n                                        ign_rect.x2 = jdx;\n                                        ignChart.values.push(ign_rect);\n                                        ign_rect = {};\n                                    }\n                                    if (moving && !pre_moving) {\n                                        moving_rect.x1 = jdx;\n                                    } else if (!moving && pre_moving) {\n                                        moving_rect.x2 = jdx;\n                                        movingChart.values.push(moving_rect);\n                                        moving_rect = {};\n                                    }\n                                    pre_ignstatus = ignition;\n                                    pre_moving = moving;\n                                }\n                                vm.tcGraphs.charts[idx].data.barCharts.push(ignChart);\n                                vm.tcGraphs.charts[idx].data.barCharts.push(movingChart);\n                            }\n                            vm.tcGraphs.charts[idx].object = new d3Graph(vm.tcGraphs.charts[idx]);\n                        }\n                        $(window).resize(function () {\n                            resizeTcGraphs();\n                        });\n                        if(callback) callback();\n                    }\n                }, 200);\n            // }else{\n            //     if(callback) callback();\n            // }\n        }\n\n        function resizeTcGraphs() {\n            //\n            // for (var idx in vm.tcGraphs.charts) {\n            //     vm.tcGraphs.charts[idx].object.data.height = vm.traceControls.expDiv.height() - 30;\n            //     vm.tcGraphs.charts[idx].object.data.width = vm.traceControls.expDiv.width();\n            //     vm.tcGraphs.charts[idx].object.draw();\n            // }\n\n        }\n\n        function generateExpandedGraph() {\n            createExpandedGraph(function () {\n                for (var idx in vm.tcGraphs.charts) {\n                    parseToGraphData(vm.tcGraphs.charts[idx], vm.traceControls.timeline);\n                    vm.tcGraphs.charts[idx].object.draw(vm.tcGraphs.charts[idx].graphs);\n                }\n            })\n        }\n\n        function parseToGraphData(object, data) {\n            var graphs = object.graphs;\n            // var genGraphs = [];\n            for (var jdx in graphs) {\n                graphs[jdx].values = [];\n                for (var idx in data) {\n                    graphs[jdx].values.push({\n                        x: data[idx].gpstime,\n                        y: data[idx][graphs[jdx].item]\n                    })\n                }\n                // genGraphs.push(graphs[jdx]);\n            }\n        }\n\n        function selectTimelineData(timestamp) {\n            vm.traceControls.current = binSearch(vm.traceControls.timeline, timestamp, 'gpstime');\n        };\n\n\n        function binSearch(array, element, key) {\n            var start = 0;\n            var end = array.length - 1;\n            var mid = start + parseInt((end - start) / 2);\n\n            var binLooping = true;\n            var stacksize = 0;\n            while (binLooping) {\n                stacksize++;\n                if (array[mid][key] < element) { // Creater\n                    if (mid < array.length - 1)\n                        start = mid + 1;\n                } else if (array[mid][key] > element) {\n                    if (mid > 0)\n                        end = mid - 1;\n                } else if (Math.abs(array[mid][key] - element) <= 30000) {\n                    binLooping = false;\n                    break;\n                }\n                mid = start + parseInt((end - start ) / 2)\n                if (stacksize > 1000) break;\n            }\n            return mid;\n        }\n\n\n        vm.tcGraphs = {\n            mouseclicked : false,\n            margin: {left: 35, right: 35, top: 20, bottom: 20},\n            charts: [\n                {\n                    data: {svg: '#visualisation-parent', parent:true, margin: {left: 0, right: 0, top: 0, bottom: 0},},\n                    graphs: [{color: '#e74c3c', key: 'Speed', type: 'line', item: 'speed', unit: 'kmph', yAxis: 1}],\n                },\n                {\n                    data: {svg: '#visualisation1'},\n                    graphs: [{color: '#e74c3c', key: 'Speed', type: 'line', item: 'speed', unit: 'kmph', yAxis: 1}],\n                },\n                {\n                    data: {svg: '#visualisation2'},\n                    graphs: [{\n                        color: '#3498db',\n                        key: 'Vehicle battery',\n                        type: 'line',\n                        item: 'carbattery',\n                        unit: 'v',\n                        yAxis: 1\n                    },\n                    {\n                        color: '#e74c3c',\n                        key: 'Device battery',\n                        type: 'line',\n                        item: 'devbattery',\n                        unit: 'v',\n                        yAxis: 2\n                    }]\n                },\n                {\n                    data: {svg: '#visualisation3'},\n                    graphs: [{color: '#2ecc71', key: 'GPS Signal', type: 'line', item: 'numsat', unit: '', yAxis: 1}],\n                }\n            ]\n        };\n\n        vm.tcGraphs.zoom = function (animate) {\n            // Do getbounds here\n            historyService.setTime(vm.tcGraphs.zoomStart, vm.tcGraphs.zoomEnd);\n\n            vm.traceControls.startIndex = binSearch(vm.traceControls.timeline, vm.tcGraphs.zoomStart, 'gpstime');\n            vm.traceControls.current = angular.copy(vm.traceControls.startIndex);\n            vm.traceControls.endIndex = binSearch(vm.traceControls.timeline, vm.tcGraphs.zoomEnd, 'gpstime');\n            var tempTimeline = angular.copy(vm.traceControls.timeline);\n            historyService.drawPolylines(tempTimeline, vm.traceControls.startIndex, vm.traceControls.endIndex);\n            if(!animate){\n                for(var idx in vm.tcGraphs.charts){\n                    vm.tcGraphs.charts[idx].object.xScale.domain([new Date(vm.tcGraphs.zoomStart), new Date(vm.tcGraphs.zoomEnd)]);\n                    vm.tcGraphs.charts[idx].object.redraw();\n                }\n            }else{\n                var zStartInit = animate.x1;\n                var zEndInit = animate.x2;\n                var zStartTemp = vm.tcGraphs.zoomStart - zStartInit;\n                var zEndTemp = vm.tcGraphs.zoomEnd - zEndInit;\n                $interval(function () {\n                    zStartInit += zStartTemp / 4;\n                    zEndInit += zEndTemp / 4;\n                    for(var idx in vm.tcGraphs.charts){\n                        vm.tcGraphs.charts[idx].object.xScale.domain([new Date(zStartInit), new Date(zEndInit)]);\n                        vm.tcGraphs.charts[idx].object.redraw();\n                        // vm.tcGraphs.charts[idx].object.vis.attr('transform', 'translate(100, 0)');\n                    }\n                },10, 4);\n                // vm.tcGraphs.charts[idx].object.vis.attr('transform', 'translate(100, 0)');\n            }\n        }\n\n        vm.tcGraphs.seekGraph = function (key) {\n            if(vm.tcGraphs.zoomEnd){\n                var parentGraph = vm.tcGraphs.charts[0].object;\n                var zMax = parentGraph.axisScale.xh;\n                var zMin = parentGraph.axisScale.xl;\n                var zoomAmount = (vm.tcGraphs.zoomEnd - vm.tcGraphs.zoomStart) / 2;\n                if(key == 1){// rightButton\n                    if(vm.tcGraphs.zoomEnd + zoomAmount > zMax){\n                        zoomAmount = zMax - vm.tcGraphs.zoomEnd;\n                    }\n                }else{ // left button\n                    if(vm.tcGraphs.zoomStart - zoomAmount < zMin){\n                        zoomAmount = vm.tcGraphs.zoomStart - zMin;\n                    }\n                    zoomAmount *= -1;\n                }\n                zoomAmount = parseInt(zoomAmount);\n                var anim = { x1 : vm.tcGraphs.zoomStart, x2 : vm.tcGraphs.zoomEnd}\n                vm.tcGraphs.zoomEnd += zoomAmount;\n                vm.tcGraphs.zoomStart += zoomAmount;\n\n                var zStartTemp = vm.tcGraphs.zoomStart - anim.x1;\n                var zEndTemp = vm.tcGraphs.zoomEnd - anim.x2;\n                if(zStartTemp < 3000 && zEndTemp < 3000 && key == 1 || zStartTemp > -3000 && zEndTemp > -3000 && key < 1){\n                    return;\n                }\n\n                vm.tcGraphs.zoom(anim);\n            }\n        }\n\n        vm.tcGraphs.restoreGraph = function () {\n            historyService.setTime(vm.tcGraphs.charts[0].object.axisScale.xl, vm.tcGraphs.charts[0].object.axisScale.xh);\n            vm.tcGraphs.zoomEnd = null;\n            vm.traceControls.startIndex = 0;\n            vm.traceControls.endIndex = vm.traceControls.timeline.length;\n            historyService.drawPolylines(vm.traceControls.timeline, vm.traceControls.startIndex, vm.traceControls.endIndex);\n            for(var idx in vm.tcGraphs.charts){\n                vm.tcGraphs.charts[idx].object.xScale.domain([new Date(vm.tcGraphs.charts[idx].object.axisScale.xl), new Date(vm.tcGraphs.charts[idx].object.axisScale.xh)]);\n                vm.tcGraphs.charts[idx].object.redraw();\n            }\n        }\n\n        function d3Graph(param) {\n            var self = this;\n            self.data = param.data;\n            self.chart = param;\n\n            self.visP = d3.select(self.data.svg)\n            //responsive SVG needs these 2 attributes and no width and height attr\n                .attr(\"preserveAspectRatio\", \"xMinYMin meet\")\n                .attr(\"viewBox\", \"0 0 \" + self.data.width + \" \" + (self.data.height - 30))\n                //class to make it responsive\n                .classed(\"svg-content-responsive\", true)\n                .on(\"contextmenu\", function(d) { d3.event.preventDefault(); })\n                .on(\"mousemove\", mouseHoverEvent)\n                .on(\"mousedown\", graphStartDrag)\n                .on(\"mouseup\", graphEndDrag)\n\n\n            function graphStartDrag() {\n                self.mouseX = d3.mouse(this)[0];\n                if(d3.event.button == 0){\n                    if(!vm.tcGraphs.mouseclicked) {\n                        if (self.mouseX > self.data.margin.left && self.mouseX < self.data.width - self.data.margin.right) {\n                            vm.tcGraphs.mouseclicked = true;\n                            vm.tcGraphs.zoomStartX = angular.copy(self.mouseX);\n                            vm.tcGraphs.zoomStartTemp = parseInt(self.xScale.invert(self.mouseX));\n\n                            self.selectRect\n                                .attr('x', vm.tcGraphs.zoomStartX)\n                                .attr('y', self.data.margin.top)\n                                .attr('width', 0)\n                                .attr('fill', 'rgba(255,0,0,0.2)')\n                                .attr('height', self.data.height - self.data.margin.top - self.data.margin.bottom)\n                        }\n                    }\n                }else if(d3.event.button == 2){\n                    d3.event.preventDefault();\n                    vm.tcGraphs.restoreGraph();\n                }\n            }\n\n            function graphEndDrag() {\n                if(d3.event.button == 0){\n                    if(vm.tcGraphs.mouseclicked){\n                        vm.tcGraphs.mouseclicked = false;\n                        self.mouseX = d3.mouse(this)[0];\n                        vm.tcGraphs.zoomEndTemp = parseInt(self.xScale.invert(self.mouseX));\n                        if(Math.abs(vm.tcGraphs.zoomEndTemp - vm.tcGraphs.zoomStartTemp) > 1000 * 60 * 2){\n                            vm.tcGraphs.zoomStart = angular.copy(vm.tcGraphs.zoomStartTemp);\n                            vm.tcGraphs.zoomEnd = angular.copy(vm.tcGraphs.zoomEndTemp);\n                            if(vm.tcGraphs.zoomEnd < vm.tcGraphs.zoomStart){\n                                var tempStartZoom = vm.tcGraphs.zoomStart;\n                                vm.tcGraphs.zoomStart = angular.copy(vm.tcGraphs.zoomEnd);\n                                vm.tcGraphs.zoomEnd = tempStartZoom;\n                            }\n                            vm.tcGraphs.zoom();\n                        }else{\n                            if(vm.traceControls.playing){\n                                var timestamp = parseInt(self.xScale.invert(self.mouseX));\n                                vm.traceControls.updateAllTimelines(timestamp);\n                                vm.traceControls.moveTimeline();\n                            }else{\n                                vm.traceControls.panel.clicked = !vm.traceControls.panel.clicked;\n                            }\n                            self.selectRect\n                                .attr('y',-1000)\n                            self.timePopRight\n                                .attr(\"transform\", \"translate(0,-1000)\")\n                        }\n                    }\n                }\n            }\n\n            function mouseHoverEvent() {\n                self.mouseX = d3.mouse(this)[0];\n                self.mouseY = d3.mouse(this)[1];\n                if(!vm.tcGraphs.mouseclicked){\n                    if (self.xScale != null && self.mouseX >= self.data.margin.left && self.mouseX <= (self.data.width - self.data.margin.right)\n                        && self.mouseY >= self.data.margin.top && self.mouseY <= (self.data.height - self.data.margin.bottom )) {\n                        if(vm.traceControls.panel.clicked){\n                            var timestamp = parseInt(self.xScale.invert(self.mouseX));\n                            vm.traceControls.updateAllTimelines(timestamp);\n                            vm.traceControls.moveTimeline();\n                        }\n                    }\n                }else{\n                    var tempMouseX = angular.copy(self.mouseX);\n                    if(tempMouseX < self.data.margin.left)\n                        tempMouseX = self.data.margin.left;\n\n                    if(tempMouseX > self.data.width - self.data.margin.right)\n                        tempMouseX = self.data.width - self.data.margin.right;\n\n                    var selectRectWidth = tempMouseX - vm.tcGraphs.zoomStartX;\n                    if(vm.tcGraphs.zoomStartX > tempMouseX){\n                        selectRectWidth = vm.tcGraphs.zoomStartX - tempMouseX;\n                        self.selectRect.attr('x',tempMouseX);\n                    }\n                    self.selectRect.attr('width',selectRectWidth);\n\n                    var focusRecMargin = 0;\n                    var focusTime = parseInt(self.xScale.invert(self.mouseX));\n                    var focusStr = moment(focusTime).format('DD MMM YY, h:mm:ss A');\n                    var rectWidth = ( focusStr.length * 9) + 5;\n\n                    if (self.mouseX + rectWidth + 10 > self.data.width - self.data.margin.right) {\n                        focusRecMargin = rectWidth + 15;\n                    }\n\n                    var trasnX = self.mouseX - focusRecMargin + 8;\n                    if(trasnX < 10 + self.data.margin.left){\n                        trasnX = 10 + self.data.margin.left;\n                    }\n\n                    self.timePopRight\n                        .attr(\"transform\", \"translate(\" + trasnX + \",\" + 30 + \")\")\n                        .select(\"text\").text(focusStr);\n                    self.timePopRight\n                        .select(\"rect\")\n                        .attr(\"width\", rectWidth)\n                }\n            }\n\n            function zoomGraphMouseEvent() {\n                if(vm.tcGraphs.mouseclicked) {\n                    vm.tcGraphs.mouseclicked = false;\n                    vm.tcGraphs.zoomEnd = parseInt(self.xScale.invert(self.mouseX));\n                    if (Math.abs(vm.tcGraphs.zoomEnd - vm.tcGraphs.zoomStart) > 1000 * 60 * 2) {\n                        if (vm.tcGraphs.zoomEnd < vm.tcGraphs.zoomStart) {\n                            var tempStartZoon = vm.tcGraphs.zoomStart;\n                            vm.tcGraphs.zoomStart = vm.tcGraphs.zoomEnd;\n                            vm.tcGraphs.zoomEnd = tempStartZoon;\n                        }\n                        vm.tcGraphs.zoom();\n                    }\n                    self.selectRect\n                        .attr('y',-1000)\n                    self.timePopRight\n                        .attr(\"transform\", \"translate(0,-1000)\")\n                }\n            }\n\n            self.updateLine = function (x, chart) {\n                if(!self.xScale)\n                    return;\n                var timelineObject = vm.traceControls.timeline[vm.traceControls.current];\n                self.mouseX = self.xScale(x);\n                self.focusLine\n                    .attr('x1', self.mouseX)\n                    .attr('x2', self.mouseX);\n\n                for (var idx in chart.graphs) {\n                    var key = chart.graphs[idx].item;\n                    if (chart.graphs[idx].yAxis == 1) {\n                        self.graphY = self.y1Scale(timelineObject[key]);\n                    } else {\n                        self.graphY = self.y2Scale(timelineObject[key]);\n                    }\n                    self.focusCircle[idx]\n                        .attr(\"cx\", self.mouseX)\n                        .attr(\"cy\", self.graphY);\n                    var focusRecMargin = 0;\n                    var focusStr = timelineObject[key] + ' ' + chart.graphs[idx].unit;\n                    var rectWidth = ( focusStr.length * 7) + 5;\n\n                    if (self.mouseX + rectWidth + 10 > self.data.width - self.data.margin.right) {\n                        focusRecMargin = rectWidth + 15;\n                    }\n\n                    self.focusText[idx].attr(\"transform\", \"translate(\" + (self.mouseX - focusRecMargin + 8) + \",\" + 30 + \")\")\n                        .select(\"text\").text(focusStr);\n                    self.focusText[idx]\n                        .select(\"rect\")\n                        .attr(\"width\", rectWidth)\n                }\n            };\n\n            self.resize = function (data) {\n                self.data.height = data.height;\n                self.data.width = data.width;\n                self.draw();\n            };\n\n            self.draw = function(graphs) {\n                if(graphs) self.data.graph = graphs;\n                getAxisScale();\n                draw();\n            }\n\n            self.redraw = function () {\n                draw();\n            }\n\n            function draw() {\n                d3.selectAll(self.data.svg+\" > *\").remove();\n\n                self.clipRect = self.visP.append(\"clipPath\")    // define a clip path\n                    .attr('x',0)\n                    .attr('y',0)\n                    .attr(\"id\", \"main-clip\"+self.data.svg) // give the clipPath an ID\n                    .append(\"rect\")\n                    .attr(\"x\", self.data.margin.left)\n                    .attr(\"y\", self.data.margin.top)\n                    .attr(\"width\", self.data.width - self.data.margin.left - self.data.margin.right)\n                    .attr(\"height\", self.data.height)\n\n                self.vis = self.visP\n                    .append(\"svg:g\")\n                    .attr('class', 'visTrans')\n                    .attr(\"clip-path\", \"url(#main-clip\"+self.data.svg+\")\") // clip the rectangle\n                    .attr(\"transform\", \"translate(0,0) \");\n\n                self.visAxis = self.visP\n                    .append(\"svg:g\")\n                    .attr('class', 'visTrans')\n                    .attr(\"transform\", \"translate(0,0) \");\n\n                self.xAxis = d3.axisBottom()\n                    .scale(self.xScale)\n                    .ticks(5)\n                    .tickFormat(function(d) {\n                        return d3.timeFormat('%H:%M')(new Date(d))\n                    })\n\n                self.y1Axis = d3.axisLeft()\n                    .scale(self.y1Scale)\n                    .ticks(6)\n\n                self.y2Axis = d3.axisRight()\n                    .scale(self.y2Scale)\n                    .ticks(6)\n\n                self.visAxis.append(\"svg:g\")\n                    // .attr(\"class\", \"axis\")\n                    .attr(\"transform\", \"translate(0,\" + (self.data.height - self.data.margin.bottom) + \")\")\n                    .attr('font-size','80%')\n                    .attr('font-family','gotham')\n                    .attr('shape-rendering','crispEdges')\n                    .call(self.xAxis)\n\n                if(!self.chart.data.parent){\n                    self.visAxis.append(\"svg:g\")\n                        // .attr(\"class\", \"axis\")\n                        .attr('font-size','80%')\n                        .attr('font-family','gotham')\n                        .attr('shape-rendering','crispEdges')\n                        .attr(\"transform\", \"translate(\" + (self.data.margin.left) + \",0)\")\n                        .call(self.y1Axis);\n\n                    self.visAxis.append(\"svg:g\")\n                        // .attr(\"class\", \"axis\")\n                        .attr('font-size','80%')\n                        .attr('font-family','gotham')\n                        .attr('shape-rendering','crispEdges')\n                        .attr(\"transform\", \"translate(\" + (self.data.width - self.data.margin.right) + \",0)\")\n                        .call(self.y2Axis);\n                }\n\n                self.lineGenY1 = d3.line().x(function (d) {\n                    return self.xScale(d.x);\n                }).y(function (d) {\n                    return self.y1Scale(d.y);\n                });\n                self.lineGenY2 = d3.line().x(function (d) {\n                    return self.xScale(d.x);\n                }).y(function (d) {\n                    return self.y2Scale(d.y);\n                });\n                for (var idx in self.data.graph) {\n                    self.vis.append('svg:path')\n                        .attr('d', getYlineGen(self.data.graph[idx].yAxis, self.data.graph[idx].values))\n                        .attr('stroke', self.data.graph[idx].color)\n                        .attr('stroke-width', self.data.graph[idx].strokeWidth)\n                        .attr('fill', 'none');\n                }\n\n\n                for(var idx in self.data.barCharts){\n                    for(jdx in self.data.barCharts[idx].values){\n                        var startTime = vm.traceControls.timeline[self.data.barCharts[idx].values[jdx].x1].gpstime\n                        var endTime = vm.traceControls.timeline[self.data.barCharts[idx].values[jdx].x2].gpstime;\n                        var rectX = self.xScale(startTime);\n                        var rectWidth = self.xScale(endTime) - rectX ;\n                        self.vis.append(\"rect\")\n                            .attr(\"x\", rectX)\n                            .attr(\"width\", rectWidth)\n                            .attr(\"height\", 5)\n                            .attr(\"clip-path\", \"url(#main-clip\"+self.data.svg+\")\") // clip the rectangle\n                            .attr('fill', self.data.barCharts[idx].color)\n                            .attr(\"y\", 2 + (idx * 7));\n                    }\n                }\n\n\n                self.focusCircle = [];\n                self.focusText = [];\n                self.nameText = [];\n                for (var idx in self.chart.graphs) {\n                    self.focusCircle[idx] = self.vis.append(\"circle\")\n                        .attr('class', 'click-circle')\n                        .attr(\"cx\", -1000)\n                        .attr(\"cy\", -1000)\n                        .attr(\"fill\", self.chart.graphs[idx].color)\n                        .attr(\"r\", 5);\n                    if(!self.data.parent) {\n                        self.nameText[idx] = self.vis.append(\"text\")\n                            .attr(\"x\", self.data.margin.left + 10)\n                            .attr('fill', self.chart.graphs[idx].color)\n                            .attr('font-size','70%')\n                            .attr('font-family','gotham')\n                            // .attr('class', 'nameText')\n                            .attr(\"y\", self.data.margin.top + 10 + (idx * 15))\n                            .text(self.chart.graphs[idx].key);\n                    }\n                    self.focusText[idx] = self.vis.append(\"g\")\n                    self.focusText[idx].append(\"rect\")\n                        .attr(\"width\", 10)\n                        .attr(\"height\", 16)\n                        .attr('opacity', '0.9')\n                        .attr('fill', '#f5f5f5')\n                        .attr('stroke-width', 1)\n                        .attr('stroke', '#ccc')\n                        .attr('font-family','gotham')\n                        // .attr('class', 'focusRect')\n                        .attr(\"y\", -8 + (idx * 20));\n\n                    self.focusText[idx].append(\"text\")\n                        .attr(\"x\", 4)\n                        .attr('fill', self.chart.graphs[idx].color)\n                        .attr('font-size','70%')\n                        .attr('font-family','gotham')\n                        // .attr('class', 'focusText')\n                        .attr(\"y\", 4 + (idx * 20));\n                }\n                self.focusLine = self.vis.append(\"line\")\n                    // .attr('class', 'focus-line')\n                    .attr('stroke', '#000')\n                    .attr('opacity', 0.5)\n                    .attr(\"x1\", -1000)\n                    .attr(\"x2\", -1000)\n                    .attr(\"y1\", self.data.margin.top)\n                    .attr(\"y2\", (self.data.height - self.data.margin.top))\n                    .attr(\"stroke-width\", 1)\n                    .attr(\"stroke\", \"#ccc\");\n\n\n                self.selectRect = self.vis.append('rect')\n                    .attr('x', vm.tcGraphs.zoomStartX)\n                    .attr('y', -1000)\n                    .attr('width', 0)\n                    .attr('fill', 'rgba(255,0,0,0.2)')\n                    .attr('height', self.data.height - self.data.margin.top - self.data.margin.bottom)\n\n\n                self.timePopRight = self.vis.append(\"g\")\n                    .attr(\"transform\", \"translate(0,-1000)\")\n                self.timePopRight.append(\"rect\")\n                    .attr(\"width\", 10)\n                    .attr(\"height\", 22)\n                    .attr('fill', '#f5f5f5')\n                    .attr('stroke-width', 1)\n                    .attr('stroke', '#ccc')\n                    .attr('font-size','70%')\n                    .attr('font-family','gotham')\n                    // .attr('class', 'focusRect')\n                    .attr(\"y\", 10);\n                self.timePopRight.append(\"text\")\n                    .attr(\"x\", 8)\n                    .attr('fill', '#444')\n                    .attr('font-size','120%')\n                    .attr('font-family','gotham')\n                    // .attr('class', 'popText')\n                    .attr(\"y\", 28);\n\n\n\n                self.vis.append(\"rect\")\n                    .attr(\"x\", self.data.margin.left)\n                    .attr(\"y\", self.data.margin.top)\n                    .attr(\"fill\", 'transparent')\n                    .attr(\"width\", self.data.width - self.data.margin.left - self.data.margin.right)\n                    .attr(\"height\", self.data.height -  self.data.margin.top -  self.data.margin.bottom - 1 )\n                    .on(\"mouseleave\", function () {\n                        zoomGraphMouseEvent()\n                    })\n\n\n                self.updateLine(vm.traceControls.timeline[vm.traceControls.current].gpstime, self.chart)\n            };\n\n\n            function getYlineGen(y, val) {\n                if (y == 1) {\n                    return self.lineGenY1(val);\n                } else if (y == 2) {\n                    return self.lineGenY2(val);\n                }\n            }\n\n            function getAxisScale() {\n                self.axisScale = {y1: {}, y2: {}}\n                for (var idx in self.data.graph) {\n                    var dataItem = self.data.graph[idx];\n                    if (dataItem.yAxis == null) {\n                        dataItem.yAxis = 1;\n                    }\n\n                    for (var jdx in dataItem.values) {\n                        if (dataItem.values[jdx].x < self.axisScale.xl || self.axisScale.xl == null) self.axisScale.xl = dataItem.values[jdx].x;\n                        if (dataItem.values[jdx].x > self.axisScale.xh || self.axisScale.xh == null) self.axisScale.xh = dataItem.values[jdx].x;\n\n                        if (dataItem.values[jdx].y < self.axisScale['y' + dataItem.yAxis].yl || self.axisScale['y' + dataItem.yAxis].yl == null) self.axisScale['y' + dataItem.yAxis].yl = dataItem.values[jdx].y;\n                        if (dataItem.values[jdx].y > self.axisScale['y' + dataItem.yAxis].yh || self.axisScale['y' + dataItem.yAxis].yh == null) self.axisScale['y' + dataItem.yAxis].yh = dataItem.values[jdx].y;\n                    }\n                }\n\n                self.axisScale.xh += 0;\n                self.axisScale.y1.yh = parseInt(self.axisScale.y1.yh + self.axisScale.y1.yh * 0.6);\n                self.axisScale.y2.yh = parseInt(self.axisScale.y2.yh + self.axisScale.y1.yh * 0.6);\n                // if(self.axisScale.xl > 0 && self.axisScale.xl < 20){self.axisScale.xh = 0; }\n                // if(self.axisScale.y1.yl > 0 && self.axisScale.y1.yl < 20 ){self.axisScale.y1.yl = 0; }\n                // if(self.axisScale.y2.yl > 0 && self.axisScale.y2.yl < 20 ){self.axisScale.y2.yl = 0; }\n                self.axisScale.y1.yl = 0;\n                self.axisScale.y2.yl = 0;\n\n                self.xScale = d3.scaleLinear().range([self.data.margin.left, self.data.width - self.data.margin.right]).domain([new Date(self.axisScale.xl), new Date(self.axisScale.xh)]);\n                self.y1Scale = d3.scaleLinear().range([self.data.height - self.data.margin.top, self.data.margin.bottom]).domain([self.axisScale.y1.yl, self.axisScale.y1.yh]);\n                self.y2Scale = d3.scaleLinear().range([self.data.height - self.data.margin.top, self.data.margin.bottom]).domain([self.axisScale.y2.yl, self.axisScale.y2.yh]);\n\n                // self.xScale.ticks(5);\n                //     tickFormat = self.xScale.tickFormat(5, \"+%\");\n                //\n                // ticks.map(tickFormat); // [\"-100%\", \"-50%\", \"+0%\", \"+50%\", \"+100%\"]\n            }\n\n        }\n\n\n        vm.init = function () {\n            loadMap();\n            getTimelineObjects();\n            createExpandedGraph();\n            $scope.$on('gotHistoryEvent', vm.gotHistoryEvent);\n            $scope.$on('gotHistoryEventFailed', vm.gotHistoryEventFailed);\n\n            vm.gotHistory = historyService.getData('getHistory');\n            var tempSelectedvehicles = $scope.getMatches(mapService.filterStr);\n            if(tempSelectedvehicles.length > 0){\n                vm.historyMap.selectedVehicle = tempSelectedvehicles[0];\n            }\n\n            if (vm.gotHistory) {\n                historyService.drawTrace();\n                //generateTimeline(vm.historyMap.traceObj);\n                //generateExpandedGraph();\n                //drawTimeline();\n            } else {\n                if ($stateParams && $stateParams.mapObj && $stateParams.mapObj.clickedMarker)\n                    vm.historyMap.selectedVehicle = $stateParams.mapObj.clickedMarker;\n                else\n                    setDefaultVehicle();\n            }\n\n\n            setMapHeight();\n\n            geofenceViewService.addListener('getMyFences', vm.getMyFencesListener);\n            historyService.addListener('loadMap', loadMap);\n\n            historyFenceInfowindow.addListener('domready', function () {\n                vm.historyFenceWindowLoad();\n            });\n\n\n        };\n\n        vm.init();\n    }\n\n\n    function HistoryTableController($rootScope, $scope, $log, dialogService, intellicarAPI, historyService, $q) {\n\n        $log.log('HistoryTableController');\n\n        var vm = this;\n        dialogService.setTab(1);\n\n        var dateFormat = 'DD-MM-YYYY HH:mm';\n        var historyData = [];\n        var tableContainer = document.getElementById('geo-table');\n        var table, data;\n\n        vm.jsonHistoryData = [];\n        vm.historyMap = historyService.historyMap;\n        vm.multiSelect = vm.historyMap.multiSelect;\n        vm.disableDownload = true;\n        vm.showLoading = false;\n        vm.convertLatLngToAddr = true;\n\n        $scope.getHistory = function () {\n            historyService.setData('getHistory', false);\n            historyData = [];\n            vm.jsonHistoryData = [];\n            vm.disableDownload = true;\n            vm.showLoading = true;\n            if (table)\n                table.clearChart(tableContainer);\n            historyService.getHistoryData();\n        };\n\n        $rootScope.$on('gotHistoryEvent', function (event, data) {\n            if (tableContainer == null) return;\n            vm.showTableData();\n        });\n\n        vm.getAddress = function (latlng, className) {\n            if (typeof(latlng) == 'string') {\n                latlng = [latlng.split(',')];\n                vm.myclass = className;\n            }\n\n            // var body = {\n            //     data: latlng\n            // };\n\n            return intellicarAPI.geocodeService.getAddress(latlng);\n            // .then(vm.gotAddress, vm.handleFailure);\n        };\n        //\n        // vm.gotAddress = function (data) {\n        //     $log.log(data);\n        //     return;\n        //     if (!data.data.data.length) return;\n        //     var addr = data.data.data;\n        //     for (var idx in addr)\n        //         addr = addr[idx];\n        //\n        //\n        //     if ( vm.convertLatLngToAddr ) {\n        //         return addr[1];\n        //     }else {\n        //         var vehicleAddress = addr[1];\n        //         $('.' + vm.myclass).attr('data-content', vehicleAddress)\n        //         WebuiPopovers.updateContent('.' + vm.myclass, vehicleAddress) //Update the Popover content after the popover is created.\n        //     }\n        // };\n\n        vm.showTableData = function () {\n            var traceObj = vm.historyMap.traceObj;\n            // $log.log(traceObj);\n            historyData = [];\n\n            var latlngList = [];\n\n            for (var idx in traceObj) {\n                latlngList.push([traceObj[idx].lat(), traceObj[idx].lng()]);\n            }\n\n            var addressList = [];\n            if (traceObj != null) {\n                if (vm.convertLatLngToAddr) {\n                    vm.getAddress(latlngList).then(\n                        function (resp) {     // On success\n                            // $log.log(resp);\n                            for (var idx in resp) {\n                                addressList.push(resp[idx][1]);\n                            }\n                            getTableData(traceObj, addressList);\n                        },\n\n                        function (resp) {   // On failure\n                            $log.log(resp);\n                        }\n                    );\n                } else {\n                    getTableData(traceObj, addressList);\n                }\n            }\n\n            // $log.log(traceObj);\n\n        };\n\n\n        function getTableData(traceObj, addressList) {\n\n            for (var idx in traceObj) {\n                var loc = traceObj[idx].lat() + ',' + traceObj[idx].lng();\n                var dateTime = new Date(traceObj[idx].gpstime);\n                var ignitionStatus = traceObj[idx].ignstatus ? 'On' : 'Off';\n                var location = \"<span class='latlng loc\" + idx + \"' data-content='Fetching Address'>\" + loc + \"</span>\";\n\n                if (addressList.length) {\n                    location = loc = addressList[idx];\n                }\n                historyData.push([\n                    dateTime,\n                    traceObj[idx].odometer.toString(),\n                    traceObj[idx].speed.toString(),\n                    ignitionStatus,\n                    location\n                ]);\n\n                vm.jsonHistoryData.push({\n                    vehicle_Name: vm.historyMap.selectedVehicle.rtgps.vehicleno,\n                    time: moment(dateTime).format(dateFormat),\n                    odometer: traceObj[idx].odometer.toString(),\n                    speed: traceObj[idx].speed.toString(),\n                    ignitionStatus: ignitionStatus,\n                    location: loc\n                });\n            }\n\n\n            // $log.log(traceObj);\n            google.charts.load('current', {'packages': ['table']});\n            google.charts.setOnLoadCallback(drawTable);\n\n            vm.disableDownload = false;\n            vm.showLoading = false;\n        }\n\n\n        function drawTable() {\n            table = new google.visualization.Table(tableContainer);\n\n            google.visualization.events.addListener(table, 'ready', function () {\n                if (vm.convertLatLngToAddr) {\n\n                } else {\n                    $('.latlng').webuiPopover({trigger: 'hover', width: 300, animation: 'pop'});\n\n                    $('.latlng').hover(function () {\n                        var className = $(this).attr('class');\n                        className = className.split(' ');\n                        var latlng = $(this).text();\n                        vm.getAddress(latlng, className[1]).then(function (resp) {\n                            for (var idx in resp) {\n                                if (resp[idx][1]) {\n                                    var vehicleAddress = resp[idx][1];\n                                    $('.' + vm.myclass).attr('data-content', vehicleAddress)\n                                    WebuiPopovers.updateContent('.' + vm.myclass, vehicleAddress) //Update the Popover content after the popover is created.\n                                    return;\n                                }\n                            }\n                        }, function (resp) {\n                            $log.log(resp);\n                        });\n                    });\n                }\n            });\n            data = new google.visualization.DataTable();\n\n            data.addColumn('datetime', 'Time');\n            data.addColumn('string', 'Odometer');\n            data.addColumn('string', 'Speed');\n            data.addColumn('string', 'IgnitionStatus');\n            data.addColumn('string', 'Location');\n\n            data.addRows(\n                historyData\n            );\n\n            var dateFormatter = new google.visualization.DateFormat({pattern: 'd MMM, h:mm a'});\n            dateFormatter.format(data, 0);\n\n\n            // data.setProperty(0, 0, 'style', 'width:150px');\n            // data.setProperty(0, 1, 'style', 'width:150px');\n            // data.setProperty(0, 2, 'style', 'width:150px');\n            // data.setProperty(0, 3, 'style', 'width:150px');\n            // data.setProperty(0, 4, 'style', 'width:250px');\n\n            table.draw(data, {\n                showRowNumber: true,\n                page: 'enable',\n                width:'100%',\n                height:'100%',\n                pageSize: 300,\n                allowHtml: true,\n                alternatingRowStyle:true\n            });\n        };\n\n        $scope.downloadFile = function () {\n            intellicarAPI.importFileservice.JSONToCSVConvertor(vm.jsonHistoryData, \"Vehicles History Report\", true);\n        };\n\n\n        vm.init = function () {\n            if (vm.historyMap.traceObj.length) {\n                vm.showTableData();\n                vm.disableDownload = false;\n            }\n\n        };\n\n        vm.init();\n    }\n\n})();\n\n/**\n * Created by User on 22-09-2016.\n */\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('geofenceViewService', geofenceViewService);\n\n    function geofenceViewService($rootScope, $log, $q, intellicarAPI, geofenceReportService) {\n\n        var vm = this;\n        vm.toolbar = true;\n        vm.listeners = {};\n        vm.geoData = {};\n\n\n        vm.circles = [];\n        vm.polygons = [];\n        vm.fences = {circles: vm.circles, polygons: vm.polygons};\n\n        vm.getToolbarVar = function () {\n            return vm.toolbar;\n        };\n\n        vm.hide = function () {\n            vm.toolbar = false;\n        };\n\n        vm.show = function () {\n            vm.toolbar = true;\n        };\n\n        // vm.dialogTab = 0;\n\n\n        vm.getService = function (id) {\n            if (id == 'geofences') {\n                return geofenceReportService;\n            }\n        };\n\n\n        vm.handleFences = function (resp) {\n            $log.log(resp);\n        };\n\n\n        var spgreenColor = '#08B21F';\n        var blueColor = 'blue';\n\n        vm.getDefaultCircle = function () {\n            return {\n                center: {},\n                radius: 0,\n                strokeColor: blueColor,\n                strokeWeight: 2,\n                strokeOpacity: 1,\n                fillColor: blueColor,\n                fillOpacity: 0.2,\n                clickable: true, // optional: defaults to true\n                visible: true, // optional: defaults to true\n                control: {}\n            }\n        };\n\n        vm.getDefaultPolygon = function () {\n            return {\n                path: [],\n                strokeColor: blueColor,\n                strokeWeight: 3,\n                fillColor: blueColor,\n                fillOpacity: 0.2,\n                clickable: true,\n                visible: true,\n                control: {}\n            }\n        };\n\n        vm.getPolygonFromInfo = function (polygonInfo) {\n            //$log.log(polygonInfo);\n            var gpolygon = vm.getDefaultPolygon();\n            for (var idx in polygonInfo.vertex) {\n                var latlng = polygonInfo.vertex[idx];\n                gpolygon.path.push({latitude: latlng.lat, longitude: latlng.lng});\n            }\n            return gpolygon;\n        };\n\n\n        vm.getCircleFromInfo = function (circleInfo) {\n            //$log.log(circleInfo);\n            var gcircle = vm.getDefaultCircle();\n            gcircle.center = {latitude: circleInfo.fencecenter.lat, longitude: circleInfo.fencecenter.lng};\n            gcircle.radius = circleInfo.fenceradius;\n            return gcircle;\n        };\n\n        vm.drawFences = function () {\n            //$log.log(vm.circles);\n            //$log.log(vm.polygons);\n            vm.fences = {circles: vm.circles, polygons: vm.polygons};\n            //$log.log(vm.fences);\n            vm.callListeners('getMyFences', vm.fences);\n            return vm.fences;\n        };\n\n\n        vm.getToDrawFences = function () {\n            return vm.fences;\n        };\n\n\n        vm.applyFilters = function (filterType) {\n            vm.callListeners('applyFilters', {filterType: filterType});\n        };\n\n\n        vm.readFenceInfo = function (fenceList) {\n            vm.circles = [];\n            vm.polygons = [];\n\n            vm.endTime = new Date().getTime();\n            //$log.log(\"fence query time = \" + (vm.endTime - vm.startTime));\n            //$log.log(fenceList);\n            for (var idx in fenceList) {\n                var fence = fenceList[idx];\n\n                vm.createFenceObjects(fence);\n            }\n            return vm.drawFences();\n        };\n\n\n        vm.createFenceObjects = function (fence) {\n            if (!('info' in fence))\n                return;\n\n            fence.tagdata = JSON.parse(fence.tagdata);\n            for (var idx in fence.info) {\n                var infoitem = fence.info[idx];\n                infoitem.settingsdata = JSON.parse(infoitem.settingsdata);\n                if (infoitem.settingstag == 'GEOFENCE_BOUNDARY') {\n                    if (infoitem.settingsdata.fencetype == 'polygon') {\n                        var gpolygon = vm.getPolygonFromInfo(infoitem.settingsdata);\n                        gpolygon.control.info = fence;\n                        //$log.log(gpolygon);\n                        vm.polygons.push(gpolygon);\n                    } else if (infoitem.settingsdata.fencetype == 'circle') {\n                        var gcircle = vm.getCircleFromInfo(infoitem.settingsdata);\n                        gcircle.control.info = fence;\n                        //$log.log(gcircle);\n                        vm.circles.push(gcircle);\n                    }\n                }\n            }\n            //$log.log(fence);\n        };\n\n\n        vm.fetchFences = function (fences) {\n            var promiseList = [];\n            for (var idx in fences) {\n                var body = {geofencepath: fences[idx].assetpath};\n                promiseList.push(intellicarAPI.geofenceService.getFenceInfoMap(body));\n            }\n\n            return $q.all(promiseList)\n                .then(vm.readFenceInfo, vm.handleFailure);\n        };\n\n\n        vm.handleFailure = function (resp) {\n            $log.log(resp);\n        };\n\n\n        vm.getMyFences = function () {\n            vm.startTime = new Date().getTime();\n            return intellicarAPI.userService.getMyFencesMap({})\n                .then(vm.fetchFences, vm.handleFailure);\n        };\n\n\n        vm.getMyFenceInfos = function () {\n            vm.startTime = new Date().getTime();\n            return intellicarAPI.userService.getMyFenceInfosMap({})\n                .then(vm.readFenceInfo, vm.handleFailure);\n        };\n\n\n        vm.addListener = function (key, listener) {\n            if (!(key in vm.listeners)) {\n                vm.listeners[key] = [];\n            }\n\n            if (vm.listeners[key].indexOf(listener) === -1) {\n                vm.listeners[key].push(listener);\n            }\n        };\n\n\n        vm.callListeners = function (key, data) {\n            if (key in vm.listeners) {\n                for (var idx in vm.listeners[key]) {\n                    vm.listeners[key][idx](data);\n                }\n            }\n        };\n\n        vm.setData = function (key, value) {\n            vm.geoData[key] = value;\n            // $log.log('vm.setData:' + key);\n            // $log.log(vm.geoData[key]);\n        };\n\n        vm.getData = function (key) {\n            if (vm.geoData.hasOwnProperty(key)) {\n                //$log.log(vm.geoData[key]);\n                return vm.geoData[key];\n            }\n\n            return null;\n        };\n\n        vm.downloadView = function(active) {\n            $rootScope.$broadcast('downloadView', active);\n        };\n\n        vm.fitBounds = function (active) {\n            $rootScope.$broadcast('fitBounds', active);\n        }\n    }\n\n\n})();\n\n/**\n * Created by smiddela on 12/08/16.\n */\n\n(function () {\n\n\n    angular\n        .module('uiplatform')\n        .controller('GeofenceViewController', mapLeftToolBar);\n\n    function mapLeftToolBar($scope, $log, $timeout, $q, mapService, historyService,\n                            $state, geofenceViewService, dialogService) {\n\n        var vm = this;\n\n        vm.leftToolbar = function () {\n            return geofenceViewService.getToolbarVar();\n        };\n\n        vm.toggleBar = function () {\n            if (vm.leftToolbar()) {\n                geofenceViewService.hide();\n            } else {\n                geofenceViewService.show();\n            }\n        };\n\n        vm.loc = mapService.loc;\n        vm.currentLocation = mapService.getCurrentLocation().id; // Have to set it Dynamically\n\n        vm.setInMarkerLocation = function (data) {\n            vm.currentLocation = data.id;\n            mapService.setInMapLocation(data.latlng);\n        };\n\n        // mapService.setInMapLocation(latlng: {latitude: 12.967995, longitude: 77.597953}); // banglore\n\n        vm.leftTB = [\n            {\n                'id': 'geoReport',\n                'name': 'Reports',\n                'iconType': 'fa',\n                'icon': 'fa-bar-chart',\n                'type': 'button',\n                'historymap': false,\n                'data': {\n                    'type': 'stateChange', 'independent': true, 'state': 'home.history', active: true,\n                }\n            },\n            {'type': 'line', 'historymap': false},\n            {\n                'id': 'setLocation',\n                'name': false,\n                'iconType': 'fa',\n                'icon': 'fa-map-marker',\n                'type': 'button',\n                'historymap': true,\n                'data': {\n                    'type': 'function', 'independent': true, 'function': function (active) {\n\n                    }\n                },\n                'childType': 'location',\n                'children': mapService.locations\n            },\n            // {'type': 'line', 'historymap': false},\n\n\n            {\n                'id': 'setGeoFilter',\n                'name': false,\n                'iconType': 'png',\n                'icon': 'assets/images/icon/fence',\n                'type': 'button',\n                'historymap': true,\n                'data': {\n                    'type': 'function', 'independent': true, 'function': function (active) {\n\n                    }\n                },\n                'childType': 'button',\n                'children': [\n                    {\n                        'id': 'setGeoFilter.showAll',\n                        'name': 'Show All',\n                        'iconType': 'fa',\n                        'icon': 'fa-eye',\n                        'type': 'toggleButton',\n                        'historymap': true,\n                        'data': {\n                            active: true,\n                            'type': 'function', 'function': function (active) {\n                                vm.checkGeoFilters.all('setGeoFilter.showAll');\n                            }\n                        }\n                    },\n                    {\n                        'id': 'setGeoFilter.parkingLot',\n                        'name': 'Parking Lot',\n                        'iconType': 'md',\n                        'icon': 'local_parking',\n                        'type': 'toggleButton',\n                        'historymap': true,\n                        'data': {\n                            active: true,\n                            'type': 'function', 'function': function (active) {\n                                vm.checkGeoFilters.set('setGeoFilter.parkingLot', active);\n                            }\n                        }\n                    },\n                    {\n                        'id': 'setGeoFilter.serviceStation',\n                        'name': 'Service Station',\n                        'iconType': 'fa',\n                        'icon': 'fa-wrench',\n                        'type': 'toggleButton',\n                        'historymap': true,\n                        'data': {\n                            active: true,\n                            'type': 'function', 'function': function (active) {\n                                vm.checkGeoFilters.set('setGeoFilter.serviceStation', active);\n                            }\n                        }\n                    },\n                    {\n                        'id': 'setGeoFilter.competitorHub',\n                        'name': 'Competitor Hub',\n                        'iconType': 'fa',\n                        'icon': 'fa-ban',\n                        'type': 'toggleButton',\n                        'historymap': true,\n                        'data': {\n                            active: true,\n                            'type': 'function', 'function': function (active) {\n                                vm.checkGeoFilters.set('setGeoFilter.competitorHub', active);\n                            }\n                        }\n                    },\n                    {\n                        'id': 'setGeoFilter.cityLimits',\n                        'name': 'City Limits',\n                        'iconType': 'fa',\n                        'icon': 'fa-road',\n                        'type': 'toggleButton',\n                        'historymap': true,\n                        'data': {\n                            active: false,\n                            'type': 'function', 'function': function (active) {\n                                vm.checkGeoFilters.set('setGeoFilter.cityLimits', active);\n                            }\n                        }\n                    },\n                    {\n                        'id': 'setGeoFilter.getGeo',\n                        'description': 'Use only when new fences are created',\n                        'name': 'Refresh Geofences',\n                        'iconType': 'fa',\n                        'icon': 'fa-globe',\n                        'type': 'button',\n                        'historymap': true,\n                        'data': {\n                            active: true,\n                            'type': 'function', 'function': function () {\n                                //geofenceViewService.getMyFences();\n                            }\n                        }\n                    }\n                ]\n            },\n\n            {\n                'id': 'batteryFilter',\n                'name': false,\n                'iconType': 'fa',\n                'icon': 'fa-exclamation-triangle',\n                'type': 'button',\n                'historymap': false,\n                'data': {\n                    'type': 'function', 'independent': true, 'function': function (active) {\n\n                    }\n                },\n                'childType': 'button',\n                'children': [\n                    {\n                        'id': 'batteryFilter.devBattery',\n                        'name': 'Low Device battery',\n                        'iconType': 'fa',\n                        'icon': 'fa-battery-quarter',\n                        'type': 'toggleButton',\n                        'historymap': false,\n                        'data': {\n                            active: false,\n                            'type': 'function', 'independent': true, 'function': function (active) {\n                                vm.checkGeoFilters.set('batteryFilter.devBattery', active);\n                            }\n                        }\n                    },\n                    {\n                        'id': 'batteryFilter.carBattery',\n                        'name': 'Low Vehicle battery', 'iconType': 'png', 'icon': 'assets/images/icon/carBattery',\n                        'type': 'toggleButton', 'historymap': false,\n                        'data': {\n                            active: false,\n                            'type': 'function', 'independent': true, 'function': function (active) {\n                                vm.checkGeoFilters.set('batteryFilter.carBattery', active);\n                            }\n                        }\n                    },\n                    {\n                        'id': 'batteryFilter.noComm',\n                        'name': 'Vehicles not communicating',\n                        'iconType': 'png',\n                        'icon': 'assets/images/icon/signal',\n                        'type': 'toggleButton',\n                        'historymap': false,\n                        'data': {\n                            active: false,\n                            'type': 'function', 'independent': true, 'function': function (active) {\n                                vm.checkGeoFilters.set('batteryFilter.noComm', active);\n                            }\n                        }\n                    }\n                ]\n            },\n\n            {'type': 'line', 'historymap': false},\n            {\n                'id': 'showVehicleNo',\n                'name': 'Vehicle number',\n                'iconType': 'fa',\n                'icon': 'fa-car',\n                'type': 'toggleButton',\n                'historymap': false,\n                'data': {\n                    active: false,\n                    'type': 'function', 'independent': true, 'function': function (active) {\n                        vm.checkGeoFilters.set('showVehicleNo', active);\n                        geofenceViewService.showVehicleNumber(active);\n                    }\n                }\n            },\n            {\n                'id': 'fitBounds',\n                'name': 'Zoom to fit view',\n                'iconType': 'fa',\n                'icon': 'fa-crosshairs',\n                'type': 'button',\n                'historymap': false,\n                'data': {\n                    active: false,\n                    'type': 'function', 'independent': true, 'function': function (active) {\n                        vm.checkGeoFilters.set('fitBounds', false);\n                        geofenceViewService.fitBounds(false);\n                    }\n                }\n            },\n            {'type': 'line', 'historymap': false},\n            {\n                'id': 'downloadView',\n                'name': 'Download View',\n                'iconType': 'fa',\n                'icon': 'fa-download',\n                'type': 'toggleButton',\n                'historymap': false,\n                'data': {\n                    active: false,\n                    'type': 'function', 'independent': true, 'function': function (active) {\n                        vm.checkGeoFilters.set('downloadView', false);\n                        geofenceViewService.downloadView(false);\n                    }\n                }\n            }\n        ];\n\n        vm.fencesActive = function () {\n            //$log.log(\"got fences \" + geofenceViewService.getData('geofences'));\n            return geofenceViewService.getData('geofences');\n        };\n\n\n        vm.childClick = function (data, type) {\n            if (type == 'location') {\n                vm.currentLocation = data.id;\n                if ($state.current.name == 'home.history')\n                    historyService.setInMapLocation(data.latlng);\n                else\n                    mapService.setInMapLocation(data.latlng);\n            } else if (type == 'button') {\n                data();\n            }\n        };\n\n\n        vm.init = function () {\n            //geofenceViewService.getMyFences();\n\n            geofenceViewService.getMyFenceInfos();\n\n            vm.geoFilters = geofenceViewService.getData('geoFilters');\n            // $log.log(vm.geoFilters);\n            for (var key in vm.geoFilters) {\n                if (vm.geoFilters[key]) {\n                    setActive(key, true);\n                } else {\n                    setActive(key, false);\n                }\n            }\n        };\n\n\n        vm.checkGeoFilters = {\n            all: function (showAll) {\n                var allActive = true;\n                if (vm.geoFilters.showAll) {\n                    allActive = false;\n                }\n                setActive('setGeoFilter.showAll', allActive);\n                setActive('setGeoFilter.competitorHub', allActive);\n                setActive('setGeoFilter.serviceStation', allActive);\n                setActive('setGeoFilter.parkingLot', allActive);\n                setFilter(showAll);\n            },\n            check: function () {\n                if (vm.geoFilters.parkingLot && vm.geoFilters.serviceStation && vm.geoFilters.competitorHub) {\n                    setActive('setGeoFilter.showAll', true)\n                } else {\n                    setActive('setGeoFilter.showAll', false);\n                }\n            },\n            set: function (id, active) {\n                setActive(id, active);\n                vm.checkGeoFilters.check();\n                setFilter(id);\n            }\n        };\n\n        function setActive(id, active) {\n            var rid = id;\n            id = id.split('.');\n            if (id.length <= 1) {\n                id = id[0];\n                for (var key in vm.leftTB) {\n                    if (vm.leftTB.hasOwnProperty(key)) {\n                        if (vm.leftTB[key].id == id) {\n                            vm.leftTB[key].data.active = active;\n                            addFilter(vm.leftTB[key].id, active);\n                        }\n                    }\n                }\n            } else {\n                for (var idx = 0; idx < vm.leftTB.length; idx++) {\n                    if (vm.leftTB[idx].id == id[0]) {\n                        for (var key in vm.leftTB[idx].children) {\n                            if (vm.leftTB[idx].children.hasOwnProperty(key)) {\n                                if (vm.leftTB[idx].children[key].id == rid) {\n                                    vm.leftTB[idx].children[key].data.active = active;\n                                    addFilter(vm.leftTB[idx].children[key].id, active);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        function addFilter(filter, active) {\n            filter = filter.split('.');\n            filter = filter[filter.length - 1];\n            vm.geoFilters[filter] = active;\n            // console.log(filter +' : '+vm.geoFilters[filter]);\n        }\n\n        function setFilter(filterType) {\n            filterType = filterType.split('.');\n            filterType = filterType[filterType.length - 1];\n            // $log.log(filterType);\n            geofenceViewService.applyFilters(filterType);\n        }\n\n        function filterList(searchPattern) {\n            $log.log(searchPattern);\n        }\n\n\n        vm.buttonClick = function (item) {\n            // $log.log('buttonClick');\n            if (item.data.type == 'stateChange') {\n                dialogService.show(item.data.state);\n            } else if (item.data.type == 'function') {\n                if (vm.fencesActive() || item.data.independent) {\n                    item.data.active = !item.data.active;\n                    item.data.function(item.data.active, item.location);\n                }\n            }\n        };\n\n        vm.init();\n    }\n\n})();\n\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('geofenceReportService', geofenceReportService);\n\n    function geofenceReportService($log, $q, intellicarAPI) {\n        $log.log(\"geofenceReportService\");\n        var vm = this;\n        vm.listeners = {};\n        vm.reports = {};\n\n        vm.getMyGeofenceReports = function () {\n            return vm.reports;\n        };\n\n\n        vm.handleFailure = function (resp) {\n            $log.log('handleFailure');\n            // $log.log(resp);\n            return $q.reject(resp);\n        };\n\n\n        vm.handleGeofenceReportInfoMap = function (reports) {\n            $log.log('geofenceReportService');\n            //$log.log(reports);\n            for (var idx in reports) {\n                var reportInfo = reports[idx];\n                //$log.log(reportInfo);\n                vm.reports[reportInfo.assetpath] = reportInfo;\n            }\n\n            // $log.log(vm.reports);\n            vm.callListeners(vm.reports, 'mygeofencereportsinfo');\n\n            return $q.resolve(vm.reports);\n        };\n\n\n        vm.handleMyGeofenceReportsMap = function (resp) {\n            // $log.log(resp);\n            vm.reportList = resp;\n            var promiseList = [];\n\n            for (var idx in vm.reportList) {\n                //$log.log(vm.reportList[idx]);\n                var body = {geofencereportpath: vm.reportList[idx].assetpath};\n                promiseList.push(intellicarAPI.fenceReportService.getGeofenceReportInfoMap(body));\n            }\n\n            return $q.all(promiseList)\n                .then(vm.handleGeofenceReportInfoMap, vm.handleFailure);\n        };\n\n\n        vm.getMyGeofenceReportsMap = function () {\n            return intellicarAPI.userService.getMyGeofenceReportsMap({})\n                .then(vm.handleMyGeofenceReportsMap, vm.handleFailure);\n        };\n\n\n        vm.addListener = function (key, listener) {\n            if (!(key in vm.listeners)) {\n                vm.listeners[key] = [];\n            }\n\n            if (vm.listeners[key].indexOf(listener) === -1) {\n                vm.listeners[key].push(listener);\n            }\n        };\n\n\n        vm.callListeners = function (msg, key) {\n            if (key in vm.listeners) {\n                for (var idx in vm.listeners[key]) {\n                    vm.listeners[key][idx](msg, key);\n                }\n            }\n        };\n\n        vm.init = function () {\n            vm.getMyGeofenceReportsMap();\n        };\n\n\n        vm.reportDetails = {\n            reportId: 1233\n        };\n\n        vm.setReportPath = function (reportPath) {\n            vm.reportDetails.reportId = reportPath;\n        }\n\n        vm.getReportDetails = function () {\n            return vm.reportDetails;\n        }\n\n        vm.init();\n    }\n})();\n\n/**\n * Created by User on 22-09-2016.\n */\n\n\n(function () {\n    angular\n        .module('uiplatform')\n        .controller('GeofenceReportController', GeofenceReportController);\n\n    function GeofenceReportController($log, $q, dialogService, geofenceReportService, $filter, $timeout,\n                                      intellicarAPI, historyService, mapService, $state) {\n\n        $log.log(\"GeofenceReportController\");\n\n        // $log.log(historyService.playerControls);\n        dialogService.setTab(2);\n        var vm = this;\n        var dateFormat = 'DD-MM-YYYY HH:mm';\n\n        vm.fenceReportObj = historyService.geoFenceReports;\n\n        // $log.log(vm.fenceReportObj);\n\n        vm.startTime = vm.fenceReportObj.startTime;\n        vm.endTime = vm.fenceReportObj.endTime;\n\n        vm.disableDownload = false;\n\n\n        // vm.jsonReportData = [];\n\n        vm.setSelectedCount = function (type) {\n            if (type == 'vehicle') {\n                if (vm.fenceReportObj.filteredItems.length)\n                    vm.fenceReportObj.selectedVehiclesCount = ($filter(\"filter\")\n                    (vm.fenceReportObj.filteredItems, {checked: true})).length;\n            } else {\n                if (vm.fenceReportObj.filteredFenceItems.length)\n                    vm.fenceReportObj.selectedFencesCount = ($filter(\"filter\")\n                    (vm.fenceReportObj.filteredFenceItems, {checked: true})).length;\n            }\n        };\n\n        vm.filterVehicles = function () {\n            vm.fenceReportObj.filteredItems = $filter(\"filter\")\n            (vm.fenceReportObj.currRep.vehicles, vm.fenceReportObj.vehicleFilter);\n            // $log.log(vm.fenceReportObj.filteredItems);\n        };\n\n        vm.filterFences = function () {\n            vm.fenceReportObj.filteredFenceItems = $filter(\"filter\")(vm.fenceReportObj.currRep.fences, vm.fenceReportObj.fenceFilter);\n            // $log.log(vm.fenceReportObj.filteredFenceItems);\n        };\n\n        vm.getSelectedFences = function (rep) {\n            vm.fenceReportObj.reportId = rep.assetpath;\n            vm.setReport(rep);\n            vm.getHistoryReport();\n        };\n\n\n        vm.setReport = function (rep) {\n            vm.fenceReportObj.currRep = {};\n            vm.fenceReportObj.currRep.vehicles = [];\n            vm.fenceReportObj.currRep.fences = [];\n\n\n            for (var idx in rep.assg) {\n                var data = {\n                    id: rep.assg[idx].assetpath,\n                    name: rep.assg[idx].name,\n                    checked: true\n                };\n\n                if (rep.assg[idx].assgfromassetid == 4) {\n                    vm.fenceReportObj.currRep.vehicles.push(data);\n                } else if (rep.assg[idx].assgfromassetid == 15) {\n                    vm.fenceReportObj.currRep.fences.push(data);\n                }\n            }\n\n            vm.fenceReportObj.filteredItems = vm.fenceReportObj.currRep.vehicles;\n            vm.fenceReportObj.filteredFenceItems = vm.fenceReportObj.currRep.fences;\n\n            vm.SelectAllFences = true;\n            vm.selectAllVehicles = true;\n            vm.deSelectAllFences = false;\n            vm.deSelectAllVehicles = false;\n\n            vm.setSelectedCount('fence');\n            vm.setSelectedCount('vehicle');\n        };\n\n\n        function drawTable() {\n            var data = new google.visualization.DataTable();\n            data.addColumn('string', 'Vehicles');\n            data.addColumn('string', 'Fence');\n            data.addColumn('datetime', 'Fence Entry');\n            data.addColumn('datetime', 'Fence Exit');\n            data.addRows(\n                historyService.geoFenceReports.myHistoryData\n            );\n\n            var dateFormatter = new google.visualization.DateFormat({pattern: 'd MMM, h:mm a'});\n            dateFormatter.format(data, 2);\n            dateFormatter.format(data, 3);\n\n            var table = new google.visualization.Table(document.getElementById('geo-table'));\n\n            table.draw(data, {\n                showRowNumber: true,\n                width: '100%',\n                page: 'enable',\n                pageSize: 300\n            });\n\n            google.visualization.events.addListener(table, 'select', function (evt) {\n                $log.log(table.getSelection());\n                $log.log(data.getValue(table.getSelection()[0].row, 0));\n\n                var selectedVehicle = data.getValue(table.getSelection()[0].row, 0);\n\n                if (selectedVehicle) {\n                    var vehicleDetail = $filter(\"filter\")(mapService.inMap.markers.inMarkers, selectedVehicle);\n\n                    var dateFormat = 'YYYY-MM-DD HH:mm';\n                    var startTime = moment(data.getValue(table.getSelection()[0].row, 2)).subtract(1, 'hour').format(dateFormat);\n\n                    var endTime = moment(data.getValue(table.getSelection()[0].row, 3)).add(1, 'hour').format(dateFormat);\n\n                    historyService.historyMapObj.startTime = startTime;\n                    historyService.historyMapObj.endTime = endTime;\n\n                    var params = {\n                        clickedMarker: vehicleDetail[0]\n                    };\n\n                    $state.go('home.history', {\"mapObj\": params});\n                }\n            });\n        }\n\n        vm.getHistory = function (data) {\n            dialogService.setData(data, 'selectedVehicle');\n            dialogService.show('home.history');\n        };\n\n\n        vm.handleFailure = function (resp) {\n            $log.log('handleFailure');\n            $log.log(resp);\n            vm.loadingHistoryData = false;\n        };\n\n\n        vm.getMyGeofenceReports = function (resp) {\n            if (vm.initialSelect) {\n                vm.initialSelect = false;\n                vm.fenceReportObj.reports = geofenceReportService.getMyGeofenceReports();\n\n                // $log.log(vm.fenceReportObj.reports);\n                for (var idx in vm.fenceReportObj.reports) {\n                    return vm.getSelectedFences(vm.fenceReportObj.reports[idx]);\n                }\n            }\n        };\n\n\n        vm.getMyGeofenceReportsMap = function () {\n            geofenceReportService.getMyGeofenceReportsMap()\n                .then(vm.getMyGeofenceReports, vm.handleFailure);\n        };\n\n\n        vm.selectAll = function (data) {\n            var filterData;\n            var checkStatus;\n\n            if (data == 'vehicle') {\n                for (var idx in vm.fenceReportObj.filteredItems) {\n                    filterData = vm.fenceReportObj.filteredItems;\n                    vm.fenceReportObj.filteredItems[idx].checked = vm.selectAllVehicles;\n                }\n                vm.deSelectAllVehicles = !vm.selectAllVehicles;\n                vm.setSelectedCount('vehicle');\n            } else if (data == 'fence') {\n                filterData = vm.fenceReportObj.filteredFenceItems;\n\n                for (var idx in vm.fenceReportObj.filteredFenceItems) {\n                    vm.fenceReportObj.filteredFenceItems[idx].checked = vm.selectAllFences;\n                }\n                vm.fenceReportObj.selectedFencesCount = vm.fenceReportObj.filteredFenceItems.length;\n                vm.deSelectAllFences = !vm.selectAllFences;\n                vm.setSelectedCount('fence');\n            }\n        };\n\n        vm.deSelectAll = function (data) {\n            if (data == 'vehicle') {\n                for (var idx in vm.fenceReportObj.filteredItems) {\n                    // var filterData = vm.fenceReportObj.filteredItems;\n                    vm.fenceReportObj.filteredItems[idx].checked = false;\n                }\n                vm.selectAllVehicles = false;\n                vm.setSelectedCount('vehicle');\n            } else if (data == 'fence') {\n                // var filterData = vm.fenceReportObj.filteredFenceItems;\n\n                for (var idx in vm.fenceReportObj.filteredFenceItems) {\n                    vm.fenceReportObj.filteredFenceItems[idx].checked = false;\n                }\n                vm.selectAllFences = false;\n                vm.setSelectedCount('fence');\n            }\n\n        };\n\n        vm.verifyCheckStatus = function (type) {\n            if (type == 'vehicle') {\n                var trues = $filter(\"filter\")(vm.fenceReportObj.currRep.vehicles, {checked: true});\n                if (trues.length) {\n                    vm.deSelectAllVehicles = false;\n                } else {\n                    vm.deSelectAllVehicles = true;\n                }\n\n                if (trues.length < vm.fenceReportObj.currRep.vehicles.length)\n                    vm.selectAllVehicles = false;\n                else if (trues.length == vm.fenceReportObj.currRep.vehicles.length)\n                    vm.selectAllVehicles = true;\n            } else if (type == 'fence') {\n                var trues = $filter(\"filter\")(vm.fenceReportObj.currRep.fences, {checked: true});\n                if (trues.length) {\n                    vm.deSelectAllFences = false;\n                } else {\n                    vm.deSelectAllFences = true;\n                }\n\n                if (trues.length < vm.fenceReportObj.currRep.fences.length)\n                    vm.selectAllFences = false;\n                else if (trues.length == vm.fenceReportObj.currRep.fences.length)\n                    vm.selectAllFences = true;\n            }\n\n            vm.setSelectedCount(type);\n        };\n\n\n        vm.getHistoryReport = function () {\n            historyService.geoFenceReports.myHistoryData = [];\n            historyService.geoFenceReports.jsonReportData = [];\n            vm.disableDownload = true;\n            var myEl = angular.element(document.querySelector('#geo-table'));\n            myEl.empty();\n            vm.errorMsg = '';\n\n            if (vm.fenceReportObj.startTime && vm.fenceReportObj.endTime) {\n                vm.selectedVehicles = [];\n                vm.selectedFences = [];\n                var promiseList = [];\n\n                vm.vehicleids = [];\n\n                for (var idx in vm.fenceReportObj.filteredItems) {\n                    if (vm.fenceReportObj.filteredItems[idx].checked) {\n                        vm.selectedVehicles.push(vm.fenceReportObj.filteredItems[idx]);\n                        vm.vehicleids.push(vm.fenceReportObj.filteredItems[idx].id);\n                    }\n                }\n\n                vm.selectedFences = $filter(\"filter\")(vm.fenceReportObj.filteredFenceItems, {checked: true});\n\n                var starttime = new Date(moment(vm.fenceReportObj.startTime).unix() * 1000).getTime();\n                var endtime = new Date(moment(vm.fenceReportObj.endTime).unix() * 1000).getTime();\n\n                if (endtime <= starttime) {\n                    vm.errorMsg = \"End time should be >= Start time\";\n                    return;\n                }\n\n                if (!vm.vehicleids.length) {\n                    vm.errorMsg = \"Select atleast one vehicle\";\n                    return;\n                }\n\n                vm.loadingHistoryData = true;\n\n\n                // $log.log(vm.fenceReportObj.filteredFenceItems);\n\n                var body = {\n                    fencereport: vm.fenceReportObj.reportId,\n                    vehicles: vm.vehicleids,\n                    starttime: new Date(starttime).getTime() / 1000,\n                    endtime: new Date(endtime).getTime() / 1000\n                };\n                promiseList.push(intellicarAPI.geofenceService.getReportHistory(body));\n\n                return $q.all(promiseList)\n                    .then(vm.readHistoryInfo, vm.handleFailure);\n            } else {\n                vm.errorMsg = \"Enter valid start and end time\";\n                return;\n            }\n        };\n\n\n        vm.downloadFile = function () {\n            intellicarAPI.importFileservice.JSONToCSVConvertor(\n                historyService.geoFenceReports.jsonReportData, \"Vehicles Fence Report\", true);\n        };\n\n\n        vm.readHistoryInfo = function (history) {\n            var data = history[0].data.data;\n            var trackHistoryData = [];\n\n            if (!data.length) {\n                vm.loadingHistoryData = false;\n                vm.disableDownload = false;\n                return;\n            }\n\n            for (var idx in data) {\n                for (var vehicle in vm.selectedVehicles) {\n                    if (data[idx].deviceid == vm.selectedVehicles[vehicle].id) {\n                        var vehicleName = vm.selectedVehicles[vehicle].name\n                    }\n                }\n                for (var fen in vm.selectedFences) {\n                    var fenceName = vm.selectedFences[fen].name;\n                    if (data[idx].fencepath == vm.selectedFences[fen].id) {\n                        var startTime = parseInt(data[idx].fentry);\n                        var endTime = parseInt(data[idx].fexit);\n                        if ((startTime < endTime) && (endTime - startTime) > ( 1000 * 60 * 3 )) {\n                            var start_time = new Date(startTime);\n                            var end_time = new Date(endTime);\n                            historyService.geoFenceReports.myHistoryData.push([\n                                vehicleName,\n                                fenceName,\n                                start_time,\n                                end_time\n                            ]);\n\n                            historyService.geoFenceReports.jsonReportData.push({\n                                vehicle_name: vehicleName,\n                                fence_name: fenceName,\n                                fence_entry: moment(start_time).format(dateFormat),\n                                fence_exit: moment(end_time).format(dateFormat)\n                            });\n                            vm.disableDownload = false;\n                        }\n                        break;\n                    }\n                }\n            }\n            vm.disableDownload = false;\n            vm.loadingHistoryData = false;\n            vm.showTableData();\n        };\n\n\n        vm.showTableData = function () {\n            google.charts.load('current', {'packages': ['table']});\n            google.charts.setOnLoadCallback(drawTable);\n        };\n\n\n        vm.init = function () {\n            if (historyService.geoFenceReports.myHistoryData.length) {\n                vm.initialSelect = false;\n                vm.showTableData();\n            } else {\n                vm.initialSelect = true;\n            }\n            geofenceReportService.addListener('mygeofencereportsinfo', vm.getMyGeofenceReports);\n            vm.getMyGeofenceReports();\n\n            vm.disableDownload = historyService.geoFenceReports.jsonReportData.length ? false : true;\n        };\n\n        vm.init();\n        // $timeout(vm.init, 2000);\n\n    }\n\n})();\n\n/**\n * Created by Rinas Musthafa on 11/27/2016.\n */\n\n(function () {\n    angular\n        .module('uiplatform')\n        .controller('DownloadHistoryController', DownloadHistoryController)\n\n    function DownloadHistoryController(dialogService, userService, reportsService,  vehicleService,\n                                       intellicarAPI, $timeout, $log) {\n\n        var vm = this;\n        dialogService.setTab(4);\n\n        vm.showLoading = false;\n\n        userService.getMyAssignedGroupsMap({})\n            .then(function (data) {\n                // console.log(data);\n                vm.groups = sortArray(data);\n                vm.selectedGroup = vm.groups[0];\n            });\n\n        function sortArray(data) {\n            var sorted = [];\n            for (var idx in data) {\n                if (sorted.length > 0) {\n                    var pushed = false;\n                    for (var jdx in sorted) {\n                        if (sorted[jdx].assetpath.split('/').length > data[idx].assetpath.split('/').length) {\n                            sorted.splice(parseInt(jdx), 0, data[idx]);\n                            pushed = true;\n                            break;\n                        }\n                    }\n                    if (!pushed) {\n                        sorted.push(data[idx]);\n                    }\n                } else {\n                    sorted.push(data[idx]);\n                }\n            }\n            return sorted;\n        }\n\n        vm.download = function () {\n            downloadCSV();\n            vm.showLoading = true;\n            vm.errorMsg = null;\n        };\n\n        function downloadCSV() {\n            reportsService.getGPSLastseen({\"grouppath\": vm.selectedGroup.assetpath, \"recursive\": 1})\n                .then(vm.handleSuccess, vm.handleFailure);\n        }\n\n\n        vm.handleFailure = function (resp ){\n            $log.log(resp.data.msg);\n\n            if ( resp.data.msg )\n                vm.errorMsg = resp.data.msg;\n            vm.showLoading = false;\n        }\n\n\n        vm.handleSuccess = function (resp) {\n            $log.log(resp.data.msg);\n            if (resp.data.msg)\n                vm.errorMsg = resp.data.msg;\n            var dateFormat = 'DD-MM-YYYY HH:mm';\n            var csvData = resp.data.data;\n            var csvArray = [];\n\n            for (var idx in csvData) {\n\n                var lastcom = moment.unix(csvData[idx].utctime / 1000).format(dateFormat) + \" \";\n                var pullout = 'ATTATCHED';\n                if (csvData[idx].carb < 1) {\n                    pullout = 'PULLOUT';\n                }\n                var mobility = 'ACTIVE';\n                if (csvData[idx].mobili == 1) {\n                    mobility = 'IMMOBILIZED';\n                }\n                var communication = 'Live';\n                var currentTime = new Date().getTime();\n                var lastSeenAt = csvData[idx].utctime;\n                var noCommThreshold =  vehicleService.noCommThreshold;\n                if (currentTime - lastSeenAt > noCommThreshold) {\n                    communication = 'No Comm';\n                }\n                var gpstime = moment.unix(csvData[idx].gpstime / 1000).format(dateFormat) + \" \";\n                csvArray.push({\n                    \"VEHICLE NO\": csvData[idx].vehicleno,\n                    \"LAST COMM AT\": lastcom,\n                    \"PULL OUT\": pullout,\n                    \"MOBILITY\": mobility,\n                    \"COMMUNICATION\": communication,\n                    \"GPS TIME\": gpstime\n                })\n            }\n\n\n            getAddress(csvData, function (address) {\n                for (var idx in csvArray) {\n                    csvArray[idx][\"ADDRESS\"] = address[idx][1];\n                    csvArray[idx][\"LAT LNG\"] = csvData[idx].lat + ', ' + csvData[idx].lat;\n                }\n                intellicarAPI.importFileservice.JSONToCSVConvertor(csvArray, \"Vehicles History Report\", true);\n\n                $timeout ( function () {\n                    vm.showLoading = false;\n                }, 1000);\n            });\n\n\n            function getAddress(csvData, callback) {\n                var postBody = [];\n                for (var idx in csvData) {\n                    postBody.push([csvData[idx].lat, csvData[idx].lng]);\n                }\n\n                //console.log('im firing');\n                intellicarAPI.geocodeService.getAddress(postBody)\n                    .then(function (resp) {\n                        callback(resp);\n                    })\n            }\n\n            vm.showLoading = false;\n        }\n\n    }\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('dialogService', dialogService)\n        .service('cpuService', cpuService);\n\n    function dialogService($log, $state, $cookies) {\n        $log.log(\"dialogService\");\n        var vm = this;\n        vm.dialogShow = false;\n\n        var dialogStates = ['home.geofence', 'home.historyData', 'home.history', 'home.alarm', 'home.downloadHistory', 'home.gridTest'];\n        // var testObject = {'myName':{'yo1':'yoyo'}};\n        // $cookies.put('hell',JSON.stringify(testObject));\n\n        // console.log(JSON.parse($cookies.get('hell')));\n\n        vm.getData = function (key) {\n            return vm[key];\n        };\n\n        vm.setData = function (data, key) {\n            vm[key] = data;\n        };\n\n\n        vm.show = function (state, params) {\n            // vm.setData(params,'historyData');\n            $state.go(state, {\"mapObj\": params});\n            fadeInDialog();\n        };\n\n\n        vm.hide = function () {\n            $state.go('home');\n            vm.dialogShow = false;\n            $('.int-dialog').fadeOut(300);\n        };\n\n\n        function fadeInDialog() {\n            $('.int-dialog').fadeIn(300);\n            vm.dialogShow = true;\n        };\n\n\n        // vm.getTab = function () {\n        //     var selectedTab;\n        //     // console.log($state.current.name);\n        //     if ($state.current.name == 'home.history') {\n        //         selectedTab = 0;\n        //     } else if ($state.current.name == 'home.geofence') {\n        //         selectedTab = 2;\n        //     }\n        //     return selectedTab;\n        // };\n\n        vm.getDialogShow = function () {\n            return vm.dialogShow;\n        };\n\n        vm.setDialogShow = function (val) {\n            vm.dialogShow = val;\n        };\n\n\n        vm.setTab = function (state) {\n            vm.setTabListener(state);\n        };\n\n        vm.addSetTabListener = function (listener) {\n            vm.setTabListener = listener;\n        };\n\n        vm.init = function () {\n\n            for (var i = 0; i < dialogStates.length; i++) {\n                if ($state.current.name == dialogStates[i]) {\n                    fadeInDialog();\n                }\n            }\n        };\n\n        vm.init();\n\n    }\n\n\n    function cpuService() {\n\n        var vm = this;\n\n        vm.tracking = true;\n\n        vm.trackArray = [];\n\n        vm.track = function (id) {\n            if (vm.tracking) {\n                if (id in vm.trackArray) {\n                    if (vm.trackArray[id].end_time == 0) {\n                        // if the tracking is not ended\n                        vm.trackArray[id].end_time = getCurrentCpuTime();\n                        vm.trackArray[id].diff = vm.trackArray[id].end_time - vm.trackArray[id].start_time;\n                    } else {\n                        vm.trackArray[id] = getNewTrackObject(id);\n                    }\n                } else {\n                    vm.trackArray[id] = getNewTrackObject(id);\n                }\n            }\n            // console.log(vm.trackArray);\n        }\n\n        function getNewTrackObject(id) {\n            return {\n                id: id,\n                count: 0,\n                start_time: getCurrentCpuTime(),\n                end_time: 0\n            }\n        }\n\n        function getCurrentCpuTime() {\n            return performance.now();\n        }\n\n    }\n\n})();\n/**\n * Created by User on 22-09-2016.\n */\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('customMapOverlay', customMapOverlay);\n\n\n    function customMapOverlay($log) {\n        var vm = this;\n        var innerHtml;\n\n\n        vm.markerHeight = 12;\n        vm.markerWidth = 12;\n\n\n        vm.CustomMarker = function (lat, lng, map, args) {\n            var self = this;\n            self.latlng = new google.maps.LatLng(lat, lng);\n            self.args = args;\n            self.map = map;\n            self.setMap(map);\n\n            self.dropAnimation = false;\n\n            self.hide = function () {\n                if (self.div) {\n                    self.div.style.display = 'none';\n                }\n            };\n            self.show = function () {\n                if (self.div) {\n                    self.div.style.display = 'block';\n                }\n            };\n\n            self.hideVehicleNumber = function () {\n                self.vehicleNumberWindow.style.display = 'none';\n            };\n            self.showVehicleNumber = function () {\n                self.vehicleNumberWindow.style.display = 'block';\n            }\n        };\n\n\n        vm.CustomMarker.prototype = new google.maps.OverlayView();\n\n\n        vm.CustomMarker.prototype.setPosition = function (obj) {\n            var self = this;\n            self.latlng = new google.maps.LatLng(obj.latitude, obj.longitude);\n            if (self.getProjection()) {\n                self.point = self.getProjection().fromLatLngToDivPixel(self.latlng);\n                if (self.point && self.div) {\n                    self.div.style.left = (self.point.x - (vm.markerWidth / 2)) + 'px';\n                    self.div.style.top = (self.point.y - (vm.markerHeight / 2)) + 'px';\n                }\n            }\n        };\n\n\n        vm.CustomMarker.prototype.unhighlight = function () {\n            var self = this;\n            self.hide();\n            self.notifier.className = 'overlayNotifier';\n            self.dropAnimation = false;\n        };\n\n\n        vm.CustomMarker.prototype.highlight = function (str) {\n            var self = this;\n            if (str != null) {\n                str = \"-anim-color-\" + str;\n            } else {\n                str = \"\";\n            }\n            self.show();\n            self.notifier.className = 'overlayNotifier animate ' + str;\n            self.dropAnimation = true;\n        };\n\n\n        vm.CustomMarker.prototype.highlightMe = function (str) {\n            var self = this;\n            if (str != null) {\n                str = \"-anim-color-\" + str;\n            } else {\n                str = \"\";\n            }\n            if (self.notifier) {\n                if (!self.dropAnimation) {\n                    self.show();\n                    self.notifier.className = 'overlayNotifier animate ' + str;\n                    self.dropAnimation = true;\n                } else {\n                    self.hide();\n                    self.notifier.className = 'overlayNotifier';\n                    self.dropAnimation = false;\n                }\n            }\n        };\n\n\n        vm.CustomMarker.prototype.draw = function () {\n\n            var self = this;\n            if (!self.div) {\n\n                // initializing DOM Elemets\n                self.div = document.createElement('div');\n\n                self.vehicleNumberWindow = document.createElement('div');\n                self.notifier = document.createElement('span');\n                // Setting propeties\n                self.div.className = 'customMarker';\n                self.div.style.position = 'absolute';\n                self.div.style.display = 'none';\n                self.div.style.cursor = 'pointer';\n\n                self.vehicleNumberWindow.className = 'vehicleNumberWindow';\n                innerHtml = '<input type=\"text\" value=\"' + self.args.marker.vehicleno + '\" readonly/> <div class=\"vnw-close\">x</div>';\n                self.vehicleNumberWindow.innerHTML = innerHtml;\n                self.vehicleNumberWindow.style.display = 'none';\n\n\n                self.notifier.className = 'overlayNotifier';\n\n                // Appending Elements\n                self.div.appendChild(self.vehicleNumberWindow);\n                self.div.appendChild(self.notifier);\n\n                //\n                // if (typeof(self.args.marker_id) !== 'undefined') {\n                //     self.div.dataset.marker_id = self.args.marker_id;\n                // }\n\n                google.maps.event.addDomListener(self.div.querySelector('.vnw-close'), \"click\", function (event) {\n                    self.hideVehicleNumber();\n                });\n\n                google.maps.event.addDomListener(self.div.querySelector('input'), \"click\", function (e) {\n                    this.select();\n                    console.log('clicked!');\n                });\n                var panes = this.getPanes();\n                panes.overlayImage.appendChild(self.div);\n            }\n\n\n            this.point = this.getProjection().fromLatLngToDivPixel(this.latlng);\n            if (this.point) {\n                self.div.style.left = (this.point.x - (vm.markerWidth / 2)) + 'px';\n                self.div.style.top = (this.point.y - (vm.markerHeight / 2)) + 'px';\n            }\n        };\n\n\n        vm.CustomMarker.prototype.remove = function () {\n            if (this.div) {\n                this.div.parentNode.removeChild(this.div);\n                this.div = null;\n            }\n        };\n\n\n        vm.CustomMarker.prototype.getPosition = function () {\n            return this.latlng;\n        };\n    }\n})();\n\n/**\n * Created by smiddela on 20/09/16.\n */\n\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('alarmService', alarmService);\n\n    function alarmService($log, vehicleService, intellicarAPI, $filter, $q) {\n        $log.log(\"alarmService\");\n        var vm = this;\n\n        vm.convertLatLngToAddr = true;\n\n        vm.alarmsObj = {\n            vehicles: [],\n            startTime: '',\n            endTime: '',\n            vehicleFilterPattern: '',\n            selectedVehiclesCount: 0,\n            filteredVehicles: [],\n            alarmResponseData: [],\n            loadingAlarmData: false,\n            msg: ''\n        };\n\n\n        vm.latlngList = [];\n        vm.addressList = [];\n\n\n        vm.getAlarmsHistory = function () {\n            // var selectedVehicles = $filter(\"filter\")(vm.alarmsObj.vehicles, {checked: true});\n\n            var vehiclesids = [];\n\n            // $log.log(vm.alarmsObj.filteredVehicles);\n            for (var idx in vm.alarmsObj.filteredVehicles) {\n                if (vm.alarmsObj.filteredVehicles[idx].checked) {\n                    // $log.log(vm.alarmsObj.filteredVehicles[idx]);\n\n                    vehiclesids.push(vm.alarmsObj.filteredVehicles[idx].rtgps.deviceid);\n                }\n            }\n\n            if (vehiclesids.length <= 0) {\n                vm.alarmsObj.msg = \"Please Select atleast one vehicle\";\n                return;\n            }\n\n            var MILLISEC = 1000;\n            var hrs1 = 3600 * MILLISEC;\n            var timeLimit = hrs1;\n\n\n            // $log.log(vm.alarmsObj.startTime, vm.alarmsObj.endTime);\n            var startTime = new Date(moment(vm.alarmsObj.startTime).unix() * 1000).getTime();\n            var endTime = new Date(moment(vm.alarmsObj.endTime).unix() * 1000).getTime();\n\n\n            if (!startTime) {\n                vm.alarmsObj.msg = \"Please enter start time\";\n                return;\n            }\n\n            if (!endTime) {\n                vm.alarmsObj.msg = \"Please enter end time\";\n                return;\n            }\n\n            // if (endTime - startTime > timeLimit)\n            //     endTime = startTime + timeLimit;\n\n            if (endTime <= startTime) {\n                vm.alarmsObj.msg = \"End time should be >= Start time\";\n                return;\n            }\n\n            vm.alarmsObj.loadingAlarmData = true;\n\n            var body = {\n                vehiclepath: vehiclesids,\n                starttime: startTime,\n                endtime: endTime\n            };\n\n            vm.alarmsObj.msg = '';\n\n            return intellicarAPI.myAlarmService.getAlarmInfo(body)\n                .then(vm.readHistoryInfo, vm.handleFailure);\n        };\n\n        vm.readHistoryInfo = function (history) {\n            var data = history;\n            vm.alarmsObj.loadingAlarmData = false;\n\n            if (!data.length) {\n                return;\n            }\n\n\n            for (var idx in data) {\n                for (var veh in vm.alarmsObj.vehicles) {\n                    if (data[idx].deviceid == vm.alarmsObj.vehicles[veh].rtgps.deviceid) {\n                        data[idx].vehicleno = vm.alarmsObj.vehicles[veh].rtgps.vehicleno;\n                        data[idx].speed = Math.floor(data[idx].speed);\n                    }\n                }\n\n                vm.latlngList.push([data[idx].lat, data[idx].lng]);\n            }\n\n            if ( vm.convertLatLngToAddr ){\n                // var body = {\n                //     data : vm.latlngList\n                // }\n                intellicarAPI.geocodeService.getAddress(vm.latlngList).then(function(resp){\n                    for ( var idx in resp ) {\n                        vm.addressList.push(resp[idx][1]);\n\n                        // $log.log(resp[idx][0])\n                        for ( var xidx in data ) {\n\n                            if ( (data[xidx].lat == resp[idx][0][0]) &&\n                                ( data[xidx].lng == resp[idx][0][1]) ) {\n                                data[xidx].addr = resp[idx][1];\n                            }\n                        }\n                        vm.alarmsObj.alarmResponseData = data;\n                    }\n                },function(resp){\n                    $log.log(resp);\n                });\n            } else{\n                vm.alarmsObj.alarmResponseData = data;\n\n            }\n\n            // $log.log(data);\n        };\n\n\n        vm.handleFailure = function () {\n            $log.log('fails');\n        }\n\n\n        vm.init = function () {\n            var defaultTime = vm.getDefaultTime();\n\n            vm.alarmsObj.startTime = defaultTime.startTime;\n            vm.alarmsObj.endTime = defaultTime.endTime;\n\n            for (var idx in vehicleService.vehiclesByPath) {\n                // $log.log(vehicleService.vehiclesByPath[idx]);\n\n                if (vehicleService.vehiclesByPath[idx].hasOwnProperty('rtgps'))\n                    vm.alarmsObj.vehicles.push(vehicleService.vehiclesByPath[idx]);\n            }\n            // vm.alarmsObj.vehicles =  vehicleService.vehiclesByPath,\n            vm.alarmsObj.filteredVehicles = vm.alarmsObj.vehicles;\n        };\n\n\n        vm.getDefaultTime = function () {\n            var dateFormat = 'YYYY-MM-DD HH:mm';\n\n            var startTime = moment().subtract(1, 'hour').format(dateFormat);\n            var endTime = moment().format(dateFormat);\n\n            return {\n                startTime: startTime,\n                endTime: endTime\n            }\n        };\n\n        vm.init();\n\n    }\n})();\n\n/**\n * Created by harshas on 13/10/16.\n */\n\n(function () {\n    angular\n        .module('uiplatform')\n        .controller('AlarmController', AlarmController);\n\n\n    function AlarmController($scope, $log, dialogService, alarmService, DTOptionsBuilder,\n                             $timeout, $interval, $q, $filter, intellicarAPI) {\n        $log.log('AlarmController');\n\n\n        var vm = this;\n        var dateFormat = 'DD-MM-YY HH:mm';\n        dialogService.setTab(3);\n        vm.jsonAlarmData = [];\n        vm.searchTerm = null;\n\n        vm.convertLatLngToAddr = alarmService.convertLatLngToAddr;\n\n\n        vm.dtOptions = DTOptionsBuilder.newOptions();\n\n        vm.dtOptions.withOption('paging', false).withOption('scrollY', \"58vh\").withOption('scrollCollapse', true);\n\n\n        vm.selectAll = function (data) {\n            var filterData;\n            var checkStatus;\n\n            if (data == 'vehicle') {\n                for (var idx in vm.alarms.filteredVehicles) {\n                    filterData = vm.alarms.filteredVehicles;\n                    vm.alarms.filteredVehicles[idx].checked = vm.selectAllVehicles;\n                }\n                vm.deSelectAllVehicles = !vm.selectAllVehicles;\n                vm.setSelectedCount('vehicle');\n            }\n        };\n\n        vm.deSelectAll = function (data) {\n            if (data == 'vehicle') {\n                for (var idx in vm.alarms.filteredVehicles) {\n                    // var filterData = vm.fenceReportObj.filteredItems;\n                    vm.alarms.filteredVehicles[idx].checked = false;\n                }\n                vm.selectAllVehicles = false;\n                vm.setSelectedCount('vehicle');\n            }\n        };\n\n        vm.verifyCheckStatus = function (type) {\n            if (type == 'vehicle') {\n                var trues = $filter(\"filter\")(vm.alarms.filteredVehicles, {checked: true});\n                if (trues.length) {\n                    vm.deSelectAllVehicles = false;\n                } else {\n                    vm.deSelectAllVehicles = true;\n                }\n\n                if (trues.length < vm.alarms.filteredVehicles.length)\n                    vm.selectAllVehicles = false;\n                else if (trues.length == vm.alarms.filteredVehicles.length) {\n                    if (vm.alarms.filteredVehicles.length <= 0)\n                        vm.selectAllVehicles = false;\n                    else\n                        vm.selectAllVehicles = true;\n                }\n            }\n            vm.setSelectedCount(type);\n        };\n\n        vm.filterVehicles = function () {\n\n            if (!vm.alarms.vehicleFilterPattern) {\n                vm.alarms.filteredVehicles = vm.alarms.vehicles;\n            } else\n                vm.alarms.filteredVehicles = $filter(\"filter\")\n                (vm.alarms.vehicles, vm.alarms.vehicleFilterPattern);\n            // $log.log(vm.fenceReportObj.filteredItems);\n\n            vm.verifyCheckStatus('vehicle');\n        };\n\n        vm.setSelectedCount = function (type) {\n            if (type == 'vehicle') {\n                if (vm.alarms.filteredVehicles.length)\n                    vm.alarms.selectedVehiclesCount = ($filter(\"filter\")\n                    (vm.alarms.filteredVehicles, {checked: true})).length;\n            }\n        };\n\n        vm.init = function () {\n            vm.alarms = alarmService.alarmsObj;\n\n\n            for (var idx in vm.alarms.vehicles) {\n                if (!vm.alarms.vehicles[idx].hasOwnProperty('checked'))\n                    vm.alarms.vehicles[idx].checked = false;\n            }\n\n            if (vm.alarms.filteredVehicles.length)\n                vm.alarms.selectedVehiclesCount = ($filter(\"filter\")\n                (vm.alarms.filteredVehicles, {checked: true})).length;\n\n            // vm.verifyCheckStatus('vehicle');\n            // $log.log(vm.alarms.vehicles);\n            //\n            // $log.log(vm.alarms.filteredVehicles);\n\n            vm.filterVehicles();\n\n            vm.showAddress();\n        };\n\n\n        vm.getHistory = function () {\n            vm.jsonAlarmData = [];\n            vm.alarms.alarmResponseData = [];\n            alarmService.getAlarmsHistory();\n\n            vm.showAddress();\n        };\n\n        vm.showAddress = function () {\n            $timeout(function () {\n                $('.latlng').webuiPopover({trigger: 'hover', width: 300, animation: 'pop'})\n            }, 3000);\n        };\n\n        vm.downloadFile = function () {\n            vm.jsonAlarmData = [];\n            var alarmResp = vm.alarms.alarmResponseData;\n\n\n            if ( vm.searchTerm != null ) {\n                alarmResp = $filter(\"filter\")(vm.alarms.alarmResponseData, {$: vm.searchTerm});\n            }\n\n            // $log.log(alarmResp);\n\n            if (alarmResp.length) {\n                for (var idx in alarmResp) {\n                    var loc = alarmResp[idx].lat + ',' + alarmResp[idx].lng;\n\n                    if ( vm.convertLatLngToAddr ) {\n                        loc = alarmResp[idx].addr\n                    }\n\n                    var alarmTime = new Date(parseInt(alarmResp[idx].gpstime));\n                    vm.jsonAlarmData.push({\n                        vehicle_name: alarmResp[idx].vehicleno,\n                        time: moment(alarmTime).format(dateFormat),\n                        reason: alarmResp[idx].alarmreason,\n                        speed: alarmResp[idx].speed,\n                        operation_mode: alarmResp[idx].opermode,\n                        location: loc\n                    });\n                }\n                intellicarAPI.importFileservice.JSONToCSVConvertor(vm.jsonAlarmData, \"Vehicles Alarm Report\", true);\n            }\n        };\n\n        vm.getAddress = function (lat, lng, className) {\n            if (vm.convertLatLngToAddr) {\n\n            }else {\n                vm.myclass = 'loc' + className;\n                // var body = {\n                //     data: [[lat, lng]]\n                // };\n\n                (intellicarAPI.geocodeService.getAddress([[lat, lng]]))\n                    .then(vm.gotAddress, vm.handleFailure);\n\n\n                // return $q.resolve(promise)\n            }\n\n        };\n\n\n\n        vm.gotAddress = function (data) {\n            // $log.log(data);return;\n            if (!data.length) return;\n\n            var addr;\n            for (var idx in data)\n                addr = data[idx];\n\n            var vehicleAddress = addr[1]\n\n            $('.' + vm.myclass).attr('data-content', vehicleAddress)\n\n            WebuiPopovers.updateContent('.' + vm.myclass, vehicleAddress) //Update the Popover content after the popover is created.\n        };\n\n\n\n        // $('table').on( 'draw.dt', function (e) {\n        //         $log.log(e);\n        //         $log.log(e.target.innerText);\n        // } );\n\n\n        angular.element('body').on('search.dt', function() {\n            vm.searchTerm = document.querySelector('.dataTables_filter input').value;\n            //console.log('dataTables search : ' + vm.searchTerm);\n        });\n\n\n        vm.init();\n\n    }\n\n})();\n\n\n(function(){\n\n\n    angular\n        .module('uiplatform')\n        .controller('DialogController', DialogController);\n\n    function DialogController( $log, dialogService) {\n\n        var vm = this;\n\n\n        $(window).keydown(function (event) {\n            if(event.keyCode == 27){ // escape\n                vm.closeTab();\n            }\n        });\n\n\n        $log.log(\"DialogController\");\n\n        vm.getTab = function () {\n            vm.selectedTab = dialogService.getTab();\n            // return dialogService.getTab();\n        };\n\n        vm.closeTab = function(){\n            dialogService.hide();\n        };\n\n        vm.dialogShow = function () {\n            return dialogService.getDialogShow();\n        };\n\n        vm.setTab = function(tabIndex) {\n            vm.selectedTab = tabIndex;\n            //$log.log(tabIndex);\n        };\n\n        vm.init = function() {\n            dialogService.addSetTabListener(vm.setTab);\n        };\n\n        vm.init();\n    }\n\n})();\n\n/**\n * Created by User on 24-09-2016.\n */\n\n/**\n * Created by smiddela on 15/08/16.\n */\n\n(function() {\n\n    angular\n        .module('uiplatform')\n        .controller('LeftToolbarDashboardController', LeftToolbarDashboardController);\n\n    function LeftToolbarDashboardController($scope, $rootScope, $log) {\n        $log.log('LeftToolbarDashboardController');\n        var vm = this;\n    }\n})();\n\n\n\n/**\n * Created by smiddela on 14/08/16.\n */\n\n(function() {\n\n    angular\n        .module('uiplatform')\n        .controller('ReportsController', ReportsController);\n\n    function ReportsController($scope, $rootScope, $log) {\n\n        $log.log('ReportsController');\n        var vm = this;\n\n\n    }\n})();\n\n\n\n/**\n * Created by smiddela on 22/08/16.\n */\n\n(function() {\n    'use strict';\n\n    angular\n        .module('uiplatform')\n        .config(managementRouter)\n        .run(function($rootScope, $log, $state, $stateParams) {\n            $rootScope.$state = $state;\n            $rootScope.$stateParams = $stateParams;\n        });\n\n\n    /** @ngInject */\n    function managementRouter($stateProvider, $urlRouterProvider) {\n        $stateProvider\n\n            .state('home.management.vehicle', {\n                url: '/vehicle',\n                params: {\n                    info : null\n                },\n                views: {\n                    'mgmttab@home.management': {\n                        templateUrl: 'app/components/landingpage/management/settings/vehicle/vehicle_mgmt.html',\n                        resolve: {\n                            startupData : function($stateParams, $log, vehicleMgmtService, $state) {\n                                $log.log(\"toState \" + $state.current.name);\n                                $log.log($stateParams);\n                                return vehicleMgmtService.getData($stateParams);\n                            }\n                        },\n                        controller: 'VehicleMgmtController as vm'\n                    }\n                }\n            })\n            .state('home.management.group', {\n                url: '/group',\n                params: {\n                    info : null\n                },\n                views: {\n                    'mgmttab@home.management': {\n                        templateUrl: 'app/components/landingpage/management/settings/group/group_mgmt.html',\n                        resolve: {\n                            startupData : function($stateParams, $log, groupMgmtService, $state) {\n                                $log.log(\"current State \" + $state.current.name);\n                                $log.log($stateParams);\n                                return groupMgmtService.getData($stateParams);\n                            }\n                        },\n                        controller: 'GroupMgmtController as vm'\n                    }\n                }\n            })\n            .state('home.management.user', {\n                url: '/user',\n                params: {\n                    info : null\n                },\n                views: {\n                    'mgmttab@home.management': {\n                        templateUrl: 'app/components/landingpage/management/settings/user/user_mgmt.html',\n                        resolve: {\n                            startupData : function($stateParams, $log, userMgmtService, $state) {\n                                $log.log(\"toState \" + $state.current.name);\n                                $log.log($stateParams);\n                                return userMgmtService.getData($stateParams);\n                            }\n                        },\n                        controller: 'UserMgmtController as vm'\n                    }\n                }\n            })\n            .state('home.management.role', {\n                url: '/role',\n                params: {\n                    info : null\n                },\n                views: {\n                    'mgmttab@home.management': {\n                        templateUrl: 'app/components/landingpage/management/settings/role/role_mgmt.html',\n                        resolve: {\n                            startupData : function($stateParams, $log, roleMgmtService, $state) {\n                                $log.log(\"toState \" + $state.current.name);\n                                // $log.log($stateParams);\n                                return roleMgmtService.getData($stateParams);\n                            }\n                        },\n                        controller: 'RoleMgmtController as vm'\n                    }\n                }\n            })\n            .state('home.management.device', {\n                url: '/device',\n                params: {\n                    info : null\n                },\n                views: {\n                    'mgmttab@home.management': {\n                        templateUrl: 'app/components/landingpage/management/settings/device/device_mgmt.html',\n                        resolve: {\n                            startupData : function($stateParams, $log, deviceMgmtService, $state) {\n                                $log.log(\"toState \" + $state.current.name);\n                                $log.log($stateParams);\n                                return deviceMgmtService.getData($stateParams);\n                            }\n                        },\n                        controller: 'DeviceMgmtController as vm'\n                    }\n                }\n            });\n\n        $urlRouterProvider.otherwise('/');\n    }\n\n})();\n\n/**\n * Created by smiddela on 12/08/16.\n */\n\n(function(){\n\n\n    angular\n        .module('uiplatform')\n        .controller('HeaderController', HeaderController);\n\n    function HeaderController($rootScope, $scope, navService, $mdSidenav,$mdMenu, $mdBottomSheet,\n                              $log, $q, $state, $stateParams,\n                            $mdToast, $document, loginService, userprefService) {\n\n        $log.log('HeaderController');\n        var vm = this;\n\n        // $log.log($state.current);\n\n        vm.currState = $state.current.name;\n\n        vm.isManagementTab = vm.currState.indexOf('home.management');\n        vm.menuItems = [ ];\n        vm.selectItem = selectItem;\n        vm.toggleItemsList = toggleItemsList;\n        vm.showActions = showActions;\n        //vm.title = $state.current.data.title;\n        vm.showSimpleToast = showSimpleToast;\n            // vm.toggleLeftnav = toggleLeftnav;\n        // $rootScope.left_nav_toggle = true;\n        // $rootScope.right_nav_toggle = true;\n        vm.right_nav_toggle = false;\n        vm.left_nav_toggle = true;\n\n        vm.userpref = function() {\n            return userprefService.userpref;\n        };\n\n        navService\n            .loadAllItems()\n            .then(function(menuItems) {\n                vm.menuItems = [].concat(menuItems);\n            });\n\n        vm.changePassword = function () {\n\n        };\n\n        vm.logout = function () {\n            loginService.logout();\n        };\n\n        vm.toggleRightSidebar = function (){\n            vm.right_nav_toggle = !vm.right_nav_toggle;\n            $rootScope.$broadcast('toggleRightSidebar', {'right_nav_toggle': vm.right_nav_toggle});\n        };\n\n\n        vm.toggleLeftSidebar = function() {\n            $log.log('left nav header');\n            vm.left_nav_toggle = !vm.left_nav_toggle;\n            $rootScope.$broadcast('toggleLeftSidebar', {'left_nav_toggle': vm.left_nav_toggle});\n        }\n\n        function toggleItemsList() {\n            var pending = $mdBottomSheet.hide() || $q.when(true);\n\n            pending.then(function(){\n                $mdSidenav('left').toggle();\n            });\n        }\n\n        function selectItem (item) {\n            vm.title = item.name;\n            vm.toggleItemsList();\n            vm.showSimpleToast(vm.title);\n        }\n\n        function showActions($event) {\n            $mdBottomSheet.show({\n                //parent: angular.element(document.getElementById('content')),\n                parent: $document.getElementById('content'),\n                templateUrl: 'app/main/bottomSheet.html',\n                controller: [ '$mdBottomSheet', SheetController],\n                controllerAs: \"vm\",\n                bindToController : true,\n                targetEvent: $event\n            }).then(function(clickedItem) {\n                clickedItem && $log.debug( clickedItem.name + ' clicked!');\n            });\n\n            function SheetController( $mdBottomSheet ) {\n                var vm = this;\n\n                vm.actions = [\n                    { name: 'Share', icon: 'share', url: 'https://twitter.com/intent/tweet?text=Angular%20Material%20Dashboard%20https://github.com/flatlogic/angular-material-dashboard%20via%20@flatlogicinc' },\n                    { name: 'Star', icon: 'star', url: 'https://github.com/flatlogic/angular-material-dashboard/stargazers' }\n                ];\n\n                vm.performAction = function(action) {\n                    $mdBottomSheet.hide(action);\n                };\n            }\n        }\n\n        function showSimpleToast(title) {\n            $mdToast.show(\n                $mdToast.simple()\n                    .content(title)\n                    .hideDelay(2000)\n                    .position('bottom right')\n            );\n        }\n\n        vm.closeMdMenu = function(e){\n            if(e.keyCode == 27){\n                $mdMenu.hide()\n            }\n        }\n\n    }\n\n})();\n\n\n/**\n * Created by smiddela on 14/08/16.\n */\n\n(function() {\n\n    angular\n        .module('uiplatform')\n        .controller('FooterController', FooterController);\n\n    function FooterController($scope, $rootScope, navService, $mdSidenav, $log, $document, requestService) {\n\n        $log.log('FooterController');\n        var vm = this;\n\n\n    }\n})();\n\n\n\n/**\n * Created by smiddela on 14/08/16.\n */\n\n/**\n * Created by smiddela on 13/08/16.\n */\n\n(function() {\n\n    angular\n        .module('uiplatform')\n        .controller('CenterController', CenterController);\n\n    function CenterController($scope, $rootScope, $log) {\n        $log.log('CenterController');\n        var vm = this;\n    }\n})();\n\n\n/**\n * Created by smiddela on 15/10/16.\n */\n\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('vehicleAPIService', vehicleAPIService);\n\n    function vehicleAPIService($log, $q, requestService) {\n        $log.log(\"vehicleAPIService\");\n        var vm = this;\n\n        vm.encloseBody = function (data) {\n            return {vehicle:data};\n        };\n\n\n        vm.handleResponse = function (resp) {\n            return $q.resolve(resp.data.data);\n        };\n\n\n        vm.handleFailure = function (resp) {\n            $log.log(\"handleFailure\");\n            $log.log(resp);\n            return $q.reject(resp);\n        };\n\n\n        vm.mobilize = function (data) {\n            var body = vm.encloseBody(data);\n            return requestService.firePost('/vehicle/mobilize', body)\n                .then(vm.handleResponse, vm.handleFailure);\n        };\n\n\n        vm.immobilize = function (data) {\n            var body = vm.encloseBody(data);\n            return requestService.firePost('/vehicle/immobilize', body)\n                .then(vm.handleResponse, vm.handleFailure);\n        };\n\n\n        vm.getMobilityCommandStatus = function (data) {\n            var body = vm.encloseBody(data);\n            return requestService.firePost('/vehicle/immobihist', body)\n                .then(vm.handleResponse, vm.handleFailure);\n        };\n    }\n})();\n\n/**\n * Created by smiddela on 19/08/16.\n */\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('userService', userService);\n\n    function userService($rootScope, $log, $q, requestService, helperService) {\n        $log.log(\"userService\");\n        var vm = this;\n\n        vm.encloseBody = function (data) {\n            // return data;\n            return {user: data};\n        };\n\n\n        vm.getMyInfo = function (body) {\n            //$log.log(\"getMyInfo\");\n            body = vm.encloseBody(body);\n            return requestService.firePost('/user/myinfo', body);\n        };\n\n\n        vm.getMyGroups = function (body) {\n            // $log.log(\"getMyGroups\");\n            body = vm.encloseBody(body);\n            return requestService.firePost('/user/mygroups', body);\n        };\n\n\n        vm.getMyAssignedGroups = function (body) {\n            // $log.log(\"getMyGroups\");\n            body = vm.encloseBody(body);\n            return requestService.firePost('/user/myassignedgroups', body);\n        };\n\n\n        vm.getMyAssetGroups = function (body) {\n            // $log.log(\"getMyAssetGroups\");\n            body = vm.encloseBody(body);\n            return requestService.firePost('/user/myassetgroups', body);\n        };\n\n\n        vm.getMyVehicles = function (body) {\n            // $log.log(\"getMyVehicles\");\n            body = vm.encloseBody(body);\n            return requestService.firePost('/user/myvehicles', body);\n        };\n\n\n        vm.getMyUsers = function (body) {\n            body = vm.encloseBody(body);\n            return requestService.firePost('/user/myusers', body);\n        };\n\n\n        vm.getUserPermissions = function (body) {\n            body = vm.encloseBody(body);\n            return requestService.firePost('/permission/map', body);\n        };\n\n\n        vm.getMyRoles = function (body) {\n            // $log.log(\"getMyRoles\");\n            body = vm.encloseBody(body);\n            return requestService.firePost('/user/myroles', body);\n        };\n\n\n        vm.getMyDevices = function (body) {\n            // $log.log(\"getMyDevices\");\n            body = vm.encloseBody(body);\n            return requestService.firePost('/user/mydevices', body);\n        };\n\n\n        vm.createUser = function (body) {\n            body = vm.encloseBody(body);\n            return requestService.firePost('/user/create', body);\n        };\n\n\n        vm.getMyFences = function (body) {\n            body = vm.encloseBody(body);\n            return requestService.firePost('/user/mygeofences', body);\n        };\n\n\n        vm.getMyFenceInfos = function (body) {\n            body = vm.encloseBody(body);\n            return requestService.firePost('/user/mygeofenceinfos', body);\n        };\n\n\n        vm.getMyGeofenceReports = function (body) {\n            body = vm.encloseBody(body);\n            return requestService.firePost('/user/mygeofencereports', body);\n        };\n\n\n        vm.assignUser = function (body) {\n            body = vm.encloseBody(body);\n            return requestService.firePost('/user/assigngroup', body);\n        };\n\n\n        vm.handleResponse = function (resp) {\n            //$log.log(\"handleResponse\");\n            return $q.resolve(resp)\n        };\n\n\n        vm.handleFailure = function (resp) {\n            //$log.log(\"handleFailure \");\n            return $q.reject(resp);\n        };\n\n\n        vm.getMyInfoMap = function (body) {\n            return vm.getMyInfo(body)\n                .then(helperService.makeMapOnAssetPath, vm.handleFailure)\n                .then(vm.handleResponse, vm.handleFailure);\n        };\n\n\n        vm.getMyGroupsMap = function (body) {\n            // $log.log(\"getMyGroupsMap\");\n            return vm.getMyGroups(body)\n                .then(helperService.mergeAssetPermissions, vm.handleFailure)\n                .then(helperService.makeAssetMap, vm.handleFailure)\n                .then(vm.handleResponse, vm.handleFailure);\n        };\n\n\n        vm.getMyAssignedGroupsMap = function (body) {\n            // $log.log(\"getMyGroupsMap\");\n            return vm.getMyAssignedGroups(body)\n                .then(helperService.mergeAssetPermissions, vm.handleFailure)\n                .then(helperService.makeAssetMap, vm.handleFailure)\n                .then(vm.handleResponse, vm.handleFailure);\n        };\n\n\n        vm.getMyAssetGroupsMap = function (body) {\n            //$log.log(\"getMyAssetGroupsMap\");\n            return vm.getMyAssetGroups(body)\n                .then(helperService.mergeAssetPermissions, vm.handleFailure)\n                .then(helperService.makeAssetMap, vm.handleFailure)\n                .then(vm.handleResponse, vm.handleFailure);\n        };\n\n\n        vm.getMyVehiclesMap = function (body) {\n            // $log.log(\"getMyVehiclesMap\");\n            return vm.getMyVehicles(body)\n                .then(helperService.mergeAssetPermissions, vm.handleFailure)\n                .then(helperService.makeAssetMap, vm.handleFailure)\n                .then(vm.handleResponse, vm.handleFailure);\n        };\n\n\n        vm.getMyUsersMap = function (body) {\n            // $log.log(\"getMyUsersMap\");\n            return vm.getMyUsers(body)\n                .then(helperService.mergeAssetPermissions, vm.handleFailure)\n                .then(helperService.makeAssetMap, vm.handleFailure)\n                .then(vm.handleResponse, vm.handleFailure);\n        };\n\n        vm.getMyUsersMapList = function (body) {\n            // $log.log(\"getMyRolesMap\");\n            return vm.getMyUsers(body)\n                .then(helperService.mergeAssetPermissions, vm.handleFailure)\n                .then(helperService.makeAssetList, vm.handleFailure)\n                .then(vm.handleResponse, vm.handleFailure);\n        };\n\n\n        vm.getMyRolesMap = function (body) {\n            // $log.log(\"getMyRolesMap\");\n            return vm.getMyRoles(body)\n                .then(helperService.mergeAssetPermissions, vm.handleFailure)\n                .then(helperService.makeAssetMap, vm.handleFailure)\n                .then(vm.handleResponse, vm.handleFailure);\n        };\n\n\n        vm.getMyRolesList = function (body) {\n            // $log.log(\"getMyRolesMap\");\n            return vm.getMyRoles(body)\n                .then(helperService.mergeAssetPermissions, vm.handleFailure)\n                .then(helperService.makeAssetList, vm.handleFailure)\n                .then(vm.handleResponse, vm.handleFailure);\n        };\n\n\n        vm.getMyDevicesMap = function (body) {\n            // $log.log(\"getMyDevicesMap\");\n            return vm.getMyDevices(body)\n                .then(helperService.mergeAssetPermissions, vm.handleFailure)\n                .then(helperService.makeAssetMap, vm.handleFailure)\n                .then(vm.handleResponse, vm.handleFailure);\n        };\n\n\n        vm.getMyFencesMap = function (body) {\n            // $log.log(\"getMyFencesMap\");\n            return vm.getMyFences(body)\n                .then(helperService.mergeAssetPermissions, vm.handleFailure)\n                .then(helperService.makeAssetMap, vm.handleFailure)\n                .then(vm.handleResponse, vm.handleFailure);\n        };\n\n\n        vm.getMyFenceInfosMap = function (body) {\n            // $log.log(\"getMyFenceInfosMap\");\n            return vm.getMyFenceInfos(body)\n                .then(helperService.mergeAssetPermissions, vm.handleFailure)\n                .then(helperService.mergeFenceInfo, vm.handleFailure)\n                .then(helperService.makeAssetMap, vm.handleFailure)\n                .then(vm.handleResponse, vm.handleFailure);\n        };\n\n\n        vm.getMyGeofenceReportsMap = function (body) {\n            return vm.getMyGeofenceReports(body)\n                .then(helperService.mergeAssetPermissions, vm.handleFailure)\n                .then(helperService.makeAssetMap, vm.handleFailure)\n                .then(vm.handleResponse, vm.handleFailure);\n        };\n\n\n        vm.handleDirectAssetResponse = function (resp) {\n            //$log.log(\"userService handleDirectAssetResponse\");\n            // $log.log(resp);\n            return $q.resolve(resp);\n        };\n\n\n        // vm.getUsersWithPermissions = function(body){\n        //     var users = vm.getMyUsers(body);\n        //     var permissions = vm.getUserPermissions(body);\n        //\n        //\n        //     return $q.all([users, permissions])\n        //         .then(vm.handleDirectAssetResponse, vm.handleFailure)\n        //         .then(helperService.mergeUserPermissions,  vm.handleFailure)\n        //         .then(vm.handleResponse, vm.handleFailure);\n        // };\n\n\n        vm.getMyDirectAssetsMap = function (body) {\n            // $log.log(\"userService getMyDirectAssetsMap\");\n            var gPromise = vm.getMyGroupsMap(body);\n            var vPromise = vm.getMyVehiclesMap(body);\n            var uPromise = vm.getMyUsersMap(body);\n            var rPromise = vm.getMyRolesMap(body);\n            var dPromise = vm.getMyDevicesMap(body);\n            var myPromise = vm.getMyInfoMap(body);\n\n            return $q.all([gPromise, vPromise, uPromise, rPromise, dPromise, myPromise])\n                .then(vm.handleDirectAssetResponse, vm.handleFailure);\n\n        };\n    }\n})();\n\n/**\n * Created by smiddela on 08/08/16.\n */\n(function () {\n\n    'use strict';\n\n    angular\n        .module('uiplatform')\n        .service('treeDataService', treeDataService);\n\n    function treeDataService($log, $q, userService, helperService, groupService) {\n        var vm = this;\n        $log.log(\"treeDataService\");\n\n        vm.collapsedStatus = false;\n\n\n        vm.management_tree_data = function (data) {\n            // console.log(data.data.data);\n            var nodes = data.data.data;\n            var map = {}, node, roots = [];\n            for (var i = 0; i < nodes.length; i += 1) {\n                node = nodes[i];\n                node.checkStatus = 'unchecked';\n                node.nodes = [];\n                var group_id = node.pgrouppath.split('/');\n                group_id.shift();\n                var pgroupid;\n                var real_groupid = [];\n                var tgroupid;\n\n                for (var j = 0; j < group_id.length; j++) {\n                    if (!(j % 2 == 0))\n                        real_groupid.push(group_id[j]);\n                }\n                tgroupid = real_groupid[real_groupid.length - 1];\n                if (real_groupid.length <= 1)\n                    pgroupid = tgroupid;\n                else\n                    pgroupid = real_groupid[real_groupid.length - 2];\n\n                map[tgroupid] = i;\n                if (pgroupid != tgroupid) {\n                    nodes[map[pgroupid]].nodes.push(node);\n                } else {\n                    roots.push(node);\n                }\n            }\n            return roots;\n        };\n\n\n        vm.getGenericTreeIndex = function (genericTree, asset) {\n            for (var idx in genericTree) {\n                if (genericTree[idx].info.assetpath == asset.assetpath)\n                    return idx;\n            }\n        };\n\n        //\n        // vm.buildDashboardTree = function (genericTree, key) {\n        //     //$log.log(\"buildTree \" + key);\n        //\n        //     if (genericTree === null)\n        //         return null;\n        //\n        //     if (genericTree[key].visited == true) {\n        //         //$log.log(\"Already visited: \" + key);\n        //         return null;\n        //     }\n        //\n        //     var gtNode = genericTree[key];\n        //     gtNode.visited = true;\n        //\n        //     //$log.log(gtNode);\n        //     var utNode = {};\n        //     utNode.id = key;\n        //     utNode.title = gtNode.info.name;\n        //     utNode.info = gtNode.info;\n        //     utNode.items = [];\n        //     utNode.checkStatus = false;\n        //     utNode.collapsed = vm.collapsedStatus;\n        //\n        //     var resultNode = null;\n        //     var child = null;\n        //     if (gtNode.children !== null) {\n        //         for (var idx in gtNode.children) {\n        //             child = gtNode.children[idx];\n        //             //$log.log(\"parent: \" + key + \", child = \" + idx);\n        //             resultNode = vm.buildDashboardTree(genericTree, helperService.getAssetPath(child));\n        //\n        //             if (resultNode !== null) {\n        //                 utNode.items.push(resultNode);\n        //             }\n        //         }\n        //     }\n        //\n        //     return utNode;\n        // };\n\n\n        vm.buildDashboardTree = function (genericTree, key) {\n            //$log.log(\"buildDashboardTree \" + key);\n\n            if (genericTree === null)\n                return null;\n\n            if (!('visited' in genericTree[key])) {\n                genericTree[key].visited = true;\n            } else if (genericTree[key].visited == true) {\n                return null;\n            }\n\n            var gtNode = genericTree[key];\n            gtNode.visited = true;\n\n            //$log.log(gtNode);\n            var utNode = {};\n            utNode.id = genericTree[key].info.assetpath;\n            utNode.title = gtNode.info.name;\n            utNode.info = gtNode.info;\n            utNode.items = [];\n            utNode.checkStatus = false;\n            utNode.collapsed = vm.collapsedStatus;\n\n            var resultNode = null;\n            var child = null;\n            if (gtNode.children !== null) {\n                for (var idx in gtNode.children) {\n                    child = gtNode.children[idx];\n                    //$log.log(\"parent: \" + key + \", child = \" + idx + \", type = \" + child.ui_asset_type);\n                    resultNode = vm.buildDashboardTree(genericTree, vm.getGenericTreeIndex(genericTree, child));\n                    //$log.log(resultNode);\n\n                    if (resultNode !== null) {\n                        utNode.items.push(resultNode);\n                    }\n                }\n            }\n\n            return utNode;\n        };\n\n\n        vm.createDashboardTree = function (genericTree) {\n            //$log.log(genericTree);\n\n            var uiTree = [];\n            for (var key in genericTree) {\n                var resultNode = vm.buildDashboardTree(genericTree, key);\n                if (resultNode !== null) {\n                    uiTree.push(resultNode);\n                }\n            }\n            return $q.resolve(uiTree);\n        };\n\n\n        vm.buildManagementTree = function (genericTree, key) {\n            //$log.log(\"buildManagementTree \" + key);\n\n            if (genericTree === null)\n                return null;\n\n            if (!('visited' in genericTree[key])) {\n                genericTree[key].visited = true;\n            } else if (genericTree[key].visited == true) {\n                //$log.log(\"Already visited: \" + key);\n                return null;\n            }\n\n            var gtNode = genericTree[key];\n            gtNode.visited = true;\n\n            //$log.log(gtNode);\n            var utNode = {};\n            utNode.id = genericTree[key].info.assetpath;\n            utNode.title = gtNode.info.name;\n            utNode.info = gtNode.info;\n            utNode.items = [];\n            utNode.checkStatus = false;\n            utNode.collapsed = vm.collapsedStatus;\n\n            var resultNode = null;\n            var child = null;\n            if (gtNode.children !== null) {\n                for (var idx in gtNode.children) {\n                    child = gtNode.children[idx];\n                    //$log.log(\"parent: \" + key + \", child = \" + idx + \", type = \" + child.ui_asset_type);\n                    resultNode = vm.buildManagementTree(genericTree, vm.getGenericTreeIndex(genericTree, child));\n                    //$log.log(resultNode);\n\n                    // if (resultNode !== null) {\n                    //     utNode.items.push(resultNode);\n                    // }\n\n\n                    if (resultNode !== null) {\n                        var assetTypeExists = false;\n                        for (var uidx in utNode.items) {\n                            var assetType = utNode.items[uidx];\n                            //$log.log(assetType.title + \" == \" + resultNode.info.ui_asset_type);\n                            if (assetType.title == resultNode.info.ui_asset_type) {\n                                //$log.log(\"assetTypeExists \");\n                                assetTypeExists = true;\n                                break;\n                            }\n                        }\n\n                        if (!assetTypeExists) {\n                            //$log.log(\"assetType does not Exists\");\n                            assetType = {\n                                id: resultNode.info.ui_asset_type,\n                                title: resultNode.info.ui_asset_type,\n                                info: gtNode.info,\n                                ui_asset_type: 'assettype',\n                                items: [],\n                                collapsed:vm.collapsedStatus\n                            };\n                            utNode.items.push(assetType);\n                            //$log.log(assetType);\n                        }\n                        assetType.items.push(resultNode);\n                    }\n                }\n            }\n\n            return utNode;\n        };\n\n\n        vm.createManagementTree = function (genericTree) {\n            //$log.log(genericTree);\n\n            var uiTree = [];\n            for (var key in genericTree) {\n                var resultNode = vm.buildManagementTree(genericTree, key);\n                if (resultNode !== null) {\n                    uiTree.push(resultNode);\n                }\n            }\n\n            // $log.log(uiTree);\n            if(vm.globalGenericTree == null){\n                vm.globalGenericTree  = uiTree;\n            }\n\n            vm.globalGenericTree[0].collapsed = true;\n            vm.globalGenericTree[0].loading = false;\n            return $q.resolve(uiTree);\n        };\n\n        // His group will not come in mygroups or myassetgroups API. So we need to handle him explicitly\n        vm.addLoggedInUserToTree = function (asset, assetTree) {\n            var assetpath = asset.assetpath;\n            var pgrouppath = asset.pgrouppath;\n\n            if (!(pgrouppath in assetTree)) {\n                assetTree[pgrouppath] = {};\n\n                if (assetTree[pgrouppath].info == null) {\n                    assetTree[pgrouppath].info = {\n                        name: asset.pname,\n                        assetpath: asset.pgrouppath\n                    };\n                    helperService.addAssetInfo(assetTree[pgrouppath].info);\n                }\n\n                if (assetTree[pgrouppath].children == null) {\n                    assetTree[pgrouppath].children = {};\n                    assetTree[pgrouppath].children[assetpath] = asset;\n                }\n            }\n\n            for (var gidx in assetTree) {\n                var parentPath = helperService.getParentPath(assetTree[gidx].info);\n                if (parentPath == pgrouppath) {\n                    if (!(assetTree[gidx].info.assetpath in assetTree[pgrouppath].children)) {\n                        if (assetTree[gidx].info.assetpath != pgrouppath) {\n                            // $log.log(\"lolli my parent of \" + assetTree[gidx].info.assetpath + \" is \" + pgrouppath);\n                            assetTree[pgrouppath].children[assetTree[gidx].info.assetpath] = assetTree[gidx].info;\n                        }\n                    }\n                }\n            }\n        };\n\n        vm.globalGenericTree = null;\n\n\n        vm.createGenericTree = function (resp) {\n            //$log.log(\"createGenericTree\");\n            $log.log(resp);\n\n            var groups = resp[0];\n            var assetTree = {};\n\n\n            for (var ridx = 0; ridx < resp.length; ridx++) {\n                var assets = resp[ridx];\n                //add all the asset's allowed parent hierarchy to assetTree\n                for (var aidx in assets) {\n                    var asset = assets[aidx];\n                    //$log.log(asset);\n                    var assetpath = asset.assetpath;\n                    var pgrouppath = asset.pgrouppath;\n\n                    if (!(assetpath in assetTree)) {\n                        assetTree[assetpath] = {};\n                        assetTree[assetpath].info = asset;\n                        assetTree[assetpath].children = null;\n                        assetTree[assetpath].collapsed = vm.collapsedStatus;\n\n                        if (pgrouppath in groups && pgrouppath != assetpath) {\n                            if (!(pgrouppath in assetTree)) {\n                                assetTree[pgrouppath] = {};\n                                assetTree[pgrouppath].info = groups[pgrouppath];\n                                assetTree[pgrouppath].children = {};\n                                assetTree[pgrouppath].children[assetpath] = asset;\n                                assetTree[pgrouppath].collapsed = vm.collapsedStatus;\n                            } else {\n                                if (assetTree[pgrouppath].children == null) {\n                                    assetTree[pgrouppath].children = {};\n                                }\n                                assetTree[pgrouppath].children[assetpath] = asset;\n                            }\n                        }\n                    }\n\n                    if('userid' in asset) {\n                        vm.addLoggedInUserToTree(asset, assetTree);\n                    }\n                }\n            }\n            var assetArray = helperService.sortOnAssetLevel(assetTree);\n            return $q.resolve(assetArray);\n        };\n\n\n        vm.getDashboardTree = function (body) {\n            var groupsPromise = userService.getMyGroupsMap(body);\n            var vehiclesPromise = userService.getMyVehiclesMap(body);\n            return $q.all([groupsPromise, vehiclesPromise])\n            //return $q.all([groupsPromise])\n                .then(vm.createGenericTree, vm.handleFailure)\n                .then(vm.createDashboardTree, vm.handleFailure);\n        };\n\n\n        vm.mergeChildTree = function (childTree) {\n            var insert = true;\n            if(!(childTree[Object.keys(childTree)[0]]))\n                insert = false;\n            // var pgrouppath = childTree[Object.keys(childTree)[0]].info.pgrouppath;\n            var pgrouppath = groupService.lastGroupPath;\n            searchGroup(vm.globalGenericTree, pgrouppath, childTree, insert);\n            vm.globalGenericTree[0].collapsed = true;\n            vm.globalGenericTree[0].loading = false;\n            return $q.resolve(vm.globalGenericTree);\n        };\n\n        function searchGroup(tree, path, children, insert) {\n            var groupFound = -1;\n            for(var idx=0; idx < tree.length; idx++){\n                if(tree[idx].info.assetpath == path){\n                    tree[idx].items = [];\n                    tree[idx].loading = false;\n                    if(insert){\n                        for(var jdx=0; jdx < children.length; jdx++){\n                            if(tree[idx].items.length > 0){\n                                groupFound = -1;\n                                for(var kdx=0; kdx < tree[idx].items.length; kdx++){\n                                    if(children[jdx].info.ui_asset_type == tree[idx].items[kdx].id){\n                                        groupFound = kdx;\n                                    }\n                                }\n                                if(groupFound >= 0){\n                                    tree[idx].items[groupFound].items.push(children[jdx]);\n                                }else{\n                                    createAssetType(tree[idx], children[jdx], tree[idx].items.length);\n                                }\n\n                            }else{\n                                createAssetType(tree[idx], children[jdx], 0);\n                            }\n                        }\n                    }\n                }else if(path.indexOf(tree[idx].info.assetpath) !== -1){\n                    for(var jdx=0; jdx < tree[idx].items.length; jdx++){\n                        if(tree[idx].items[jdx].id == 'group'){\n                            searchGroup(tree[idx].items[jdx].items, path, children, insert);\n                        }\n                    }\n                }\n            }\n        };\n\n        function createAssetType(tree, children, idx) {\n            tree.items[idx] = {};\n            tree.items[idx].id = children.info.ui_asset_type;\n            tree.items[idx].title = children.info.ui_asset_type;\n            tree.items[idx].ui_asset_type = 'assettype';\n            tree.items[idx].info = tree.info;\n            tree.items[idx].items = [];\n            tree.items[idx].items.push(children);\n        }\n\n\n        vm.getManagementTreeWithUser = function (body) {\n            return groupService.getMyDirectAssetsMapWithUser(body)\n                .then(vm.createGenericTree, vm.handleFailure)\n                .then(vm.createManagementTree, vm.handleFailure);\n        };\n\n\n        vm.getManagementTreeNoUser = function (body) {\n            return groupService.getMyDirectAssetsMap(body)\n                .then(vm.createGenericTree, vm.handleFailure)\n                .then(vm.createManagementTree, vm.handleFailure)\n                .then(vm.mergeChildTree, vm.handleFailure);\n        };\n\n\n        vm.getManagementTree = function (body) {\n            return groupService.getMyDirectAssetsMap(body)\n                .then(vm.createGenericTree, vm.handleFailure)\n                .then(vm.createManagementTree, vm.handleFailure);\n        };\n    }\n\n})();\n\n/**\n * Created by smiddela on 17/08/16.\n */\n\n(function() {\n    angular\n        .module('uiplatform')\n        .factory('stateService', stateService);\n\n    function stateService($log, groupService) {\n        var DOT = '.';\n        var STATE_HOME = \"home\";\n        var STATE_HOME_DASHBOARD = \"home.dashboard\";\n        var STATE_HOME_MANAGEMENT = \"home.management\";\n\n        var STATE_HOME_DOT = STATE_HOME + DOT;\n        var STATE_HOME_DASHBOARD_DOT = STATE_HOME_DASHBOARD + DOT;\n        var STATE_HOME_MANAGEMENT_DOT = STATE_HOME_MANAGEMENT + DOT;\n\n\n        var getLeafState = function (absoluteState) {\n            if (absoluteState === null)\n                return null;\n\n            var startIndex = absoluteState.lastIndexOf('.');\n            if (startIndex == -1) {\n                return absoluteState;\n            }\n\n            return absoluteState.substring(startIndex + 1);\n        };\n\n\n        var getParentState = function(absoluteState) {\n            if (absoluteState === null)\n                return null;\n\n            var endIndex = absoluteState.lastIndexOf('.');\n            if (endIndex == -1) {\n                return absoluteState;\n            }\n\n            return absoluteState.substring(0, endIndex);\n        };\n\n\n        var getRootState = function(absoluteState) {\n            if (absoluteState === null)\n                return null;\n\n            var endIndex = absoluteState.indexOf('.');\n            if (endIndex == -1) {\n                return absoluteState;\n            }\n\n            return absoluteState.substring(0, endIndex);\n        };\n\n\n        var getRootChildState = function(absoluteState) {\n            if (absoluteState === null)\n                return null;\n\n\n            var startIndex = absoluteState.indexOf('.');\n            if (startIndex == -1) {\n                return absoluteState;\n            } else if(startIndex == absoluteState.length - 1) {\n                return null;\n            }\n\n            var endIndex = absoluteState.indexOf('.', startIndex + 1);\n            if(endIndex == -1) {\n                return absoluteState.substring(startIndex, absoluteState.length);\n            }\n\n            return absoluteState.substring(0, endIndex);\n        };\n\n\n        var getStateTree = function(absoluteState) {\n            //$log.log(\"return getStateTree\");\n            return {\n                leaf: getLeafState(absoluteState),\n                parent: getParentState(absoluteState),\n                root: getRootState(absoluteState),\n                rootchild: getRootChildState(absoluteState)\n            }\n        };\n\n        var dotState = function(givenState) {\n            return ('.' + givenState);\n        };\n\n\n        return {\n            STATE_HOME : STATE_HOME,\n            STATE_HOME_DASHBOARD : STATE_HOME_DASHBOARD,\n            STATE_HOME_MANAGEMENT : STATE_HOME_MANAGEMENT,\n            STATE_HOME_DOT : STATE_HOME_DOT,\n            STATE_HOME_DASHBOARD_DOT : STATE_HOME_DASHBOARD_DOT,\n            STATE_HOME_MANAGEMENT_DOT : STATE_HOME_MANAGEMENT_DOT,\n            getStateTree : getStateTree,\n            dotState : dotState\n        }\n    }\n\n})();\n\n/**\n * Created by smiddela on 07/09/16.\n */\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('schemaService', schemaService);\n\n    function schemaService($log) {\n        var vm = this;\n        $log.log(\"schemaService\");\n\n\n        // [\"permid\", 'SETTINGS_TAG', {\"schema\":\"schema\"}]\n        var schemaDef = [\n            [\"perm1\", \"SETTINGS_TAG_1\", {\n                // output => <input type=\"number\">\n                \"key1\": {\n                    \"type\": \"number\", \"displayname\": \"Display Name1\", \"displaydesc\": \"This will come in the hint\",\n                    \"select\": null, \"editable\": false, \"default\": null\n                },\n\n\n                // output => <input type=\"text\">\n                \"key2\": {\n                    \"type\": \"text\", \"displayname\": \"Display Name2\", \"displaydesc\": \"This will come in the hint\",\n                    \"select\": null, \"editable\": false, \"default\": 10\n                },\n\n\n                // output => List of numbers in items (Read only)\n                \"key3\": {\n                    \"type\": [\"number\"], \"displayname\": \"Display Name3\", \"displaydesc\": \"This will come in the hint\",\n                    \"select\": null, \"editable\": false, \"default\": [1, 2, 3, 4, 5]\n                },\n\n\n                // output => List of strings in items (Read only)\n                \"key4\": {\n                    \"type\": [\"text\"], \"displayname\": \"Display Name4\", \"displaydesc\": \"This will come in the hint\",\n                    \"select\": null, \"editable\": false, \"default\": ['a', 'b', 'c', 'd']\n                },\n\n\n                // output => List of numbers in items with Add button (Add/Remove anything)\n                \"key5\": {\n                    \"type\": [\"number\"], \"displayname\": \"Display Name3\", \"displaydesc\": \"This will come in the hint\",\n                    \"select\": null, \"editable\": true, \"default\": [1, 2, 3, 4, 5]\n                },\n\n\n                // output => List of strings in items with Add button (Add/Remove anything)\n                \"key6\": {\n                    \"type\": [\"text\"], \"displayname\": \"Display Name4\", \"displaydesc\": \"This will come in the hint\",\n                    \"select\": null, \"editable\": true, \"default\": ['a', 'b', 'c', 'd']\n                },\n\n\n                // output => List of numbers in items with checkboxes (no items are selected at this point in time)\n                \"key7\": {\n                    \"type\": [\"number\"], \"displayname\": \"Display Name7\", \"displaydesc\": \"This will come in the hint\",\n                    \"select\": [0, 1, [1, 3, 9, 27, 81, 243]],\n                    \"editable\": true, \"default\": [3]\n                },\n\n\n                // output => List of strings in items with checkboxes (no items are selected at this point in time)\n                \"key8\": {\n                    \"type\": [\"text\"], \"displayname\": \"Display Name8\", \"displaydesc\": \"This will come in the hint\",\n                    \"select\": [0, 10000, ['a', 'b', 'c']],\n                    \"editable\": true, \"default\": [\"a\", \"c\"]\n                },\n\n\n                // type is object\n                \"key9\": {\n                    \"type\": {\n                        \"level2key1\": {\n                            \"type\": \"number\", \"displayname\": \"Level2 key1\", \"default\": 10, \"editable\": true\n                        },\n                        \"level2key2\": {\n                            \"type\": \"text\", \"displayname\": \"Level2 key2\", \"default\": \"abc\", \"editable\": true\n                        }\n                    },\n                    \"displayname\": \"Key9 Level 2 Keys Array\",\n                    \"select\": null,\n                    \"editable\": false,\n                    \"default\": {\"level2key1\": 100, \"level2key2\": \"200\"},\n                    \"checkfun\": {\n                        \"type\": \"udf\",\n                        \"func\": 'function(inpdataofthisfield, overalldataofthisjson, schemaforthisfield, overallschema)' +\n                        '{return {\"status\":\"FAILURE\", \"errmsg\":\"I havent yet checked it\"}}'\n                    }\n                },\n\n                // type is [object]\n                \"key10\": {\n                    \"type\": [{\n                        \"level2key1\": {\n                            \"type\": \"number\", \"displayname\": \"Level 2 Key1\", \"default\": 10, \"editable\": true\n                        },\n                        \"level2key2\": {\n                            \"type\": \"text\", \"displayname\": \"Level 2 Key2\", \"default\": \"10\", \"editable\": true\n                        }\n                    }],\n                    \"displayname\": \"Key10 Level 2 Keys Array\",\n                    \"select\": null,\n                    \"editable\": false,\n                    \"default\": [{\"level2key1\": 100, \"level2key2\": \"100\"}],\n                    // [{\"level2key1\": 100, \"level2key2\": \"100\"},\n                    // {\"level2key1\": 200, \"level2key2\": \"200\"},\n                    // {\"level2key1\": 300, \"level2key2\": \"300\"}],\n                    \"checkfun\": {\n                        \"type\": \"udf\",\n                        \"func\": 'function(inpdataofthisfield, overalldataofthisjson, schemaforthisfield, overallschema)' +\n                        '{return {\"status\":\"FAILURE\", \"errmsg\":\"I havent yet checked it\"}}'\n                    }\n                },\n\n\n                \"key11\": {\n                    \"type\": {\n                        \"level2key1\": {\n                            \"type\": \"number\", \"displayname\": \"Level2 key1\", \"default\": 10, \"editable\": true\n                        },\n                        \"level2key2\": {\n                            \"type\": \"text\", \"displayname\": \"Level2 key2\", \"default\": \"abc\", \"editable\": true\n                        },\n                        \"level2key3\": {\n                            \"type\": {\n                                \"level3key1\": {\n                                    \"type\": \"number\", \"displayname\": \"Level 3 Key1\", \"default\": 10, \"editable\": true\n                                },\n                                \"level3key2\": {\n                                    \"type\": \"text\", \"displayname\": \"Level 3 Key2\", \"default\": \"10\", \"editable\": true\n                                }\n                            },\n                            \"displayname\": \"Key11 Level 3 Keys Array\",\n                            \"select\": null,\n                            \"editable\": false,\n                            \"default\": {\"level3key1\": 100, \"level3key2\": \"200\"}\n                        }\n                    },\n                    \"displayname\": \"Key11 Level 2 Keys Array\",\n                    \"select\": null,\n                    \"editable\": false,\n                    \"default\": {\n                        \"level2key1\": 100,\n                        \"level2key2\": \"200\",\n                        \"level2key3\": {\"level3key1\": 400, \"level3key2\": \"500\"}\n                    },\n                    \"checkfun\": {\n                        \"type\": \"udf\",\n                        \"func\": 'function(inpdataofthisfield, overalldataofthisjson, schemaforthisfield, overallschema)' +\n                        '{return {\"status\":\"FAILURE\", \"errmsg\":\"I havent yet checked it\"}}'\n                    }\n                },\n\n\n                \"key12\": {\n                    \"type\": {\n                        \"level2key1\": {\n                            \"type\": \"number\", \"displayname\": \"Level2 key1\", \"default\": 10, \"editable\": true\n                        },\n                        \"level2key2\": {\n                            \"type\": \"text\", \"displayname\": \"Level2 key2\", \"default\": \"abc\", \"editable\": true\n                        },\n                        \"level2key3\": {\n                            \"type\": {\n                                \"level3key1\": {\n                                    \"type\": \"number\", \"displayname\": \"Level 3 Key1\", \"default\": 10, \"editable\": true\n                                },\n                                \"level3key2\": {\n                                    \"type\": \"text\", \"displayname\": \"Level 3 Key2\", \"default\": \"10\", \"editable\": true\n                                },\n                                \"level3key3\": {\n                                    \"type\": [{\n                                        \"level4key1\": {\n                                            \"type\": \"number\",\n                                            \"displayname\": \"Level 4 Key1\",\n                                            \"default\": 10,\n                                            \"editable\": true\n                                        },\n                                        \"level4key2\": {\n                                            \"type\": \"text\",\n                                            \"displayname\": \"Level 4 Key2\",\n                                            \"default\": \"10\",\n                                            \"editable\": true\n                                        }\n                                    }],\n                                    \"displayname\": \"Key12 Level 4 Keys Array\",\n                                    \"select\": null,\n                                    \"editable\": false,\n                                    \"default\": [{\"level4key1\": 100, \"level4key2\": \"100\"}],\n                                    \"checkfun\": {\n                                        \"type\": \"udf\",\n                                        \"func\": 'function(inpdataofthisfield, overalldataofthisjson, schemaforthisfield, overallschema)' +\n                                        '{return {\"status\":\"FAILURE\", \"errmsg\":\"I havent yet checked it\"}}'\n                                    }\n                                }\n                            },\n                            \"displayname\": \"Key12 Level 3 Keys Array\",\n                            \"select\": null,\n                            \"editable\": false,\n                            \"default\": {\"level3key1\": 100, \"level3key2\": \"200\"}\n                        }\n                    },\n                    \"displayname\": \"Key12 Level 2 Keys Array\",\n                    \"select\": null,\n                    \"editable\": false,\n                    \"default\": {\"level2key1\": 100, \"level2key2\": \"200\"},\n                    \"checkfun\": {\n                        \"type\": \"udf\",\n                        \"func\": 'function(inpdataofthisfield, overalldataofthisjson, schemaforthisfield, overallschema)' +\n                        '{return {\"status\":\"FAILURE\", \"errmsg\":\"I havent yet checked it\"}}'\n                    }\n                },\n\n\n                \"key13\": {\n                    \"type\": {\n                        \"level2key1\": {\n                            \"type\": \"number\", \"displayname\": \"Level2 key1\", \"default\": 10, \"editable\": true\n                        },\n                        \"level2key2\": {\n                            \"type\": \"text\", \"displayname\": \"Level2 key2\", \"default\": \"abc\", \"editable\": true\n                        },\n                        \"level2key3\": {\n                            \"type\": {\n                                \"level3key1\": {\n                                    \"type\": [\"number\"],\n                                    \"displayname\": \"Level3 key1\",\n                                    \"displaydesc\": \"This will come in the hint\",\n                                    \"select\": [0, 1, [1, 3, 9, 27, 81]],\n                                    \"editable\": true,\n                                    \"default\": [3]\n                                },\n                                \"level3key2\": {\n                                    \"type\": [\"text\"],\n                                    \"displayname\": \"Level3 key2\",\n                                    \"displaydesc\": \"This will come in the hint\",\n                                    \"select\": null,\n                                    \"editable\": true,\n                                    \"default\": ['a', 'b', 'c', 'd']\n                                },\n                                \"level3key3\": {\n                                    \"type\": [\"number\"],\n                                    \"displayname\": \"Level3 key3\",\n                                    \"displaydesc\": \"This will come in the hint\",\n                                    \"select\": null,\n                                    \"editable\": false,\n                                    \"default\": [1, 2, 3, 4, 5]\n                                }\n                            },\n                            \"displayname\": \"Level2 key2\", \"default\": {\"key1\": {}, \"key2\": {}, \"key3\": {}}\n                        },\n                        \"level2key4\": {\n                            \"type\": \"text\", \"displayname\": \"Level2 key2\", \"default\": \"abc\", \"editable\": true\n                        }\n                    },\n                    \"displayname\": \"Key13 Level 2 Keys Array\",\n                    \"select\": null,\n                    \"editable\": false,\n                    \"default\": {\"level2key1\": 100, \"level2key2\": \"200\"},\n                    \"checkfun\": {\n                        \"type\": \"udf\",\n                        \"func\": 'function(inpdataofthisfield, overalldataofthisjson, schemaforthisfield, overallschema)' +\n                        '{return {\"status\":\"FAILURE\", \"errmsg\":\"I havent yet checked it\"}}'\n                    }\n                }\n            }]\n        ];\n\n\n        var schemaData;\n        schemaData = [\n            [\"perm1\", \"SETTINGS_TAG_1\", {\n                \"key1\": 10,\n                \"key2\": \"Ten\",\n                \"key3\": [111, 222, 333, 444, 555, 666, 777, 888, 999],\n                \"key4\": ['aaa', 'bbb', 'ccc'],\n                \"key5\": [101, 102, 103],\n                \"key6\": ['aaa', 'bbb', 'ccc'],\n                \"key7\": [1, 3, 9],\n                \"key8\": ['c', 'a'],\n                \"key9\": {\"level2key1\": \"India\", \"level2key2\": \"New Delhi\"},\n                \"key10\": [{\n                    \"level2key1\": \"passenger\",\n                    \"level2key2\": 7\n                }, {\n                    \"level2key1\": \"goods\",\n                    \"level2key2\": \"8 tonnes\"\n                }, {\n                    \"level2key1\": \"electric\",\n                    \"level2key2\": \"container\"\n                }],\n                \"key11\": {\n                    \"level2key1\": 600,\n                    \"level2key2\": \"700\",\n                    \"level2key3\": {\"level3key1\": 800, \"level3key2\": \"900\"}\n                },\n                \"key12\": {\n                    \"level2key1\": 600, \"level2key2\": \"700\",\n                    \"level2key3\": {\n                        \"level3key1\": \"val1\", \"level3key2\": \"val2\",\n                        \"level3key3\": [{\"level4key1\": 800, \"level4key2\": \"900\"}, {\n                            \"level4key1\": \"700\",\n                            \"level4key2\": \"600\"\n                        }, {\"level4key1\": 1000, \"level4key2\": \"1000\"}]\n                    }\n                },\n                \"key13\": {\n                    \"level2key1\": 600,\n                    \"level2key2\": \"700\",\n                    \"level2key3\": {\"level3key1\": [9, 27, 81], \"level3key2\": [444, 555], \"level3key3\": [777]},\n                    \"level2key4\": \"sometext\"\n                }\n            }]\n        ];\n\n        var PERM = 0;\n        var TAB_NAME = 1;\n        var TAB_SCHEMA = 2;\n\n        var SECTION_TYPE_INVALID = -1;\n        var SECTION_TYPE_PRIMITIVE = 0;\n        var SECTION_TYPE_PRIMITIVE_ARRAY = 1;\n        var SECTION_TYPE_OBJECT = 2;\n        var SECTION_TYPE_OBJECT_ARRAY = 3;\n\n        var ELEMENT_TYPE_NUMBER = 'number';\n        var ELEMENT_TYPE_TEXT = 'text';\n\n        var getPrimitiveType = function (sectionType) {\n            switch (sectionType) {\n                case ELEMENT_TYPE_NUMBER:\n                    return SECTION_TYPE_PRIMITIVE;\n                case ELEMENT_TYPE_TEXT:\n                    return SECTION_TYPE_PRIMITIVE;\n            }\n\n            return SECTION_TYPE_INVALID;\n        };\n\n\n        var getArrayType = function (sectionType) {\n            if (sectionType.constructor === String && getPrimitiveType(sectionType) === SECTION_TYPE_PRIMITIVE)\n                return SECTION_TYPE_PRIMITIVE_ARRAY;\n            else if (sectionType.constructor === Object || sectionType.constructor === Array)\n                return SECTION_TYPE_OBJECT_ARRAY;\n\n            return SECTION_TYPE_INVALID;\n        };\n\n\n        var getSectionType = function (section) {\n            if (section.hasOwnProperty('type')) {\n                var sectionType = section.type;\n                if (sectionType.constructor === String) {\n                    return getPrimitiveType(sectionType);\n                } else if (sectionType.constructor === Object) {\n                    return SECTION_TYPE_OBJECT;\n                } else if (sectionType.constructor === Array) {\n                    if (sectionType.length === 1) {\n                        return getArrayType(sectionType[0]);\n                    }\n                }\n            }\n\n            //$log.log(\"returning INVALID\");\n            return SECTION_TYPE_INVALID;\n        };\n\n\n        var createInputField = function (section, key) {\n            if (section == null)\n                return null;\n\n            return {_schema_uidata: {field: 'icar-input', data: section, key: key}};\n        };\n\n\n        var createReadOnlyList = function (section, key) {\n\n            return {_schema_uidata: {field: 'icar-readonly-list', data: section, key: key}};\n        };\n\n\n        var createEditableList = function (section, key) {\n            return {_schema_uidata: {field: 'icar-editable-list', data: section, key: key}};\n        };\n\n\n        var createSelectList = function (section, key) {\n            return {_schema_uidata: {field: 'icar-select-list', data: section, key: key}};\n        };\n\n\n        var createElement = function (section, key, sectionType) {\n            switch (sectionType) {\n\n                case SECTION_TYPE_PRIMITIVE:\n                    return createInputField(section, key);\n                    break;\n\n                case SECTION_TYPE_PRIMITIVE_ARRAY:\n                    if (section.select) {\n                        return createSelectList(section, key);\n                    } else if (section.default) {\n                        if (!section.editable)\n                            return createReadOnlyList(section, key);\n                        else\n                            return createEditableList(section, key);\n                    }\n                    break;\n\n                default:\n                    return '<span>Unexpected section.type</span>';\n            }\n\n        };\n\n\n        var parseSection = function (section, key) {\n            if (section == null || key == null) {\n                return null;\n            }\n\n            var sectionType = getSectionType(section);\n            if (sectionType === SECTION_TYPE_INVALID) {\n                return null;\n            }\n\n            var sectionComponents;\n            if (sectionType === SECTION_TYPE_PRIMITIVE) {\n                sectionComponents = createElement(section, key, sectionType);\n            } else if (sectionType === SECTION_TYPE_OBJECT) {\n                sectionComponents = {};\n                for (var subSectionKey in section.type) {\n                    var subSection = section.type[subSectionKey];\n                    sectionComponents[subSectionKey] = parseSection(subSection, subSectionKey, sectionType);\n                }\n            } else if (sectionType === SECTION_TYPE_PRIMITIVE_ARRAY || sectionType === SECTION_TYPE_OBJECT_ARRAY) {\n                var tmpSection = angular.copy(section);\n                tmpSection.type = section.type[0];\n\n                var valueList = null;\n                if (!section.select && section.default) {\n                    valueList = section.default;\n                } else if (section.select && section.select.length == 3) {\n                    valueList = section.select[2];\n                }\n\n                if (valueList) {\n                    if (sectionType === SECTION_TYPE_PRIMITIVE_ARRAY) {\n                        sectionComponents = createElement(tmpSection, key, sectionType);\n                    } else if (sectionType === SECTION_TYPE_OBJECT_ARRAY) {\n                        sectionComponents = [];\n                        for (var subSectionKey in valueList) {\n                            sectionComponents.push(parseSection(tmpSection, subSectionKey, sectionType));\n                        }\n                    }\n                }\n            }\n\n            //$log.log(sectionComponents);\n            return sectionComponents;\n        };\n\n\n        var parseSchema = function (schema) {\n            var uiComponents = {};\n            for (var sidx in schema) {\n                var tab = schema[sidx];\n                var tabPerm = tab[PERM];\n                var tabName = tab[TAB_NAME];\n                var tabSchema = tab[TAB_SCHEMA];\n                uiComponents[tabName] = {};\n                for (var key in tabSchema) {\n                    var section = tabSchema[key];\n                    uiComponents[tabName][key] = parseSection(section, key);\n                }\n            }\n            $log.log(uiComponents);\n            return uiComponents;\n        };\n\n\n        var parseSchemaData = function (schema) {\n            var uiComponents = {};\n            for (var sidx in schema) {\n                var tab = schema[sidx];\n                var tabPerm = tab[PERM];\n                var tabName = tab[TAB_NAME];\n                var tabSchema = tab[TAB_SCHEMA];\n                uiComponents[tabName] = {};\n                for (var key in tabSchema) {\n                    var section = tabSchema[key];\n                    uiComponents[tabName][key] = section;\n                }\n            }\n            //$log.log(uiComponents);\n            return uiComponents;\n        };\n\n        var getSchema = function () {\n            return parseSchema(schemaDef);\n        };\n\n\n        var getSchemaData = function () {\n            return parseSchemaData(schemaData);\n        };\n\n\n        var bindDataToSchema = function (schema, data) {\n            for (var idx in data) {\n                var value = data[idx];\n\n                if (value.constructor === Number || value.constructor === String) {\n                    if (idx in schema) {\n                        schema[idx]['_schema_uidata'].data.model = value;\n                        schema[idx]['_schema_uidata'].data.default = schema[idx]['_schema_uidata'].data.model;\n                    }\n                }\n                else if (value.constructor === Object) {\n                    if (idx in schema)\n                        bindDataToSchema(schema[idx], value);\n                } else if (value.constructor === Array) {\n                    if (value.length > 0) {\n                        if (value[0].constructor === Number || value[0].constructor === String) {\n                            for (var didx in value) {\n                                if (idx in schema) {\n                                    if (!('model' in schema[idx]['_schema_uidata'].data)) {\n                                        schema[idx]['_schema_uidata'].data.model = [];\n                                        schema[idx]['_schema_uidata'].data.default = schema[idx]['_schema_uidata'].data.model;\n                                    }\n                                    schema[idx]['_schema_uidata'].data.model.push(value[didx]);\n                                }\n                            }\n                        } else if (value[0].constructor === Object) {\n                            var objectSchema = angular.copy(schema[idx][0]);\n                            schema[idx] = [];\n                            for (var didx in value) {\n                                var objectValue = angular.copy(objectSchema);\n                                schema[idx].push(objectValue);\n                            }\n\n                            for (var didx in value) {\n                                bindDataToSchema(schema[idx][didx], value[didx]);\n                            }\n                        }\n                    }\n                }\n            }\n        };\n\n        return {\n            //parseSchema : parseSchema,\n            getSchema: getSchema,\n            getSchemaData: getSchemaData,\n            bindDataToSchema: bindDataToSchema\n        };\n    }\n})();\n\n\n// email/SMS alerts for leasing executives\n\n/**\n * Created by harshas on 15/11/16.\n */\n\n\n(function() {\n\n    'use strict';\n\n    angular\n        .module('uiplatform')\n        .service('roleService', roleService);\n\n    function roleService ($log, requestService){\n\n        var vm = this;\n\n        vm.encloseBody = function (data) {\n            // return data;\n            return {role:data};\n        };\n\n        vm.assignPermission = function(body) {\n            // $log.log(\"getMyGroups\");\n            body = vm.encloseBody(body);\n            return requestService.firePost('/role/addpermission', body);\n        };\n\n\n        vm.createRole = function(body) {\n            // $log.log(\"getMyGroups\");\n            body = vm.encloseBody(body);\n            return requestService.firePost('/role/create', body);\n        };\n\n\n        vm.rolePermissions = function (body) {\n            body = vm.encloseBody(body);\n            return requestService.firePost('/role/permissions', body);\n        };\n    }\n})();\n\n/**\n * Created by smiddela on 08/08/16.\n */\n(function() {\n\n    'use strict';\n\n    angular\n        .module('uiplatform')\n        .service('requestService', requestService);\n\n    function requestService($log, $http, $q, API_HOST, GEOCODE_API_HOST, authService) {\n        var vm = this;\n        var authListeners = [];\n        var errorStatusCodes = [400, 401, 403];\n\n        $log.log(\"requestService\");\n\n        vm.getToken = function() {\n            return authService.getToken();\n        };\n\n        vm.firePost = function(api, body, auth) {\n            api = API_HOST + api;\n\n            if(body === null)\n                body = {};\n\n            if(auth == null || auth)\n                auth = true;\n            else\n                auth = false;\n\n            if(!auth)\n                return $http.post(api, body);\n\n            if(authService.isAuthed() || api.indexOf('gettoken') > 0) {\n                return $http.post(api, body)\n                    .catch(vm.handleFailure)\n            } else {\n                $log.log(\"user not authenticated\");\n                vm.checkLogin();\n                return $q.reject({'auth': false});\n            }\n        };\n\n\n        vm.fireGet = function(api, auth) {\n            api = API_HOST + api;\n\n            if(auth == null || auth)\n                auth = true;\n            else\n                auth = false;\n\n            if(!auth)\n                return $http.post(api);\n\n            if(authService.isAuthed() || api.indexOf('gettoken') > 0) {\n                return $http.post(api)\n                    .catch(vm.handleFailure)\n            } else {\n                $log.log(\"user not authenticated\");\n                vm.checkLogin();\n                return $q.reject({'auth': false});\n            }\n        };\n\n        vm.fireGeoCode = function(api, body, auth){\n            api = GEOCODE_API_HOST + api;\n            if(body === null)\n                body = {};\n\n            if(auth == null || auth)\n                auth = true;\n            else\n                auth = false;\n\n            if(!auth)\n                return $http.post(api, body);\n\n            if(authService.isAuthed() || api.indexOf('gettoken') > 0) {\n                return $http.post(api, body)\n                    .catch(vm.handleFailure)\n            } else {\n                $log.log(\"user not authenticated\");\n                vm.checkLogin();\n                return $q.reject({'auth': false});\n            }\n        };\n\n        vm.handleFailure = function(resp) {\n            //$log.log(\"API returned error\");\n            //$log.log(resp);\n            if(errorStatusCodes.indexOf(resp.status) != -1) {\n                //$log.log(\"failure status code\");\n                //vm.checkLogin(true);\n            }\n\n            return $q.reject(resp);\n        };\n\n        vm.checkLogin = function(force) {\n            if(!authService.isAuthed() || force) {\n                angular.forEach(authListeners, function(value, key) {\n                    // calling callback\n                    $log.log(\"calling show login\");\n                    value();\n                });\n            }\n        };\n\n        vm.addAuthListener = function(callback) {\n            //$log.log('adding login callback');\n            authListeners.push(callback)\n        };\n\n\n        // If required. It is periodically called from maincontroller to check for valid token\n        // currently disabled in maincontroller\n        vm.isLoginTokenValid = function() {\n            //$log.log(\"isLoginTokenVaild\");\n            vm.checkLogin(false);\n        }\n    }\n\n})();\n\n\n/**\n * Created by smiddela on 18/09/16.\n */\n\n\n(function() {\n\n    'use strict';\n\n    angular\n        .module('uiplatform')\n        .service('reportsService', reportsService);\n\n    function reportsService($log, $http, $q, requestService) {\n        $log.log(\"reportsService\");\n        var vm = this;\n\n        function encloseBody(body) {\n            return {\"reports\":body}\n        }\n\n        vm.handleTrackHistory = function (resp) {\n            if(resp.data && resp.data.data) {\n                return $q.resolve(resp.data.data);\n            }\n            return $q.reject(resp);\n        };\n\n\n        vm.handleFailure = function (resp) {\n            $log.log(resp);\n            $q.reject(resp);\n        };\n\n\n        vm.getDeviceLocation = function(body) {\n            return requestService.firePost('/reports/rtgps/trackhistory', body)\n                .then(vm.handleTrackHistory, vm.handleFailure);\n        };\n\n        vm.getBatteryInfo = function(body) {\n            return requestService.firePost('/reports/battery/trackhistory', body)\n                .then(vm.handleTrackHistory, vm.handleFailure);\n        };\n\n        vm.getGPSLastseen = function(body) {\n            body = encloseBody(body);\n            return requestService.firePost('/reports/rtgps/gpslatest', body);\n        }\n\n\n    }\n\n})();\n/**\n * Created by harshas on 14/11/16.\n */\n\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('permissionService', permissionService);\n\n    function permissionService($log, requestService) {\n        $log.log(\"groupService\");\n        var vm = this;\n\n        vm.permissionMap = function(body) {\n            // $log.log(\"getMyGroups\");\n            return requestService.firePost('/permission/map', body);\n        };\n\n    }\n\n})();\n\n/**\n * Created by harshas on 22/10/16.\n */\n\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('myAlarmService', myAlarmService);\n\n    function myAlarmService($log, $q, requestService) {\n        var vm = this;\n        $log.log(\"myAlarmService\");\n\n\n        vm.handleGetAlarms = function(resp) {\n            if(resp.data && resp.data.data)\n                return $q.resolve(resp.data.data);\n            return $q.reject(resp);\n        };\n\n\n        vm.handleFailure = function (resp) {\n            $log.log(resp);\n            return $q.reject(resp);\n        };\n\n\n        vm.getAlarmInfo = function (body) {\n            var body = {vehicle: body};\n            return requestService.firePost('/reports/rtalarm/trackhistorym', body)\n                .then(vm.handleGetAlarms, vm.handleFailure);\n        };\n\n        vm.subscribe = function (assetpath, flag) {\n            var subscriptionKey = 'gps';\n            var subscriptionMsg = [{path: assetpath}];\n            if (flag) {\n                //intellicarAPI.mqttService.subscribeAsset(asset, subscriptionKey);\n                intellicarAPI.mqttService.subscribe(subscriptionMsg, subscriptionKey);\n            } else {\n                //intellicarAPI.mqttService.unsubscribeAsset(asset, subscriptionKey);\n                intellicarAPI.mqttService.unsubscribe(subscriptionMsg, subscriptionKey);\n            }\n        };\n\n    }\n\n})();\n\n/**\n * Created by smiddela on 28/08/16.\n */\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('mqttService', mqttService);\n\n    function mqttService($log, authService, helperService,\n                         $timeout, MQTT_HOST) {\n        $log.log(\"mqttService\");\n\n        var vm = this;\n        vm.socketiohost = MQTT_HOST;\n        vm.socket = null;\n        vm.toConnect = true;\n        vm.listeners = {};\n        vm.socket = null;\n        vm.subscriptionList = {};\n\n\n        vm.initSocket = function () {\n            //$log.log('mqtt initSocket');\n            if (vm.socket === null && vm.toConnect) {\n                $log.log(\"Trying to connect to MQTT\");\n                vm.connect();\n                vm.socket.on('connect', vm.onConnect);\n                vm.socket.on('close', vm.onClose);\n                vm.toConnect = false;\n            }\n\n            $timeout(vm.initSocket, 5000);\n        };\n\n\n        vm.onConnect = function () {\n            // $log.log('Connected to MQTT onConnect');\n            if (vm.socket !== null) {\n                vm.toConnect = true;\n                vm.sendToken();\n                vm.socket.on('authsuccess', vm.onAuthSuccess);\n                vm.socket.on('authfailure', vm.onAuthFailure);\n                vm.socket.on('mqtt', vm.onReceiveMsg);\n            } else {\n                $log.log(\"mqtt connect error\");\n            }\n        };\n\n\n        vm.connect = function () {\n            //$log.log('mqtt connect');\n            vm.socket = io.connect(vm.socketiohost);\n        };\n\n\n        vm.sendToken = function () {\n            if (vm.socket) {\n                // $log.log('mqtt sendToken');\n                vm.socket.emit('authtoken', authService.getToken());\n            }\n        };\n\n\n        vm.onAuthSuccess = function () {\n            $log.log('mqtt authSuccess');\n\n            for (var key in vm.subscriptionList) {\n                for (var eachitem in vm.subscriptionList[key]) {\n                    vm.subscribeChannel(vm.subscriptionList[key][eachitem], key);\n                }\n            }\n        };\n\n\n        vm.subscribe = function (path, key) {\n            if (!(key in vm.subscriptionList)) {\n                vm.subscriptionList[key] = [];\n            }\n\n            vm.subscriptionList[key].push(path);\n            vm.subscribeChannel(path, key);\n        };\n\n\n        vm.unsubscribe = function (path, key) {\n            var index = vm.subscriptionList.indexOf(path);\n            if (index > -1) {\n                vm.subscriptionList.splice(index, 1);\n                vm.unsubscribeChannel(path, key);\n            }\n        };\n\n\n        vm.subscribeChannel = function (path, key) {\n           //$log.log(\"subscribe: \" + key + \", \" + JSON.stringify(path));\n            var msg = {};\n            msg.data = [];\n            msg.data.push([key, path]);\n            //$log.log(msg);\n            vm.socket.emit('subscribe', msg);\n        };\n\n\n        vm.unsubscribeChannel = function (path, key) {\n            //$log.log(\"unsubscribe: \" + key + \", \" + path);\n            var msg = {};\n            msg.data = [];\n            msg.data.push([key, path]);\n            //$log.log(msg);\n            vm.socket.emit('unsubscribe', msg);\n        };\n\n\n        vm.subscribeAsset = function (path, key) {\n            vm.subscribe(path, key);\n        };\n\n\n        vm.unsubscribeAsset = function (path, key) {\n            vm.unsubscribe(path, key);\n        };\n\n\n\n        vm.getTopicKey = function (msg) {\n            if (msg.length > 0) {\n                var tokens = msg[0].split('/');\n                if (tokens.length > 2)\n                    return tokens[2];\n            }\n\n            return null;\n        };\n\n\n        vm.onReceiveMsg = function (msg) {\n            //$log.log('mqtt onReceiveMsg');\n            //$log.log(JSON.stringify(msg));\n\n            var topicKey = vm.getTopicKey(msg);\n            if (topicKey == null) {\n                $log.log(\"Invalid mqtt msg\");\n                $log.log(msg);\n                return;\n            }\n\n            //$log.log(topicKey);\n            vm.callListeners(msg, topicKey);\n        };\n\n\n        vm.onAuthFailure = function () {\n            $log.log('mqtt authFailure');\n            vm.onClose();\n        };\n\n\n        vm.onClose = function () {\n            $log.log('mqtt onClose');\n            vm.socket.close();\n            vm.socket = null;\n            vm.toConnect = true;\n        };\n\n\n        vm.addListener = function (key, listener) {\n            if (!(key in vm.listeners)) {\n                vm.listeners[key] = [];\n            }\n\n            if (vm.listeners[key].indexOf(listener) === -1) {\n                vm.listeners[key].push(listener);\n                //$log.log(\"mqtt addlistener: \" + key + \", \" + listener);\n            }\n        };\n\n\n        vm.callListeners = function (msg, key) {\n            if (key in vm.listeners) {\n                for (var idx in vm.listeners[key]) {\n                    vm.listeners[key][idx](msg, key);\n                    //$log.log(\"mqtt call listener: \" + key + \", \" + idx);\n                }\n            }\n        };\n\n\n        vm.initSocket();\n\n\n        return {\n            addListener: vm.addListener,\n            subscribeAsset: vm.subscribeAsset,\n            unsubscribeAsset: vm.unsubscribeAsset,\n            subscribe: vm.subscribe,\n            unsubscribe: vm.unsubscribe\n        }\n    }\n\n})();\n\n/**\n * Created by smiddela on 19/08/16.\n */\n\n\n(function() {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('intellicarAPI', function($rootScope, $log, $q,\n                                           appConstants, helperService,\n                                           authService, requestService,\n                                           stateService, treeDataService,\n                                           userService, groupService,\n                                           mqttService, schemaService,\n                                           reportsService,\n                                           anchorSmoothScrollService,\n                                           geofenceService,\n                                           fenceReportService,\n                                           vehicleAPIService,\n                                           geocodeService,\n                                           permissionService, roleService,\n                                           importFileservice, myAlarmService\n                                           ) {\n            var vm = this;\n            $log.log(\"intellicarAPI\");\n\n            return {\n                helperService: helperService,\n                authService: authService,\n                requestService: requestService,\n                stateService: stateService,\n                treeDataService: treeDataService,\n                userService : userService,\n                groupService: groupService,\n                anchorScrollService : anchorSmoothScrollService,\n                appConstants : appConstants,\n                mqttService : mqttService,\n                schemaService : schemaService,\n                reportsService : reportsService,\n                geofenceService : geofenceService,\n                fenceReportService: fenceReportService,\n                vehicleAPIService: vehicleAPIService,\n                geocodeService:geocodeService,\n                permissionService:permissionService,\n                roleService:roleService,\n                importFileservice:importFileservice,\n                myAlarmService : myAlarmService\n            }\n        });\n})();\n\n/**\n * Created by harshas on 15/11/16.\n */\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('importFileservice', importFileservice);\n\n    function importFileservice($rootScope, $log, $q) {\n        var vm = this;\n        $log.log(\"importFileService\");\n\n        vm.JSONToCSVConvertor = function(JSONData, ReportTitle, ShowLabel) {\n            //If JSONData is not an object then JSON.parse will parse the JSON string in an Object\n            var arrData = typeof JSONData != 'object' ? JSON.parse(JSONData) : JSONData;\n\n            var CSV = '';\n            //Set Report title in first row or line\n\n            CSV += ReportTitle + '\\r\\n\\n';\n\n            //This condition will generate the Label/Header\n            if (ShowLabel) {\n                var row = \"\";\n\n                //This loop will extract the label from 1st index of on array\n                for (var index in arrData[0]) {\n\n                    index = index.replace('_', ' ');\n                    //Now convert each value to string and comma-seprated\n                    row += index + ',';\n                }\n\n                row = row.slice(0, -1);\n\n                //append Label row with line break\n                CSV += row + '\\r\\n';\n            }\n\n            //1st loop is to extract each row\n            for (var i = 0; i < arrData.length; i++) {\n                var row = \"\";\n\n                //2nd loop will extract each column and convert it in string comma-seprated\n                for (var index in arrData[i]) {\n                    row += '\"' + arrData[i][index] + '\",';\n                }\n\n                row.slice(0, row.length - 1);\n\n                //add a line break after each row\n                CSV += row + '\\r\\n';\n            }\n\n            if (CSV == '') {\n                alert(\"Invalid data\");\n                return;\n            }\n\n            //Generate a file name\n            var fileName = \"\";\n            //this will remove the blank-spaces from the title and replace it with an underscore\n            fileName = ReportTitle.replace(/ /g,\"_\");\n\n            //Initialize file format you want csv or xls\n            var uri = 'data:text/csv;charset=utf-8,' + escape(CSV);\n\n            // Now the little tricky part.\n            // you can use either>> window.open(uri);\n            // but this will not work in some browsers\n            // or you will not get the correct file extension\n\n            //this trick will generate a temp <a /> tag\n            var link = document.createElement(\"a\");\n            link.href = uri;\n\n            //set the visibility hidden so it will not effect on your web-layout\n            link.style.cssText += \";visibility:hidden\";\n            link.download = fileName + \".csv\";\n\n            //this part will append the anchor tag and remove it after automatic click\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n        }\n\n    }\n})();\n\n/**\n * Created by smiddela on 23/08/16.\n */\n\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('helperService', helperService);\n\n    function helperService($rootScope, $log, $q, appConstants) {\n        var vm = this;\n        $log.log(\"helperService\");\n\n        var SLASH = '/';\n        var ROOT_GROUP = '/1/1';\n        var ASSET_PATH = 'assetpath';\n        var ASSET_ID = 'assetid';\n        var PGROUP_PATH = 'pgrouppath';\n        var PGROUP_ID = 'pgroupid';\n        var UI_ASSET_TYPE = 'ui_asset_type';\n\n        // should be same as defined in backend\n        vm.assetTypeIdToAssetType = {\n            '1': appConstants.GROUP,\n            '2': appConstants.USER,\n            '3': appConstants.ROLE,\n            '4': appConstants.VEHICLE,\n            '5': appConstants.VEHICLETYPE,\n            '6': appConstants.DEVICE,\n            '7': appConstants.DEVICETYPE,\n            '15': appConstants.FENCE,\n            '17': appConstants.FENCEREPORT\n        };\n\n\n        // generating reverse lookup\n        vm.assetTypeToAssetTypeId = function () {\n            var assetTypeToAssetTypeId = {};\n            for (var idx in vm.assetTypeIdToAssetType) {\n                assetTypeToAssetTypeId[vm.assetTypeIdToAssetType[idx]] = idx;\n            }\n            return assetTypeToAssetTypeId;\n        }();\n\n\n        vm.getPathId = function (path) {\n            if (path == null)\n                return null;\n\n            return parseInt(path.substring(path.lastIndexOf(SLASH) + 1));\n        };\n\n\n        vm.getAssetId = function (asset) {\n            if (asset == null)\n                return null;\n\n            if (ASSET_ID in asset)\n                return asset.assetid;\n\n            if (!(ASSET_PATH in asset))\n                return null;\n\n            return vm.getPathId(asset.assetpath);\n        };\n\n\n        vm.getParentPath = function (asset) {\n            if (asset == null)\n                return null;\n\n            if (PGROUP_PATH in asset)\n                return asset.pgrouppath;\n\n            if (!(ASSET_PATH in asset))\n                return null;\n\n            var assetpath = asset.assetpath;\n\n            if (assetpath == null)\n                return null;\n\n            if (assetpath === ROOT_GROUP)\n                return ROOT_GROUP;\n\n            var count = 0;\n            for (var idx = assetpath.length - 1; idx > 0; idx--) {\n                if (assetpath.charAt(idx) === SLASH) {\n                    if (++count === 2)\n                        break;\n                }\n            }\n            return assetpath.substring(0, idx);\n        };\n\n        vm.getParentFromPath = function (assetpath) {\n\n            if (assetpath == null)\n                return null;\n\n            if (assetpath === ROOT_GROUP)\n                return ROOT_GROUP;\n\n            var count = 0;\n            for (var idx = assetpath.length - 1; idx > 0; idx--) {\n                if (assetpath.charAt(idx) === SLASH) {\n                    if (++count === 2)\n                        break;\n                }\n            }\n            return assetpath.substring(0, idx);\n        };\n\n\n        vm.getParentId = function (asset) {\n            if (asset == null)\n                return null;\n\n            if (PGROUP_ID in asset)\n                return asset.pgroupid;\n\n            return vm.getPathId(vm.getParentPath(asset));\n        };\n\n\n        vm.getAssetTypeId = function (asset) {\n            if (asset == null)\n                return null;\n\n            var pgrouppath = vm.getParentPath(asset);\n            if (pgrouppath == null)\n                return null;\n\n            if (pgrouppath === ROOT_GROUP && asset.assetpath == ROOT_GROUP)\n                return '1';\n\n            return asset.assetpath.substring(pgrouppath.length + 1, asset.assetpath.lastIndexOf(SLASH));\n        };\n\n\n        vm.getAssetType = function (asset) {\n            if (asset == null)\n                return null;\n\n            if (UI_ASSET_TYPE in asset)\n                return asset.ui_asset_type;\n\n            var assetTypeId = vm.getAssetTypeId(asset);\n            if (assetTypeId == null)\n                return null;\n\n            return vm.assetTypeIdToAssetType[assetTypeId];\n        };\n\n\n        vm.getAssetPath = function (asset) {\n            if (asset == null)\n                return null;\n\n            if (ASSET_PATH in asset)\n                return asset.assetpath;\n\n            return null;\n        };\n\n\n        vm.getAssetPathLevel = function (path) {\n            if (path == null)\n                return null;\n\n            return (path.split(SLASH).length - 1) / 2;\n        };\n\n\n        vm.getAssetLevel = function (asset) {\n            if (asset == null)\n                return null;\n\n            if (ASSET_PATH in asset) {\n                return vm.getAssetPathLevel(asset.assetpath);\n            }\n        };\n\n\n        vm.addAssetInfo = function (asset) {\n            if (asset == null)\n                return null;\n\n            asset.assetid = vm.getAssetId(asset);\n            asset.pgrouppath = vm.getParentPath(asset);\n            asset.pgroupid = vm.getParentId(asset);\n            asset.ui_asset_type = vm.getAssetType(asset);\n            asset.assetlevel = vm.getAssetLevel(asset);\n        };\n\n\n        vm.mergeAssetPermissions = function (resp) {\n            var data = resp.data.data;\n            for (var idx in data.assets) {\n                var asset = data.assets[idx];\n                vm.addAssetInfo(asset);\n                for (var pidx in data.permissions) {\n                    var permission = data.permissions[pidx];\n                    if (asset.assetpath == permission.assetpath) {\n                        asset.permissions = JSON.parse(permission.permid);\n                    }\n                }\n            }\n\n            return $q.resolve(resp);\n        };\n\n        vm.mergeUserPermissions = function (resp){\n            // $log.log(resp);\n            var usersList = [];\n            var data = resp[0].data.data;\n            for ( var idx in data.assets){\n                var asset = data.assets[idx];\n                for ( var perm in data.permissions){\n                    var permission = data.permissions[perm];\n                    if ( asset.assetpath == permission.assetpath){\n                        usersList.push({\n                            assetpath:asset.assetpath,\n                            name:asset.name,\n                            pname:asset.pname,\n                            assetid:permission.assetid,\n                            permid:permission.permid\n                        });\n                    }\n                }\n            }\n            return $q.resolve(usersList);\n        };\n\n\n        vm.mergeAssetAssignments = function (resp) {\n            //$log.log(resp);\n            var data = resp.data.data;\n            var asset = data.asset[0];\n            asset.info = data.info;\n            asset.assg = data.assg;\n            asset.assginfo = data.assginfo;\n            asset.permissions = JSON.parse(data.permissions[0].permid);\n            //$log.log(asset);\n            return $q.resolve(asset);\n        };\n\n\n        vm.mergeFenceInfo = function (resp) {\n            var data = resp.data.data;\n            for (var idx in data.assets) {\n                var asset = data.assets[idx];\n                asset.info = [];\n                for (var pidx in data.info) {\n                    var item = data.info[pidx];\n                    if (asset.assetpath == item.assetpath) {\n                        asset.info.push(item);\n                    }\n                }\n            }\n\n            return $q.resolve(resp);\n        };\n\n\n        vm.makeAssetMap = function (resp) {\n            var data = resp.data.data;\n            var assets = {};\n            for (var idx in data.assets) {\n                var asset = data.assets[idx];\n                assets[asset.assetpath] = asset;\n            }\n\n            return $q.resolve(assets);\n        };\n\n\n        vm.makeAssetList = function (resp) {\n            var data = resp.data.data;\n            var assets = [];\n            for (var idx in data.assets) {\n                var asset = data.assets[idx];\n                asset.id = data.assets[idx].assetid;\n                assets.push(asset);\n            }\n            return $q.resolve(assets);\n        };\n\n\n        vm.makeMapOnAssetPath = function (resp) {\n            // diff with makeAssetMap is that this function\n            // is directly reading from the array\n            var data = resp.data.data;\n            var assets = {};\n            for (var idx in data) {\n                var asset = data[idx];\n                vm.addAssetInfo(asset);\n                assets[asset.assetpath] = asset;\n            }\n            return $q.resolve(assets);\n        };\n\n\n        vm.sortOnAssetLevel = function (hashObj) {\n            var arrayObj = [];\n            for (var idx in hashObj) {\n                arrayObj.push(hashObj[idx]);\n            }\n\n            function compare(a, b) {\n                return a.info.assetlevel - b.info.assetlevel;\n            }\n\n            arrayObj.sort(compare);\n\n            return arrayObj;\n        };\n\n\n        vm.getNextPathItemEnd = function (str, start) {\n            var slash = '/';\n\n            if (str === null)\n                return -1;\n\n            if (start === null)\n                start = 0;\n\n            if (start < 0 || start >= str.length)\n                return -1;\n\n            if (str.charAt(start) !== slash)\n                return -1;\n\n            if (str.substr(start, str.length).length < 4)\n                return -1;\n\n            var firstSlash = str.indexOf(slash, start + 1);\n            if (firstSlash != -1 && firstSlash < str.length - 1) {\n                var secondSlash = str.indexOf(slash, firstSlash + 1);\n                if (secondSlash != -1) {\n                    return secondSlash - 1;\n                } else {\n                    return str.length - 1;\n                }\n            }\n\n            return -1;\n        };\n\n\n        vm.getNodesInPath = function (path) {\n            if (angular.isUndefined(path))\n                return [];\n\n            var nodesInPath = [];\n            var startIndex = 0;\n            var endIndex = 0;\n            var itemStartIndex = 0;\n            //$log.log(\"==================\" + path);\n            while (itemStartIndex < path.length) {\n                endIndex = vm.getNextPathItemEnd(path, itemStartIndex);\n                if (endIndex == -1)\n                    return null;\n                //$log.log(\"endIndex \" + endIndex);\n                if (endIndex < path.length) {\n                    nodesInPath.push(path.substring(startIndex, endIndex + 1));\n                }\n                itemStartIndex = endIndex + 1;\n            }\n            //$log.log(nodesInPath);\n            return nodesInPath;\n        };\n\n\n        JSON.flatten = function (data) {\n            var result = {};\n\n            function recurse(cur, prop) {\n                if (Object(cur) !== cur) {\n                    result[prop] = cur;\n                } else if (Array.isArray(cur)) {\n                    for (var i = 0, l = cur.length; i < l; i++)\n                        recurse(cur[i], prop + \"[\" + i + \"]\");\n                    if (l == 0)\n                        result[prop] = [];\n                } else {\n                    var isEmpty = true;\n                    for (var p in cur) {\n                        isEmpty = false;\n                        recurse(cur[p], prop ? prop + \".\" + p : p);\n                    }\n                    if (isEmpty && prop)\n                        result[prop] = {};\n                }\n            }\n\n            recurse(data, \"\");\n            return result;\n        };\n\n\n        JSON.flatten2 = function (data) {\n            var result = {};\n\n            function recurse(cur, prop) {\n                if (Object(cur) !== cur) {\n                    result[prop] = cur;\n                } else if (Array.isArray(cur)) {\n                    for (var i = 0, l = cur.length; i < l; i++) {\n                        if (typeof cur[i] === 'object') {\n                            recurse(cur[i], prop + \"[\" + i + \"]\");\n                        }\n                        else {\n                            if (i == 0) {\n                                result[prop] = [];\n                            }\n                            result[prop].push(cur[i]);\n                        }\n                    }\n                    if (l == 0)\n                        result[prop] = [];\n                } else {\n                    var isEmpty = true;\n                    for (var p in cur) {\n                        isEmpty = false;\n                        recurse(cur[p], prop ? prop + \".\" + p : p);\n                    }\n                    if (isEmpty && prop)\n                        result[prop] = {};\n                }\n            }\n\n            recurse(data, \"\");\n            return result;\n        };\n\n\n        JSON.unflatten = function (data) {\n            \"use strict\";\n            if (Object(data) !== data || Array.isArray(data))\n                return data;\n            var regex = /\\.?([^.\\[\\]]+)|\\[(\\d+)\\]/g,\n                resultholder = {};\n            for (var p in data) {\n                var cur = resultholder,\n                    prop = \"\",\n                    m;\n                while (m = regex.exec(p)) {\n                    cur = cur[prop] || (cur[prop] = (m[2] ? [] : {}));\n                    prop = m[2] || m[1];\n                }\n                cur[prop] = data[p];\n            }\n            return resultholder[\"\"] || resultholder;\n        };\n    }\n})();\n\n/**\n * Created by smiddela on 19/08/16.\n */\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('groupService', groupService);\n\n    function groupService($rootScope, $log, $q, requestService, helperService, userService) {\n        $log.log(\"groupService\");\n        var vm = this;\n\n        vm.encloseBody = function (data) {\n            // return data;\n            return {group:data};\n        };\n\n\n        vm.getMyGroups = function(body) {\n            // $log.log(\"getMyGroups\");\n            body = vm.encloseBody(body);\n            return requestService.firePost('/group/mygroups', body);\n        };\n\n\n        vm.getMyAssetGroups = function (body) {\n            // $log.log(\"getMyAssetGroups\");\n            body = vm.encloseBody(body);\n            return requestService.firePost('/group/myassetgroups', body);\n        };\n\n\n        vm.getMyVehicles = function (body) {\n            // $log.log(\"getMyVehicles\");\n            body = vm.encloseBody(body);\n            return requestService.firePost('/group/myvehicles', body);\n        };\n\n\n        vm.getMyUsers = function (body) {\n            // $log.log(\"getMyUsers\");\n            body = vm.encloseBody(body);\n            return requestService.firePost('/group/myusers', body);\n        };\n\n        vm.getAssignedUsers = function (body) {\n            // $log.log(\"getMyUsers\");\n            body = vm.encloseBody(body);\n            return requestService.firePost('/group/assignedusers', body);\n        };\n\n\n        vm.getMyRoles = function (body) {\n            // $log.log(\"getMyRoles\");\n            body = vm.encloseBody(body);\n            return requestService.firePost('/group/myroles', body);\n        };\n\n\n        vm.getAssignedRoles = function (body) {\n            // $log.log(\"getMyRoles\");\n            body = vm.encloseBody(body);\n            return requestService.firePost('/group/assignedroles', body);\n        };\n\n\n        vm.getMyDevices = function (body) {\n            // $log.log(\"getMyDevices\");\n            body = vm.encloseBody(body);\n            return requestService.firePost('/group/mydevices', body);\n        };\n\n\n        vm.createGroup = function(body) {\n            body = vm.encloseBody(body);\n            return requestService.firePost('/group/create', body);\n        };\n\n\n        vm.assignRole = function(body) {\n            body = vm.encloseBody(body);\n            return requestService.firePost('/group/assignrole', body);\n        };\n\n\n        vm.deAssignRole = function(body) {\n            body = vm.encloseBody(body);\n            return requestService.firePost('/group/deassignrole', body);\n        };\n\n\n        vm.handleResponse = function (resp) {\n            //$log.log(\"handleResponse\");\n            return $q.resolve(resp);\n        };\n\n\n        vm.handleFailure = function (resp) {\n            //$log.log(\"handleFailure \");\n            return $q.reject(resp);\n        };\n\n\n        vm.getMyGroupsMap = function(body) {\n            // $log.log(\"getMyGroupsMap\");\n            return vm.getMyGroups(body)\n                .then(helperService.mergeAssetPermissions, vm.handleFailure)\n                .then(helperService.makeAssetMap, vm.handleFailure)\n                .then(vm.handleResponse, vm.handleFailure);\n        };\n\n\n        vm.getMyAssetGroupsMap = function(body) {\n            //$log.log(\"getMyAssetGroupsMap\");\n            return vm.getMyAssetGroups(body)\n                .then(helperService.mergeAssetPermissions, vm.handleFailure)\n                .then(helperService.makeAssetMap, vm.handleFailure)\n                .then(vm.handleResponse, vm.handleFailure);\n        };\n\n\n        vm.getMyVehiclesMap = function (body) {\n            //$log.log(\"getMyVehiclesMap\");\n            return vm.getMyVehicles(body)\n                .then(helperService.mergeAssetPermissions, vm.handleFailure)\n                .then(helperService.makeAssetMap, vm.handleFailure)\n                .then(vm.handleResponse, vm.handleFailure);\n        };\n\n\n        vm.getMyUsersMap = function (body) {\n            //$log.log(\"getMyUsersMap\");\n            return vm.getMyUsers(body)\n                .then(helperService.mergeAssetPermissions, vm.handleFailure)\n                .then(helperService.makeAssetMap, vm.handleFailure)\n                .then(vm.handleResponse, vm.handleFailure);\n        };\n\n        vm.getMyUsersMapList = function (body) {\n            //$log.log(\"getMyUsersMap\");\n            return vm.getMyUsers(body)\n                .then(helperService.mergeAssetPermissions, vm.handleFailure)\n                .then(helperService.makeAssetList, vm.handleFailure)\n                .then(vm.handleResponse, vm.handleFailure);\n        };\n\n\n        vm.getAssignedUsersMapList = function (body) {\n            //$log.log(\"getMyUsersMap\");\n            return vm.getAssignedUsers(body)\n                .then(helperService.mergeAssetPermissions, vm.handleFailure)\n                .then(helperService.makeAssetList, vm.handleFailure)\n                .then(vm.handleResponse, vm.handleFailure);\n        };\n\n\n\n\n        vm.getMyRolesMap = function (body) {\n            // $log.log(\"getMyRolesMap\");\n            return vm.getMyRoles(body)\n                .then(helperService.mergeAssetPermissions, vm.handleFailure)\n                .then(helperService.makeAssetMap, vm.handleFailure)\n                .then(vm.handleResponse, vm.handleFailure);\n        };\n\n        vm.getMyRolesList = function (body) {\n            // $log.log(\"getMyRolesMap\");\n            return vm.getMyRoles(body)\n                .then(helperService.mergeAssetPermissions, vm.handleFailure)\n                .then(helperService.makeAssetList, vm.handleFailure)\n                .then(vm.handleResponse, vm.handleFailure);\n        };\n\n        vm.getAssignedRolesList = function (body) {\n            // $log.log(\"getMyRolesMap\");\n            return vm.getAssignedRoles(body)\n                .then(helperService.mergeAssetPermissions, vm.handleFailure)\n                .then(helperService.makeAssetList, vm.handleFailure)\n                .then(vm.handleResponse, vm.handleFailure);\n        };\n\n\n        vm.getMyDevicesMap = function (body) {\n            // $log.log(\"getMyDevicesMap\");\n            return vm.getMyDevices(body)\n                .then(helperService.mergeAssetPermissions, vm.handleFailure)\n                .then(helperService.makeAssetMap, vm.handleFailure)\n                .then(vm.handleResponse, vm.handleFailure);\n        };\n\n\n        vm.handleDirectAssetResponse = function(resp) {\n            $log.log(\"groupService handleDirectAssetResponse\");\n            // $log.log(resp);\n            return $q.resolve(resp);\n        };\n\n\n        vm.getMyDirectAssetsMapWithUser = function (body) {\n            //$log.log(\"groupService getMyDirectAssetsMap\");\n            var gPromise = vm.getMyGroupsMap(body);\n            var vPromise = vm.getMyVehiclesMap(body);\n            var uPromise = vm.getMyUsersMap(body);\n            var rPromise = vm.getMyRolesMap(body);\n            var dPromise = vm.getMyDevicesMap(body);\n            var myPromise = userService.getMyInfoMap(body);\n\n            return $q.all([gPromise, vPromise, uPromise, rPromise, dPromise, myPromise])\n                .then(vm.handleDirectAssetResponse, vm.handleFailure);\n\n        };\n\n\n        vm.getMyDirectAssetsMap = function (body) {\n            //$log.log(\"groupService getMyDirectAssetsMap\");\n            var gPromise = vm.getMyGroupsMap(body);\n            var vPromise = vm.getMyVehiclesMap(body);\n            var uPromise = vm.getMyUsersMap(body);\n            var rPromise = vm.getMyRolesMap(body);\n            var dPromise = vm.getMyDevicesMap(body);\n\n            return $q.all([gPromise, vPromise, uPromise, rPromise, dPromise])\n                .then(vm.handleDirectAssetResponse, vm.handleFailure);\n\n        };\n\n\n        vm.createNewGroup = function (groupName){\n            $log.log(groupName);\n            return 'success';\n        } ;\n    }\n})();\n\n/**\n * Created by smiddela on 28/09/16.\n */\n\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('geofenceService', geofenceService);\n\n    function geofenceService($log, $q, requestService, helperService) {\n        var vm = this;\n        $log.log(\"geofenceService\");\n\n\n        vm.getFenceInfo = function (body) {\n            var reqbody = {geofence: body};\n            return requestService.firePost('/geofence/info', reqbody);\n        };\n\n\n        vm.handleTrackHistory = function (resp) {\n            if(resp.data && resp.data.data)\n                return $q.resolve(resp.data.data);\n            return $q.reject(resp);\n        };\n\n\n        vm.handleFailure = function (resp) {\n            $log.log(resp);\n            $q.reject(resp);\n        };\n\n        vm.getReportHistory = function (body) {\n            var reqbody = {fenceinfo: body};\n            return requestService.firePost('/reports/rtfence/trackhistory', reqbody);\n                //.then(vm.handleTrackHistory, vm.handleFailure);\n        };\n\n\n        // vm.mergeAssetData = function (resp) {\n        //     //$log.log(resp);\n        //     if(resp.data  && resp.data.data) {\n        //         var asset = resp.data.data.asset[0];\n        //         asset.info = resp.data.data.info;\n        //         asset.assg = resp.data.data.assg;\n        //         asset.assginfo = resp.data.data.assginfo;\n        //         asset.permissions = resp.data.data.permissions;\n        //         //$log.log(asset);\n        //         return asset;\n        //     }\n        //\n        //     return $q.reject(resp);\n        // };\n\n\n        vm.getFenceInfoMap = function (body) {\n            return vm.getFenceInfo(body)\n            //.then(vm.mergeAssetData, vm.handleFailure);\n                .then(helperService.mergeAssetAssignments, vm.handleFailure);\n        };\n    }\n\n})();\n\n/**\n * Created by harshas on 7/11/16.\n */\n\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('geocodeService', geocodeService);\n\n    function geocodeService($log, requestService, $q) {\n        var vm = this;\n        $log.log(\"geocodeService\");\n\n\n        var handleGetAddress = function(resp) {\n            if (resp.data && resp.data.data && resp.data.data.length) {\n                //$log.log(resp.data.data);\n                return $q.resolve(resp.data.data);\n            }\n            return $q.reject(resp);\n        };\n\n\n        var handleGetAddressFailure = function (resp) {\n            $log.log(resp);\n            return $q.reject(resp);\n        };\n\n\n        vm.getAddress = function(body){\n            body = {data: body};\n            return requestService.fireGeoCode('/geocodeint', body)\n                .then(handleGetAddress, handleGetAddressFailure);\n        }\n    }\n})();\n\n/**\n * Created by smiddela on 02/10/16.\n */\n\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('fenceReportService', fenceReportService);\n\n    function fenceReportService($log, $q, requestService, helperService) {\n        var vm = this;\n        $log.log(\"fenceReportService\");\n\n\n        vm.getGoefenceReportInfo = function (body) {\n            var reqbody = {geofencereport: body};\n            return requestService.firePost('/geofencereport/info', reqbody);\n        };\n\n\n        vm.getGeofenceReportInfoMap = function (body) {\n            return vm.getGoefenceReportInfo(body)\n                .then(helperService.mergeAssetAssignments, vm.handleFailure);\n        };\n\n\n        vm.handleResponse = function (resp) {\n            //$log.log(resp);\n            return $q.resolve(resp);\n        };\n\n\n        vm.handleFailure = function (resp) {\n            return $q.reject(resp);\n        };\n    }\n\n})();\n/**\n * Created by smiddela on 21/08/16.\n */\n\n(function() {\n\n    'use strict';\n\n    angular\n        .module('uiplatform')\n        .constant('API_HOST', 'http://in2.intellicar.in:10104')\n        .constant('MQTT_HOST', 'http://in2.intellicar.in:10105')\n        .constant('GEOCODE_API_HOST', 'http://maps.intellicar.in:8082')\n        .constant('TOKEN_KEY', 'JWT_TOKEN_KEY')\n        .service('authService', authService)\n        .factory('authInterceptor', authInterceptor)\n        .config(function($httpProvider) {\n            $httpProvider.interceptors.push('authInterceptor');\n        });\n\n\n    function authService($window, $log, TOKEN_KEY) {\n        var  vm = this;\n        $log.log(\"authService\");\n\n        vm.parseJwt = function (token) {\n            //$log.log(token);\n            var base64Url = token.split('.')[1];\n            var base64 = base64Url.replace('-', '+').replace('_', '/');\n            return angular.fromJson($window.atob(base64));\n        };\n\n        vm.saveToken = function (token) {\n            $window.localStorage[TOKEN_KEY] = token;\n        };\n\n        vm.getToken = function () {\n            return $window.localStorage[TOKEN_KEY];\n        };\n\n        vm.isAuthed = function () {\n            var token = vm.getToken();\n            if (token) {\n                var params = vm.parseJwt(token);\n                return Math.round(new Date().getTime() / 1000) <= params.exp;\n            } else {\n                return false;\n            }\n        };\n\n        vm.logout = function () {\n            $window.localStorage.removeItem(TOKEN_KEY);\n        }\n    }\n\n\n    function authInterceptor($log, API_HOST, authService) {\n        return {\n            // automatically attach Authorization header\n            request: function(config) {\n                //$log.log(config);\n                if(config.url.indexOf(API_HOST) === 0) {\n                    if (config.method == 'POST') {\n                        if (!(config.url.indexOf('gettoken') > 0)) {\n                            config.data.token = authService.getToken();\n                        }\n                    } else if(config.method == 'GET') {\n                        //config.headers.Authorization = 'Bearer ' + authService.getToken();\n                    }\n                }\n\n                return config;\n            },\n\n            // If a token was sent back, save it\n            response: function(res) {\n                //$log.log(res);\n                if(res.data && res.data.data) {\n                    //$log.log(res.data.data.token);\n                    if (res.config.url.indexOf(API_HOST) === 0 && res.data.data.token) {\n                        authService.saveToken(res.data.data.token);\n                    }\n                }\n\n                return res;\n            }\n\n            // responseError: function(res) {\n            //     $log.log('interceptor');\n            //     $log.log(res);\n            // }\n        }\n    }\n\n})();\n\n/**\n * Created by smiddela on 14/12/16.\n */\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('assetAPIService', assetAPIService);\n\n    function assetAPIService($rootScope, $log, $q, requestService, helperService) {\n        $log.log(\"assetAPIService\");\n        var vm = this;\n\n        vm.encloseBody = function (data) {\n            return {asset: data};\n        };\n\n\n        vm.getMyAssets = function (body, assettype) {\n            body.assettype = assettype;\n\n            if(!('grouppath' in body)) {\n                body.grouppath = '/1/1';\n            }\n            \n            body = vm.encloseBody(body);\n            return requestService.firePost('/asset/myassets', body);\n        };\n\n\n        vm.getMyGroups = function(body) {\n            return vm.getMyAssets(body, appConstants.GROUP);\n        };\n\n\n        vm.getMyUsers = function(body) {\n            return vm.getMyAssets(body, appConstants.USER);\n        };\n\n\n        vm.getMyRoles = function(body) {\n            return vm.getMyAssets(body, appConstants.ROLE);\n        };\n\n\n        vm.getMyVehicles = function(body) {\n            return vm.getMyAssets(body, appConstants.VEHICLE);\n        };\n\n\n        vm.getMyDevices = function(body) {\n            return vm.getMyAssets(body, appConstants.DEVICE);\n        };\n    }\n\n})();\n\n/**\n * Created by smiddela on 08/08/16.\n */\n(function () {\n\n    'use strict';\n\n    angular\n        .module('uiplatform')\n        .service('anchorSmoothScrollService', anchorSmoothScrollService);\n\n    function anchorSmoothScrollService($log, $q, $timeout) {\n        var vm = this;\n        vm.scrollTo = function(eID) {\n            var startY = currentYPosition();\n            var stopY = elmYPosition(eID);\n            var distance = stopY > startY ? stopY - startY : startY - stopY;\n            if (distance < 100) {\n                scrollTo(0, stopY);\n                return;\n            }\n            var speed = Math.round(distance / 100);\n            if (speed >= 20) speed = 20;\n            var step = Math.round(distance / 25);\n            var leapY = stopY > startY ? startY + step : startY - step;\n            var timer = 0;\n            if (stopY > startY) {\n                for (var i = startY; i < stopY; i += step) {\n                    // setTimeout(\"window.scrollTo(0, \" + leapY + \")\", timer * speed);\n                    $timeout(\"window.scrollTo(0, \" + leapY + \")\", timer * speed);\n                    leapY += step;\n                    if (leapY > stopY) leapY = stopY;\n                    timer++;\n                }\n                return;\n            }\n            for (var i = startY; i > stopY; i -= step) {\n                // setTimeout(\"window.scrollTo(0, \" + leapY + \")\", timer * speed);\n                $timeout(\"window.scrollTo(0, \" + leapY + \")\", timer * speed);\n                leapY -= step;\n                if (leapY < stopY) leapY = stopY;\n                timer++;\n            }\n\n            function currentYPosition() {\n                // Firefox, Chrome, Opera, Safari\n                if (self.pageYOffset) return self.pageYOffset;\n                // Internet Explorer 6 - standards mode\n                if (document.documentElement && document.documentElement.scrollTop)\n                    return document.documentElement.scrollTop;\n                // Internet Explorer 6, 7 and 8\n                if (document.body.scrollTop) return document.body.scrollTop;\n                return 0;\n            }\n\n            function elmYPosition(eID) {\n                var elm = document.getElementById(eID);\n                var y = elm.offsetTop;\n                var node = elm;\n                while (node.offsetParent && node.offsetParent != document.body) {\n                    node = node.offsetParent;\n                    y += node.offsetTop;\n                }\n                return y;\n            }\n        };\n    }\n\n})();\n\n\n\n/*(function(){\n    'use strict';\n\n    angular\n        .module('uiplatform')\n        .service('anchorSmoothScrollService', anchorSmoothScrollService);\n\n    function anchorSmoothScrollService ($log){\n        var vm = this;\n\n        vm.scrollTo = function(eID) {\n            var startY = currentYPosition();\n            var stopY = elmYPosition(eID);\n            var distance = stopY > startY ? stopY - startY : startY - stopY;\n            if (distance < 100) {\n                scrollTo(0, stopY); return;\n            }\n            var speed = Math.round(distance / 100);\n            if (speed >= 20) speed = 20;\n            var step = Math.round(distance / 25);\n            var leapY = stopY > startY ? startY + step : startY - step;\n            var timer = 0;\n            if (stopY > startY) {\n                for ( var i=startY; i<stopY; i+=step ) {\n                    setTimeout(\"window.scrollTo(0, \"+leapY+\")\", timer * speed);\n                    leapY += step; if (leapY > stopY) leapY = stopY; timer++;\n                } return;\n            }\n            for ( var i=startY; i>stopY; i-=step ) {\n                setTimeout(\"window.scrollTo(0, \"+leapY+\")\", timer * speed);\n                leapY -= step; if (leapY < stopY) leapY = stopY; timer++;\n            }\n\n            function currentYPosition() {\n                // Firefox, Chrome, Opera, Safari\n                if (self.pageYOffset) return self.pageYOffset;\n                // Internet Explorer 6 - standards mode\n                if (document.documentElement && document.documentElement.scrollTop)\n                    return document.documentElement.scrollTop;\n                // Internet Explorer 6, 7 and 8\n                if (document.body.scrollTop) return document.body.scrollTop;\n                return 0;\n            }\n\n            function elmYPosition(eID) {\n                var elm = document.getElementById(eID);\n                var y = elm.offsetTop;\n                var node = elm;\n                while (node.offsetParent && node.offsetParent != document.body) {\n                    node = node.offsetParent;\n                    y += node.offsetTop;\n                } return y;\n            }\n\n        };\n    }\n});\n*/\n\n/**\n * Created by smiddela on 09/09/16.\n */\n\n\n\n(function () {\n\n    angular\n        .module('uiplatform')\n        .directive('readOnlyList', readOnlyList);\n\n    function readOnlyList($log, $mdDialog) {\n        return {\n            restrict: 'AE',\n            templateUrl: 'app/components/common/directives/readonly-list.html',\n            scope: {\n                listData: '='\n            },\n\n            link: function (scope) {\n\n            }\n        }\n    }\n})();\n\n\n/**\n * Created by harshas on 26/8/16.\n */\n\n(function() {\n\n    angular\n        .module('uiplatform')\n        .directive('icarPanelExpansion', icarPanelExpansion)\n\n    function icarPanelExpansion($log, $mdDialog, $mdExpansionPanel, $mdExpansionPanelGroup,\n                                $stateParams, $compile) {\n        return{\n            restrict : 'E',\n            templateUrl : 'app/components/common/directives/panel-expansion.html',\n            trasclude:true,\n            scope: {\n                details: '=',\n                myFunc: '&clickPanel',\n                fields : '='\n            },\n            link: function (scope) {\n                scope.slides = [\n                    {\n                        image: 'assets/images/car1.jpg'\n                    },\n                    {\n                        image: 'assets/images/car2.jpg'\n                    },\n                    {\n                        image: 'assets/images/car3.jpg'\n                    },\n                    {\n                        image: 'assets/images/car4.jpg'\n                    }\n                ];\n\n                scope.deleted_panel_id;\n                scope.master = {};\n\n                scope.save = function(){\n                    $log.log(\"=============================================\")\n                    $log.log(scope.schemaData);\n                };\n\n                scope.discard = function(panelId) {\n                    scope.readMode = true;\n                    scope.details = angular.copy(scope.master);\n                    // scope.collapsePanel(panelId);\n                }\n\n                scope.edit = function(){\n                    if ( scope.readMode )\n                        scope.readMode = false;\n                };\n\n                scope.delete = function(ev) {\n                    var options = {\n                        templateUrl: '/app/components/common_directives/panel_delete_dialog.html',\n                        scope: scope,\n                        preserveScope: true\n                    };\n\n                    scope.deleted_panel_id = ev.toString();\n                    $mdDialog.show(options);\n                };\n\n                scope.deleteSelected = function () {\n                    $mdExpansionPanel().waitFor(scope.deleted_panel_id).then(function (instance) {\n                        instance.remove();\n                    });\n                    $mdDialog.cancel();\n                };\n\n                scope.cancelSelected = function () {\n                    $mdDialog.cancel();\n                    $log.log('my delete');\n                };\n\n\n                scope.panelSchema = [{\n                    section:'vehicle Details',\n                    order:1,\n                    description:\"vehicle description\"\n                },{\n                    section:\"Devices\",\n                    order:2,\n                    description:\"device description\"\n                }];\n\n                scope.getCurrentData = function (panelId) {\n                    scope.master = {};\n                    scope.master = angular.copy(scope.details);\n                    $log.log(panelId);\n\n                    scope.myFunc()\n                        .then (function(data){\n                            $log.log(\"inside directive\");\n                            $log.log(data);\n                            angular.element(document.getElementById('fields_content'))\n                                .html($compile(scope.fields)(scope));\n                            scope.schemaData = data[1];\n                            $log.log(\"received in directive ++++++++++++++++++++++++++\");\n                            $log.log(scope.schemaData);\n                            $log.log(scope.fields);\n                        });\n                };\n\n                scope.tabs = [\n                    { title: 'Nine', content: \"<md-input-container>\\\n                                                  <label>Vehicle Name</label>\\\n                                                  <input type='text'>\\\n                                                </md-input-container>\"\n                    },\n                    { title: 'Ten', content: \"<md-input-container>\\\n                                                  <label>Device Name</label>\\\n                                                  <input type='text'>\\\n                                                </md-input-container>\"\n                    }\n                ];\n\n                scope.selectedIndex = 0;\n\n                scope.activeTab = function (tabIndex){\n                  //   $log.log(scope.tabs[tabIndex].content);\n                  //   scope.mycontent = $compile(scope.tabs[tabIndex].content)(scope);\n                  // //  scope.tabs[tabIndex].content = $sce.trustAsHtml('<div class=\"md-display-4\">TAB3 CONTENT</div>');\n                  //   scope.tabs[tabIndex].content  = $compile(scope.tabs[tabIndex].content)(scope);\n                  //   $log.log(scope.tabs[tabIndex].content);\n                };\n\n                scope.collapsePanel = function(panelId) {\n                    $log.log(panelId);\n                    panelId = panelId.toString();\n                    $mdExpansionPanel(panelId).collapse();\n                    scope.readMode = true;\n                };\n            }\n        }\n    }\n})();\n\n\n/**\n * Created by smiddela on 06/09/16.\n */\n\n\n(function () {\n\n    angular\n        .module('uiplatform')\n        .directive('multiList', multiList);\n\n    function multiList() {\n\n        return {\n            restrict: 'E',\n            scope :{\n                popup:'=data'\n            },\n            templateUrl: 'app/components/common/directives/multi-list.html',\n\n            link:function(scope){\n\n                scope.defaultClick = function(param,callback){\n\n                    var processGUI = function(id){\n                        console.log(param.data);\n                        param.item.processing = false;\n                        for(var idx=0; idx < param.object.list.length; idx++){\n                            if(param.object.list[idx].id == param.item.id){\n                                param.object.list.splice(idx,1);\n                            }\n                        }\n                        param.data[param.object.id + id].list.unshift(param.item);\n                    }\n\n                    if(param.item.processing != true){\n                        param.item.processing = true;\n                        callback(processGUI);\n                    }\n                }\n            }\n        };\n    }\n})();\n\n\n/**\n * Created by harshas on 29/9/16.\n */\n\n(function () {\n\n    angular\n        .module('uiplatform')\n        .directive('icarKeypress', icarKeypress)\n\n    function icarKeypress() {\n        return function (scope, element, attrs) {\n            element.bind(\"keydown keypress\", function (event) {\n                if(event.which === 13) {\n                    scope.$apply(function (){\n                        scope.$eval(attrs.icarKeypress);\n                    });\n\n                    event.preventDefault();\n                }\n            });\n        };\n    }\n})();\n\n/**\n * Created by smiddela on 10/09/16.\n */\n\n\n(function () {\n\n    angular\n        .module('uiplatform')\n        .directive('icarTabContent', icarTabContent)\n        .directive('addContent', addContent);\n\n    function icarTabContent($log, $compile) {\n        return {\n            restrict: 'E',\n            template: '<div style=\"overflow:hidden;\"></div>',\n            scope: {\n                tabContent: '='\n            },\n\n            link: function (scope, element, attrs) {\n                //$log.log(\"icar-tab-content loaded\");\n\n                scope.parseContent = function(content, parentDiv) {\n                    var newElement = $compile('<fieldset layout=\"row\" style=\"border:1px solid #ccc;\"></fieldset>')(scope);\n                    parentDiv.append(newElement);\n                    // $log.log(element);\n\n                    for(var idx in content) {\n                        var child = content[idx];\n                        if(idx == '_schema_uidata') {\n                            // $log.log(\"child.key = \" + child.key);\n                            var childScope = scope.$new(false);\n                            childScope.content = child;\n                            newElement.append($compile(scope.getIcarDirective(child))(childScope));\n                        } else {\n                            if(typeof child === 'object') {\n                                scope.parseContent(child, newElement);\n                            }\n                        }\n                    }\n                };\n\n\n                scope.getIcarDirective = function(content) {\n                    return '<legend>'+content.key+'</legend><' + content.field + '></' + content.field + '>';\n                };\n\n                scope.parseContent(scope.tabContent, angular.element(element.children()[0]));\n            }\n        }\n    }\n\n    function addContent($log) {\n        return {\n            restrict: 'A',\n            compile: function(element, attrs) {\n                $log.log(element);\n            }\n        }\n    }\n})();\n\n\n/**\n * Created by harshas on 12/9/16.\n */\n\n(function () {\n\n    angular\n        .module('uiplatform')\n        .directive('icarSelectList', icarSelectList);\n\n    function icarSelectList($log) {\n        return {\n            restrict: 'AE',\n            template: ' <md-content layout=\"row\" layout-wrap>\\\n                            <div class=\"error\" ng-show=\"showErrorMsg\">Maximum Selection is \\\n                            {{maxSelection}}\\\n                            </div>\\\n                            <div layout=\"row\" layout-wrap flex=\"100\" flex-gm-sm=\"20\">\\\n                                <md-checkbox aria-label=\"Select All\"\\\n                                    ng-checked=\"isChecked()\"\\\n                                    md-indeterminate=\"isIndeterminate()\"\\\n                                    ng-click=\"toggleAll()\"  ng-show=\"showSelectAll\">\\\n                                    <span ng-if=\"isChecked()\" style=\"font-size:14px;\">Un-</span>Select All\\\n                                </md-checkbox flex>\\\n                            </div>\\\n                            <div class=\"\" ng-repeat=\"item in items\" layout-padding>\\\n                            <md-checkbox ng-checked=\"exists(item, selected)\" \\\n                                ng-click=\"toggle(item, selected)\" ng-disabled=\"scope.content.data.editable\">\\\n                                {{ item }}\\\n                            </md-checkbox>\\\n                           </div>\\\n                        </md-content>',\n\n            link : function(scope, element, attrs) {\n                scope.selectedCount = scope.content.data.default.length;\n                scope.minSelection = scope.content.data.select[0];\n                scope.maxSelection = scope.content.data.select[1];\n\n\n                //$log.log(scope.maxSelection, scope.content.data.select[2].length);\n                if ( scope.maxSelection >= scope.content.data.select[2].length )\n                    scope.showSelectAll = true;\n                else\n                    scope.showSelectAll = false;\n\n                scope.items = scope.content.data.select[2];\n                scope.selected = scope.content.data.default;\n\n\n                scope.toggle = function (item, list) {\n                    $log.log(scope.selectedCount);\n\n                    // return;\n                    var idx = list.indexOf(item);\n                    $log.log(scope.selectedCount , scope.maxSelection);\n                    if (idx > -1) {\n                        $log.log('selected');\n                        list.splice(idx, 1);\n                        $log.log(list);\n                        scope.selectedCount < 0 ? 0 : --scope.selectedCount;\n                        scope.showErrorMsg = false;\n                    }\n                    else {\n                        if (parseInt(scope.selectedCount) < parseInt(scope.maxSelection)) {\n                            $log.log('Unselected');\n                            list.push(item);\n                            scope.selectedCount += 1;\n                            scope.showErrorMsg = false;\n                        }else{\n                            scope.showErrorMsg = true;\n                        }\n                    }\n                };\n\n                scope.exists = function (item, list) {\n                    return list.indexOf(item) > -1;\n                };\n\n                scope.isIndeterminate = function() {\n                    return (scope.selected.length !== 0 &&\n                    scope.selected.length !== scope.items.length);\n                };\n\n                scope.isChecked = function() {\n                    return scope.selected.length === scope.items.length;\n                };\n\n                scope.toggleAll = function() {\n                    if (scope.selected.length === scope.items.length) {\n                        scope.selected = [];\n                    } else if (scope.selected.length === 0 || scope.selected.length > 0) {\n                        scope.selected = scope.items.slice(0);\n                    }\n                };\n            }\n        }\n    }\n})();\n\n/**\n * Created by harshas on 13/9/16.\n */\n\n\n(function () {\n\n    angular\n        .module('uiplatform')\n        .directive('icarReadonlyList', icarReadonlyList);\n\n    function icarReadonlyList($log) {\n        return {\n            restrict: 'AE',\n            template: '<md-content layout=\"row\" layout-wrap>\\\n                        <label flex=\"100\">Username</label><br/>\\\n                            <div ng-repeat=\"d in data\" layout-padding>{{d}}</div>\\\n                        </md-content>',\n            link : function(scope, element, attrs) {\n                // $log.log(\"inside icarInput Directive\");\n                // $log.log(scope.content);\n                // $log.log(attrs);\n                scope.data = scope.content.data.default;\n\n            }\n        }\n    }\n})();\n\n/**\n * Created by smiddela on 10/09/16.\n */\n\n(function () {\n\n    angular\n        .module('uiplatform')\n        .directive('icarInput', icarInput);\n\n    function icarInput() {\n        return {\n            restrict: 'AE',\n            template: '<md-input-container>\\\n                        <label>Username</label>\\\n                       <input type=\"text\" ng-model=\"content.data.default\" ng-disabled=\"!content.data.editable\">\\\n                        </md-input-container>',\n            link : function(scope, element, attrs) {\n                    // $log.log(\"inside icarInput Directive\");\n                    // $log.log(scope.content);\n                    // $log.log(attrs);\n            }\n        }\n    }\n})();\n\n/**\n * Created by smiddela on 06/09/16.\n */\n\n\n(function () {\n\n    angular\n        .module('uiplatform')\n        .directive('icarExpanel', icarExpanel);\n\n    function icarExpanel($log, $mdDialog, $mdExpansionPanel, $mdExpansionPanelGroup) {\n\n        return {\n            restrict: 'ACE',\n            templateUrl: 'app/components/common/directives/icar-expanel.html',\n            scope: {\n                details: '=',\n                schema: '='\n            },\n\n            link: function (scope) {\n                scope.contentTemplate = \"panel-content.html\";\n                scope.headerTemplate = \"panel-header.html\";\n                scope.footerTemplate = \"panel-footer.html\";\n                //scope.collapseStatus = true;\n                scope.confirmDialog = $mdDialog.confirm()\n                    .title('Delete asset ?')\n                    .clickOutsideToClose(true)\n                    .ok('Yes')\n                    .cancel('No');\n\n                //$log.log(\"icarExpanel directive loaded\");\n\n                scope.discard = function () {\n                };\n\n                scope.edit = function () {\n                };\n\n                scope.delete = function () {\n                    $mdDialog.show(scope.confirmDialog)\n                        .then(function () {\n                            $log.log(\"OK\");\n                        }, function () {\n                            $log.log(\"Cancel\");\n                        });\n                };\n\n                scope.deleteSelected = function () {\n                };\n\n                scope.cancelSelected = function () {\n                };\n\n                scope.expandCollapse = function (panel) {\n                    //scope.collapseStatus = !scope.collapseStatus;\n                    //$log.log(\"collapseClick \" + scope.collapseStatus);\n                    if (panel.isOpen())\n                        panel.collapse();\n                    else\n                        panel.expand();\n                };\n\n                scope.collapsePanel = function () {\n                };\n            }\n        }\n    }\n})();\n\n\n/**\n * Created by harshas on 13/9/16.\n */\n\n(function () {\n\n    angular\n        .module('uiplatform')\n        .directive('icarEditableList', icarEditableList);\n\n    function icarEditableList() {\n        return {\n            restrict: 'AE',\n            template: '<label>{{displayName}}</label>\\\n                       <md-chips ng-model=\"data\" layout=\"row\" layout-wrap flex=\"100\">\\\n                            ng-model=\"data\"\\\n                            readonly=\"false\"\\\n                            md-removable=\"true\"\\\n                            placeholder=\"displayHint\"\\\n                            secondary-placeholder=\"+Add\">\\\n                       </md-chips>',\n\n            link : function(scope, element, attrs) {\n                // $log.log(attrs);\n\n\n                scope.displayName = scope.content.data.displayname;\n                scope.dataType = scope.content.data.type;\n                scope.displayHint = scope.content.data.displaydesc;\n                scope.data = scope.content.data.default;\n                scope.editable = scope.content.data.editable;\n            }\n        }\n    }\n})();\n\n/**\n * Created by smiddela on 27/08/16.\n */\n\n(function () {\n    angular\n        .module('uiplatform')\n        .factory('appConstants', appConstants);\n\n    function appConstants() {\n\n        return {\n            GROUP: 'group',\n            VEHICLE: 'vehicle',\n            USER: 'user',\n            ROLE: 'role',\n            DEVICE: 'device',\n            VEHICLETYPE: 'vehicletype',\n            DEVICETYPE: 'devicetype',\n            FENCE: 'fence',\n            FENCEREPORT: 'fencereport'\n        }\n    }\n\n})();\n\n\n/**\n * Created by smiddela on 10/10/16.\n */\n\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('vehicleService', vehicleService);\n\n    function vehicleService($log, intellicarAPI) {\n        $log.log(\"vehicleService\");\n        var vm = this;\n        vm.vehiclesByPath = {};\n        vm.vehiclesByNumber = {};\n        vm.listeners = {};\n        vm.noCommThreshold = 1000 * 3600 * 3;\n\n\n        vm.addListener = function (key, listener) {\n            if (!(key in vm.listeners)) {\n                vm.listeners[key] = [];\n            }\n\n            if (vm.listeners[key].indexOf(listener) === -1) {\n                vm.listeners[key].push(listener);\n            }\n        };\n\n\n        vm.callListeners = function (msg, key) {\n            if (key in vm.listeners) {\n                for (var idx in vm.listeners[key]) {\n                    vm.listeners[key][idx](msg, key);\n                }\n            }\n        };\n\n\n        var VEHICLE_ON = \"On\";\n        var VEHICLE_OFF = \"Off\";\n        var VEHICLE_RUNNING = \"Running\";\n        var VEHICLE_STOPPED = \"Stopped\";\n        var VEHICLE_ACTIVE = \"Active\";\n        var VEHICLE_IMMOBILIZED = \"Immobilized\";\n        var VEHICLE_NOT_COMMUNICATING = \"Not Communicating\";\n        var VEHICLE_DEVICE_PULLOUT = \"Device Pullout\";\n\n        vm.processVehicleData = function (msg) {\n            var newData = msg[1];\n\n            if(newData.vehiclepath == null || newData.vehiclepath.length == 0)\n                return null;\n\n            if (!(newData.vehiclepath in vm.vehiclesByPath)) {\n                //vm.vehiclesByPath[newData.vehiclepath] = msg;\n                $log.log(\"Receiveing data of vehicle not owned by user!!\");\n                return;\n            }\n\n            var vehicleObj = vm.vehiclesByPath[newData.vehiclepath];\n            if (!('rtgps' in vehicleObj)) {\n                vehicleObj.rtgps = newData;\n                vm.callListeners(vehicleObj.rtgps, 'rtgps2');\n            }\n\n            var rtgps = vehicleObj.rtgps;\n            //$log.log(msg[0]);\n            //$log.log(newData);\n\n\n            rtgps.timestamp = new Date(newData.timestamp);\n            rtgps.deviceid = newData.deviceid;\n            rtgps.latitude = newData.latitude;\n            rtgps.longitude = newData.longitude;\n            rtgps.altitude = newData.altitude;\n            rtgps.vehicleno = newData.vehicleno;\n            rtgps.odometer = newData.odometer;\n            rtgps.carbattery = rtgps.carbattery ? rtgps.carbattery : 0;\n            rtgps.devbattery = rtgps.devbattery ? rtgps.devbattery : 0;\n            rtgps.speed = parseFloat(parseFloat(newData.speed).toFixed(2));\n            rtgps.direction = parseFloat(parseFloat(newData.direction).toFixed(2));\n            rtgps.carbattery = parseFloat(parseFloat(newData.carbattery).toFixed(2));\n            rtgps.devbattery = parseFloat(parseFloat(newData.devbattery).toFixed(2));\n            rtgps.ignitionstatus = newData.ignitionstatus;\n            rtgps.mobilistatus = newData.mobilistatus;\n\n            var currentTime = new Date().getTime();\n\n            if (currentTime - rtgps.timestamp.getTime() > 8 * 3600 * 1000) {\n                rtgps.noComm = 'no communication';\n                rtgps.notcommunicatingFilter = VEHICLE_NOT_COMMUNICATING;\n            }\n\n            if (rtgps.ignitionstatus == 1) {\n                rtgps.ignitionstatusStr = VEHICLE_ON;\n                rtgps.ignitionstatusFilter = VEHICLE_RUNNING;\n\n            } else {\n                rtgps.ignitionstatusStr = VEHICLE_OFF;\n                rtgps.ignitionstatusFilter = VEHICLE_STOPPED;\n            }\n\n            if (rtgps.mobilistatus == 1) {\n                rtgps.mobilistatusFilter = VEHICLE_ACTIVE;\n            } else {\n                rtgps.mobilistatusFilter = VEHICLE_IMMOBILIZED;\n                rtgps.ignitionstatusFilter = '';\n            }\n\n            if(rtgps.carbattery < 2){\n                rtgps.devicepulloutFilter = VEHICLE_DEVICE_PULLOUT;\n            }\n\n            // checkNoComm(rtgps, function(){\n            //     rtgps.notcommunicatingFilter = VEHICLE_NOT_COMMUNICATING;\n            //     console.log(rtgps.vehicleno);\n            // })\n            return vehicleObj;\n        };\n\n\n        function checkNoComm(marker, callback) {\n            var currentTime = new Date().getTime();\n            var lastSeenAt = marker.timestamp.getTime();\n            var noCommThreshold =  vm.noCommThreshold;\n            if (currentTime - lastSeenAt > noCommThreshold) {\n                if(callback){\n                    callback(marker);\n                }\n            }\n        }\n\n        vm.updateVehicle = function (msg, key) {\n            if (msg.length == 2 && msg[0] != null && msg[1] != null) {\n                var vehicleObj = vm.processVehicleData(msg);\n                //$log.log(vehicleObj);\n                if(vehicleObj)\n                    vm.callListeners(vehicleObj, key);\n            } else {\n                $log.log(\"invalid rtgps data\");\n            }\n        };\n\n        vm.handleFailure = function (resp) {\n            $log.log('handleFailure');\n            $log.log(resp);\n        };\n\n\n        vm.subscribe = function (assetpath, flag, subscriptionKey) {\n            var subscriptionMsg = [{path: assetpath}];\n            if (flag) {\n                //intellicarAPI.mqttService.subscribeAsset(asset, subscriptionKey);\n                intellicarAPI.mqttService.subscribe(subscriptionMsg, subscriptionKey);\n            } else {\n                //intellicarAPI.mqttService.unsubscribeAsset(asset, subscriptionKey);\n                intellicarAPI.mqttService.unsubscribe(subscriptionMsg, subscriptionKey);\n            }\n        };\n\n\n        vm.handleGetMyVehicles = function (resp) {\n            // $log.log(resp);\n            //vm.vehiclesByPath = resp;\n            for (var idx in resp) {\n                vm.subscribe(resp[idx].assetpath, true, 'gps');\n                vm.subscribe(resp[idx].assetpath, true, 'rtalarm');\n                vm.vehiclesByNumber[resp[idx].name] = resp[idx];\n                vm.vehiclesByPath[resp[idx].assetpath] = resp[idx];\n            }\n        };\n\n\n        vm.getMyVehicles = function (body) {\n            return intellicarAPI.userService.getMyVehiclesMap(body);\n        };\n\n        vm.init = function () {\n            intellicarAPI.mqttService.addListener('rtgps', vm.updateVehicle);\n            vm.getMyVehicles({})\n                .then(vm.handleGetMyVehicles, vm.handleFailure);\n        };\n\n        vm.init();\n    }\n})();\n\n/**\n * Created by smiddela on 12/10/16.\n */\n\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('userprefService', userprefService);\n\n    function userprefService($log, loginService, intellicarAPI, latlngService, helperService, settingsService ) {\n        $log.log(\"userprefService\");\n        var vm = this;\n        vm.userpref = {};\n        vm.listeners = {};\n\n\n        vm.addListener = function (key, listener) {\n            if (!(key in vm.listeners)) {\n                vm.listeners[key] = [];\n            }\n\n            if (vm.listeners[key].indexOf(listener) === -1) {\n                vm.listeners[key].push(listener);\n            }\n        };\n\n\n        vm.callListeners = function (msg, key) {\n            if (key in vm.listeners) {\n                for (var idx in vm.listeners[key]) {\n                    vm.listeners[key][idx](msg, key);\n                }\n            }\n        };\n\n\n        vm.loginSuccess = function (data) {\n            $log.log(\"loginSuccess\");\n            $log.log(data);\n        };\n\n\n        vm.handleGetMyInfo = function (resp) {\n            //$log.log(resp);\n            vm.userpref = resp.data.data[0];\n            vm.pgrouppath = helperService.getParentFromPath(vm.userpref.assetpath);\n            settingsService.setCurrentGroupPath(vm.pgrouppath);\n            // $log.log(vm.userpref);\n            vm.callListeners(vm.userpref, 'setUserPref');\n            //console.log(settingsService.getCurrentGroup());\n            //latlngService.geocodeAddress('bhopal');\n        };\n\n\n        vm.handleFailure = function (resp) {\n            $log.log(\"handleFailure\");\n            $log.log(resp);\n        };\n\n        vm.init = function () {\n            loginService.addListener('loginSuccess', vm.loginSuccess);\n            intellicarAPI.userService.getMyInfo({})\n                .then(vm.handleGetMyInfo, vm.handleFailure);\n        };\n\n        vm.init();\n    }\n})();\n\n/**\n * Created by smiddela on 13/10/16.\n */\n\n\n(function () {\n    'use strict';\n\n    angular.module('uiplatform')\n        .service('latlngService', latlngService);\n\n    function latlngService($log) {\n        $log.log(\"latlngService\");\n        var vm = this;\n        vm.initCoords = {};\n        vm.geocoder = new google.maps.Geocoder();\n\n        vm.geocodeAddress = function (address) {\n            vm.geocoder.geocode({'address': address}, function (results, status) {\n                if (status === 'OK') {\n                    vm.initCoords = results[0].geometry.location;\n                    //$log.log(vm.initCoords);\n                    return vm.initCoords;\n                }\n            });\n        };\n    }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n      .module('uiplatform')\n      .service('webDevTec', webDevTec);\n\n  /** @ngInject */\n  function webDevTec() {\n    var data = [\n      {\n        'title': 'AngularJS',\n        'url': 'https://angularjs.org/',\n        'description': 'HTML enhanced for web apps!',\n        'logo': 'angular.png'\n      },\n      {\n        'title': 'BrowserSync',\n        'url': 'http://browsersync.io/',\n        'description': 'Time-saving synchronised browser testing.',\n        'logo': 'browsersync.png'\n      },\n      {\n        'title': 'GulpJS',\n        'url': 'http://gulpjs.com/',\n        'description': 'The streaming build system.',\n        'logo': 'gulp.png'\n      },\n      {\n        'title': 'Jasmine',\n        'url': 'http://jasmine.github.io/',\n        'description': 'Behavior-Driven JavaScript.',\n        'logo': 'jasmine.png'\n      },\n      {\n        'title': 'Karma',\n        'url': 'http://karma-runner.github.io/',\n        'description': 'Spectacular Test Runner for JavaScript.',\n        'logo': 'karma.png'\n      },\n      {\n        'title': 'Protractor',\n        'url': 'https://github.com/angular/protractor',\n        'description': 'End to end test framework for AngularJS applications built on top of WebDriverJS.',\n        'logo': 'protractor.png'\n      },\n      {\n        'title': 'Angular Material Design',\n        'url': 'https://material.angularjs.org/#/',\n        'description': 'The Angular reference implementation of the Google\\'s Material Design specification.',\n        'logo': 'angular-material.png'\n      },\n      {\n        'title': 'Sass (Node)',\n        'url': 'https://github.com/sass/node-sass',\n        'description': 'Node.js binding to libsass, the C version of the popular stylesheet preprocessor, Sass.',\n        'logo': 'node-sass.png'\n      }\n    ];\n\n    this.getTec = getTec;\n\n    function getTec() {\n      return data;\n    }\n  }\n\n})();\n\n/**\n * Created by smiddela on 11/08/16.\n */\n\n(function() {\n\n    angular.module('uiplatform')\n        .service('navService', navService);\n\n    function navService($q) {\n        var menuItems = [\n            {\n                name: 'Dashboard',\n                icon: 'dashboard',\n                sref: '.dashboard'\n            },\n            {\n                name: 'Profile',\n                icon: 'person',\n                sref: '.profile'\n            },\n            {\n                name: 'Table',\n                icon: 'view_module',\n                sref: '.table'\n            }\n        ];\n\n        return {\n            loadAllItems: function () {\n                return $q.when(menuItems);\n            }\n        };\n    }\n})();\n(function() {\n  'use strict';\n\n  angular\n    .module('uiplatform')\n    .directive('acmeNavbar', acmeNavbar);\n\n  /** @ngInject */\n  function acmeNavbar() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/navbar/navbar.html',\n      scope: {\n          creationDate: '='\n      },\n      controller: NavbarController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function NavbarController(moment) {\n      var vm = this;\n\n      // \"vm.creationDate\" is available by directive option \"bindToController: true\"\n      vm.relativeDate = moment(vm.creationDate).fromNow();\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('uiplatform')\n    .directive('acmeMalarkey', acmeMalarkey);\n\n  /** @ngInject */\n  function acmeMalarkey(malarkey) {\n    var directive = {\n      restrict: 'E',\n      scope: {\n        extraValues: '='\n      },\n      template: '&nbsp;',\n      link: linkFunc,\n      controller: MalarkeyController,\n      controllerAs: 'vm'\n    };\n\n    return directive;\n\n    function linkFunc(scope, el, attr, vm) {\n      var watcher;\n      var typist = malarkey(el[0], {\n        typeSpeed: 40,\n        deleteSpeed: 40,\n        pauseDelay: 800,\n        loop: true,\n        postfix: ' '\n      });\n\n      el.addClass('acme-malarkey');\n\n      angular.forEach(scope.extraValues, function(value) {\n        typist.type(value).pause().delete();\n      });\n\n      watcher = scope.$watch('vm.contributors', function() {\n        angular.forEach(vm.contributors, function(contributor) {\n          typist.type(contributor.login).pause().delete();\n        });\n      });\n\n      scope.$on('$destroy', function () {\n        watcher();\n      });\n    }\n\n    /** @ngInject */\n    function MalarkeyController($log, githubContributor) {\n      var vm = this;\n\n      vm.contributors = [];\n\n      activate();\n\n      function activate() {\n        return getContributors().then(function() {\n          $log.info('Activated Contributors View');\n        });\n      }\n\n      function getContributors() {\n        return githubContributor.getContributors(10).then(function(data) {\n          vm.contributors = data;\n\n          return vm.contributors;\n        });\n      }\n    }\n\n  }\n\n})();\n\n/**\n * Created by smiddela on 10/08/16.\n */\n\n(function () {\n\n    angular\n        .module('uiplatform')\n        .service('loginService', loginService)\n        .controller('loginDialogController', loginDialogController);\n\n\n    function loginService($rootScope, $log, $mdDialog, authService, requestService) {\n        $log.log(\"loginService\");\n        var vm = this;\n        vm.username = '';\n        vm.password = '';\n        vm.listeners = {};\n\n\n        vm.addListener = function (key, listener) {\n            if (!(key in vm.listeners)) {\n                vm.listeners[key] = [];\n            }\n\n            if (vm.listeners[key].indexOf(listener) === -1) {\n                vm.listeners[key].push(listener);\n            }\n        };\n\n\n        vm.callListeners = function (msg, key) {\n            if (key in vm.listeners) {\n                for (var idx in vm.listeners[key]) {\n                    vm.listeners[key][idx](msg, key);\n                }\n            }\n        };\n\n\n        vm.login = function (username, password) {\n            return requestService.firePost('/gettoken', {\n                \"user\": {\n                    type: \"local\",\n                    username: username,\n                    password: password\n                }\n            }).then(function (resp) {\n                // $log.log(resp);\n                vm.username = username;\n                vm.password = password;\n                vm.callListeners(resp, 'loginSuccess');\n                return resp;\n            });\n        };\n\n        vm.logout = function () {\n            authService.logout && authService.logout();\n            $rootScope.showLoginDialog = true;\n            vm.loginDialog = \"\";\n            vm.checkLogin();\n        };\n\n        vm.isAuthed = function () {\n            //$log.log(authService.isAuthed());\n            return authService.isAuthed ? authService.isAuthed() : false;\n        };\n\n        vm.checkLogin = function () {\n            if ($rootScope.showLoginDialog) {\n                $log.log(\"Showing login\");\n                if (!vm.loginDialog) {\n                    vm.loginDialog = $mdDialog.confirm({\n                            controller: loginDialogController,\n                            //controllerAs: loginDialogCtrl,\n                            templateUrl: 'app/components/login/login_dialog.html',\n                            clickOutsideToClose: false,\n                            escapeToClose: false\n                        }\n                    );\n\n                    $mdDialog.show(vm.loginDialog);\n                }\n            }\n        };\n\n        requestService.addAuthListener(vm.checkLogin);\n    }\n\n\n    function loginDialogController($scope, $rootScope, $log, loginService, $mdDialog, $window) {\n        var vm = $scope;\n        $rootScope.showLoginDialog = false;\n        $log.log(\"loginDialogController\");\n\n        vm.emailFormat = /^[a-z]+[a-z0-9._]+@[a-z]+\\.[a-z.]{2,5}$/;\n\n        //vm.username = \"shunmugakrishnan@intellicar.in\";\n        //vm.password = \"intellicar123\";\n\n        // vm.username = \"anujkumar.k@olacabs.com\";\n        // vm.password = \"ola123\";\n\n\n        function handleLoginSuccess(resp) {\n            // $log.log(resp);\n            $log.log(\"handleLoginSuccess\");\n            $rootScope.showLoginDialog = false;\n            $mdDialog.hide();\n            vm.loginDialog = \"\";\n            $window.location.reload();\n        }\n\n        function handleLoginFailure(resp) {\n            $log.log(resp);\n            $log.log(\"handleLoginFailure\");\n            if (resp && resp.data && resp.msg)\n                $log.log(resp);\n                vm.errorMsg = resp.data.msg;\n        }\n\n        vm.onChangeCredentials = function(){\n            if (!(vm.username && vm.password)){\n                vm.errorMsg = \"Please enter valid Username and Password\";\n                return;\n            }\n            else\n                vm.errorMsg = '';\n\n            // if ( !vm.username.match(/^[a-z]+[a-z0-9._]+@[a-z]+\\.[a-z.]{2,5}$/)) {\n            //     vm.errorMsg = \"Please Enter valid username\";\n            //     return;\n            // }\n        };\n\n        vm.login = function () {\n            if ( vm.errorMsg ) return;\n            $log.log(\"/gettoken\");\n            loginService.login(vm.username, vm.password)\n                .then(handleLoginSuccess, handleLoginFailure);\n        };\n\n        vm.logout = function () {\n            loginService.logout();\n        };\n\n\n        // vm.register = function () {\n        //     // $log.log(\"register\");\n        //     // loginService.register(vm.username, vm.password)\n        //     //     .then(handleRequest, handleRequest)\n        // };\n        //\n        // vm.isAuthed = function () {\n        //     return loginService.isAuthed();\n        // }\n    }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('uiplatform')\n    .factory('githubContributor', githubContributor);\n\n  /** @ngInject */\n  function githubContributor($log, $http) {\n    var apiHost = 'https://github.com/intellicar/uiplatform.git';\n\n    var service = {\n      apiHost: apiHost,\n      getContributors: getContributors\n    };\n\n    return service;\n\n    function getContributors(limit) {\n      if (!limit) {\n        limit = 30;\n      }\n\n      return $http.get(apiHost + '/contributors?per_page=' + limit)\n        .then(getContributorsComplete)\n        .catch(getContributorsFailed);\n\n      function getContributorsComplete(response) {\n        return response.data;\n      }\n\n      function getContributorsFailed(error) {\n        $log.error('XHR Failed for getContributors.\\n' + angular.toJson(error.data, true));\n      }\n    }\n  }\n})();\n\n(function(){\n\n\n    angular\n        .module('uiplatform')\n        .controller('MainController', MainController);\n\n    function MainController($scope, $rootScope, $log) {\n\n        $log.log('MainController');\n        var vm = this;\n        vm.dummy = false;\n\n        vm.toggleLeftnav = function(event, data) {\n            vm.dummy = data.dummy;\n        }\n\n        $scope.$on('toggleLeftSidebar', vm.toggleLeftSidebar);\n\n\n        //To periodically check if the token is valid\n        // vm.isLoginTokenValid = function() {\n        //     //$log.log(\"isLoginTokenVaild\");\n        //     $interval(intellicarAPI.requestService.isLoginTokenValid, 5000);\n        // }\n        //\n        // vm.isLoginTokenValid();\n    }\n\n\n\n    /*\n     *  Jquery code for fixing resolution problem of map\n     *\n     * */\n\n    // var headerAutoHide = false;\n\n\n    // var headerYVal = 80;\n    // var wh = $(window).height();\n\n    // $(document).mousemove(function(event){\n    //     if(headerAutoHide) {\n    //         if (event.pageY < headerYVal) {\n    //             // showHeader();\n    //             headerYVal = 150;\n    //         } else {\n    //             hideHeader();\n    //             headerYVal = 80;\n    //         }\n    //     }\n    // });\n\n    // function hideHeader() {\n    //     $('.mainHeader').css({'margin-top':'-45px'});\n    // }\n\n    // function showHeader() {\n    //     $('.mainHeader').css({'margin-top':'0'});\n    // }\n\n})();\n\n(function() {\n\n    'use strict';\n\n    angular\n        .module('uiplatform')\n        .run(runBlock);\n\n    /** @ngInject */\n    function runBlock($rootScope, $state, $log,  $location, $window) {\n        $log.log(\"runBlock\");\n        $rootScope.showLoginDialog = true;\n        //$rootScope.$emit('getData', {'login': true});\n\n        $window.ga('create', 'UA-86820286-2', 'auto');\n\n        // track pageview on state change\n        $rootScope.$on('$stateChangeSuccess', function (event) {\n            $window.ga('send', 'pageview', $location.path());\n        });\n    }\n\n\n\n  // angular\n  //   .module('uiplatform')\n  //   .run(runBlock);\n  //\n  // /** @ngInject */\n  // function runBlock($rootScope, $state, loginModal) {\n  //\n  //   $rootScope.$on('$stateChangeStart', function (event, toState, toParams) {\n  //     var requireLogin = true;\n  //     //var requireLogin = toState.data.requireLogin ? true : false;\n  //\n  //     if (requireLogin && typeof $rootScope.currentUser === 'undefined') {\n  //       event.preventDefault();\n  //\n  //       loginModal()\n  //           .then(function () {\n  //             return $state.go(toState.name, toParams);\n  //           })\n  //           .catch(function () {\n  //             return $state.go('welcome');\n  //           });\n  //     }\n  //   });\n  //\n  // }\n\n})();\n\n(function() {\n    'use strict';\n\n    angular\n        .module('uiplatform')\n        .config(routerConfig)\n        .filter('titleCase', function() {\n            return function(input) {\n                input = input || '';\n                return input.replace(/\\w\\S*/g, function(txt){return txt.charAt(0).toUpperCase()\n                    + txt.substr(1).toLowerCase();});\n            };\n        });\n\n    /** @ngInject */\n    function routerConfig($stateProvider, $urlRouterProvider) {\n        $stateProvider\n        // .state('home', {\n        //     url: '/',\n        //     templateUrl: 'app/main/main1.html',\n        //     controller: 'MainController',\n        //     controllerAs: 'vm'\n        // })\n\n            .state('home', {\n                url: '/',\n                views: {\n                    '': {\n                        templateUrl: 'app/main/main.html',\n                        controller: 'MainController as vm'\n                    },\n                    'header@home': {\n                        templateUrl: 'app/components/landingpage/header/header.html',\n                        controller: 'HeaderController as vm'\n                    },\n                    'leftnavtree@home': {\n                        templateUrl: 'app/components/landingpage/dashboard/leftnavtree/leftnav_dashboard.html',\n                        controller: 'LeftNavDashboardController as vm'\n                    },\n                    'lefttoolbar@home': {\n                        templateUrl: 'app/components/landingpage/dashboard/lefttoolbar/lefttoolbar_dashboard.html',\n                        controller: 'LeftToolbarDashboardController as vm'\n                    },\n                    'center@home': {\n                        templateUrl: 'app/components/landingpage/center/center.html',\n                        controller: 'CenterController as vm'\n                    },\n                    'centermain@home': {\n                        templateUrl: 'app/components/landingpage/dashboard/map/map.html',\n                        controller: 'MapController as vm'\n                    },\n                    'rightnav@home': {\n                        templateUrl: 'app/components/landingpage/dashboard/rightnav/rightnavalert_dashboard.html',\n                        controller: 'RightNavDashboardController as vm'\n                    }\n                    // 'righttoolbar@home': {\n                    //     templateUrl: 'app/components/landingpage/dashboard/righttoolbar_dashboard.html',\n                    //     controller: 'RightToolbarController as vm',\n                    // },\n\n                }\n            })\n            .state('home.dashboard', {\n                url: 'home/dashboard',\n                views: {\n                    'leftnavtree@home': {\n                        templateUrl: 'app/components/landingpage/dashboard/leftnavtree/leftnav_dashboard.html',\n                        controller: 'LeftNavDashboardController as vm'\n                    },\n                    'lefttoolbar@home': {\n                        templateUrl: 'app/components/landingpage/dashboard/lefttoolbar/lefttoolbar_dashboard.html',\n                        controller: 'LeftToolbarDashboardController as vm'\n                    }\n                    // 'centermain@home': {\n                    //     templateUrl: 'app/components/landingpage/dashboard/map/map.html',\n                    //     controller: 'MapController as vm'\n                    // }\n                }\n            })\n            .state('home.management', {\n                url: 'home/management',\n                resolve: {\n                    startupTreeData : function($stateParams, $log, $q, $state, $rootScope,\n                                           settingsService, intellicarAPI) {\n                        $log.log($stateParams);\n                        $log.log($state);\n\n                        var handleGetMyInfo = function (resp) {\n                            var userinfo = resp.data.data[0];\n                            // console.log(userinfo);\n                            var pgrouppath = intellicarAPI.helperService.getParentFromPath(userinfo.assetpath);\n                            settingsService.setCurrentGroupPath(pgrouppath);\n                            // console.log(settingsService.getCurrentGroup());\n                            return pgrouppath;\n                        };\n\n\n                        var handleFailure = function (resp) {\n                            $log.log(\"handleFailure\");\n                            $log.log(resp);\n                            return resp;\n                        };\n\n\n                        return intellicarAPI.userService.getMyInfo({})\n                            .then(handleGetMyInfo, handleFailure);\n\n                        // $log.log('in management left nav');\n                        // return $q.resolve({startupData: 'my startup data'});\n                    }\n                },\n                views: {\n                    'leftnavtree@home': {\n                        templateUrl: 'app/components/landingpage/management/leftnav/leftnav_mgmt.html',\n                        controller: 'LeftNavManagementController as vm'\n                    },\n                    'lefttoolbar@home': {\n                        templateUrl: 'app/components/common/views/emptydiv.html',\n                        controller: 'LeftToolbarDashboardController as vm'\n                    },\n                    'centermain@home': {\n                        templateUrl: 'app/components/landingpage/management/settings/tabs/settings.html',\n                        controller: 'SettingsController as vm'\n                    },\n                    'mgmttab@home.management': {\n                        templateUrl: 'app/components/landingpage/management/settings/vehicle/vehicle_mgmt.html',\n                        // resolve: {\n                        //     startupData : function($state, $stateParams, $log, vehicleMgmtService,\n                        //                            settingsService, userprefService) {\n                        //         return vehicleMgmtService.getData(settingsService.getCurrentGroup());\n                        //     }\n                        // },\n                        controller: 'VehicleMgmtController as vm'\n                    },\n                    'rightnav@home': {\n                        templateUrl: 'app/components/landingpage/management/rightnav/rightnav_mgmt.html',\n                        controller: 'RightNavMgmtController as vm'\n                    }\n                }\n            })\n            .state('home.history', {\n                url: 'history',\n                params: {\n                    mapObj: null\n                },\n                views: {\n                    'dialogview@home': {\n                        templateUrl: 'app/components/landingpage/dashboard/map/dialog/history.html',\n                        controller: 'HistoryController as vm'\n                    }\n                }\n            })\n            .state('home.historyData', {\n                url: 'historyData',\n                params: {\n                    mapObj: null\n                },\n                views: {\n                    'dialogview@home': {\n                        templateUrl: 'app/components/landingpage/dashboard/map/dialog/historyTable.html',\n                        controller: 'HistoryTableController as vm'\n                    }\n                }\n            })\n            .state('home.alarm', {\n                url: 'alarm',\n                views: {\n                    'dialogview@home': {\n                        templateUrl: 'app/components/landingpage/dashboard/map/dialog/alarm.html',\n                        controller: 'AlarmController as vm'\n                    }\n                }\n            })\n            .state('home.downloadHistory', {\n                url: 'downloadHistory',\n                views: {\n                    'dialogview@home': {\n                        templateUrl: 'app/components/landingpage/dashboard/map/dialog/downloadHistory.html',\n                        controller: 'DownloadHistoryController as vm'\n                    }\n                }\n            })\n            .state('home.geofence', {\n                url: 'geofence',\n                views: {\n                    'dialogview@home': {\n                        templateUrl: 'app/components/landingpage/dashboard/map/dialog/geofence.html',\n                        controller: 'GeofenceReportController as vm'\n                    }\n                }\n            })\n            .state('home.reports', {\n                url: 'home/reports',\n                views: {\n                    'leftnavtree@home': {\n                        templateUrl: 'app/components/landingpage/management/leftnav/leftnav_mgmt.html',\n                        controller: 'LeftNavDashboardController as vm'\n                    },\n                    'lefttoolbar@home': {\n                        templateUrl: 'app/components/common/views/emptydiv.html',\n                        controller: 'LeftToolbarDashboardController as vm'\n                    },\n                    'centermain@home': {\n                        templateUrl: 'app/components/landingpage/reports/reports.html',\n                        controller: 'ReportsController as vm'\n                    }\n                }\n            });\n\n\n        $urlRouterProvider.otherwise('/');\n    }\n\n})();\n\n/* global malarkey:false, moment:false */\n(function() {\n  'use strict';\n\n  angular\n    .module('uiplatform')\n    //.constant('malarkey', malarkey)\n    //.constant('moment', moment);\n\n})();\n\n(function() {\n    'use strict';\n\n    angular\n        .module('uiplatform')\n        //.service('loginModal', loginModal)\n        .config(themeConfig);\n\n\n\n    function themeConfig($mdIconProvider, $mdThemingProvider ) {\n        $mdThemingProvider\n            .theme('default')\n            .primaryPalette('defaultPrimary', {\n                'default': '600'\n            })\n            .accentPalette('teal', {\n                'default': '500'\n            })\n            .warnPalette('defaultPrimary');\n\n        $mdThemingProvider.theme('dark', 'default')\n            .primaryPalette('defaultPrimary')\n            .dark();\n\n        $mdThemingProvider.theme('grey', 'default')\n            .primaryPalette('grey');\n\n        $mdThemingProvider.theme('custom', 'default')\n            .primaryPalette('defaultPrimary', {\n                'hue-1': '50'\n            });\n\n        $mdThemingProvider.definePalette('defaultPrimary', {\n            '50': '#FFFFFF',\n            '100': 'rgb(255, 198, 197)',\n            '200': '#E75753',\n            '300': '#E75753',\n            '400': '#E75753',\n            '500': '#E75753',\n            '600': '#E75753',\n            '700': '#E75753',\n            '800': '#E75753',\n            '900': '#E75753',\n            'A100': '#E75753',\n            'A200': '#E75753',\n            'A400': '#E75753',\n            'A700': '#E75753'\n        });\n\n\n        $mdIconProvider.icon('user', 'assets/images/user.svg', 64); \n    }\n\n})();\n\nangular.module(\"uiplatform\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/main/main.html\",\"<!DOCTYPE html><style>.left-nav {border-right:1px solid #CCC;}\\n    .right-nav {border-left:1px solid #CCC;}</style><div class=mainHeader ui-view=header></div><div ui-view=leftnavtree class=left-nav></div><div id=main><md-content layout=row flex class=altered><div layout=column flex id=content><md-content layout=column><div ui-view=center></div></md-content></div></md-content></div><div class=right-nav ui-view=rightnav></div><div ui-view=footer></div>\");\n$templateCache.put(\"app/components/login/login_dialog.html\",\"<!DOCTYPE html><style>md-dialog {\\n        width: 50%;\\n    }\\n\\n    .img-logo {\\n        margin: 0 auto;\\n        display: block;\\n    }\\n    .error{\\n        color:#f00;\\n    }</style><!--<script type=\\\"text/ng-template\\\" id=\\\"login_dialog.html\\\">--><md-dialog aria-label=authLoginDialog><md-dialog-content><img ng-src=assets/logo.png height=120 class=\\\"img-logo md-card-image\\\" alt=Intellicar><div><span class=error>{{errorMsg}}</span><md-input-container class=\\\"md-block md-accent\\\"><label>Username</label><input type=text ng-model=username ng-change=onChangeCredentials() icar-keypress=login()></md-input-container><div flex layout-align=\\\"center center\\\"><span style=\\\"color: red;font-size:13px\\\" layout-align=\\\"center center\\\" flex>{{message}}</span></div><md-input-container class=\\\"md-block md-accent\\\"><label>Password</label><input type=password ng-model=password icar-keypress=login() ng-change=onChangeCredentials()></md-input-container></div></md-dialog-content><md-dialog-actions layout=row><div flex><md-button class=md-accent ng-click=login()>Login</md-button><!--<md-button class=\\\"md-raised md-primary\\\" ng-show=\\\"isAuthed()\\\" ng-click=\\\"logout()\\\">Logout</md-button>--></div></md-dialog-actions></md-dialog><!--//</script>-->\");\n$templateCache.put(\"app/components/navbar/navbar.html\",\"<md-toolbar layout=row layout-align=\\\"center center\\\"><md-button href=https://github.com/Swiip/generator-gulp-angular>Gulp Angular</md-button><section flex layout=row layout-align=\\\"left center\\\"><md-button href=# class=md-raised>Home</md-button><md-button href=# class=md-raised>About</md-button><md-button href=# class=md-raised>Contact</md-button></section><md-button class=acme-navbar-text>Application was created {{ vm.relativeDate }}.</md-button></md-toolbar>\");\n$templateCache.put(\"app/components/navservice/bottomSheet.html\",\"<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><title>Title</title></head><body></body></html>\");\n$templateCache.put(\"app/components/common/directives/icar-expanel.html\",\"<!DOCTYPE html><!--<div ng-include src=\\\"icar-expanel-templates.html\\\"></div>--><!--<link rel=\\\"import\\\" href=\\\"app/components/common/directives/icar-expanel/icar-expanel-templates.html\\\">--><style>md-tabs:not(.md-no-tab-content):not(.md-dynamic-height){\\n        min-height:360px;\\n    }</style><script type=text/ng-template id=panel-header.html><div layout=\\\"row\\\" flex>\\n        <div>{{details.name}}</div>\\n        <div class=\\\"md-summary\\\"></div>\\n        <md-expansion-panel-icon></md-expansion-panel-icon>\\n    </div></script><script type=text/ng-template id=panel-content.html><div layout=\\\"row\\\" flex>\\n        <div flex>\\n            <md-tabs flex>\\n                <md-tab ng-repeat=\\\"(key, tab) in schema\\\">\\n                    <md-tab-label>\\n                        {{key}}\\n                    </md-tab-label>\\n                    <md-tab-body>\\n                        <icar-tab-content tab-content=\\\"tab\\\"></icar-tab-content>\\n                    </md-tab-body>\\n                </md-tab>\\n            </md-tabs>\\n        </div>\\n    </div></script><script type=text/ng-template id=panel-footer.html><div layout=\\\"row\\\" flex>\\n        <md-button class=\\\"md-warn\\\" ng-click=\\\"save()\\\">Save</md-button>\\n        <md-button class=\\\"md-warn\\\" ng-click=\\\"discard()\\\">Discard</md-button>\\n        <md-button class=\\\"md-fab md-mini\\\" aria-label=\\\"Edit\\\" ng-click=\\\"edit()\\\">\\n            <md-icon class=\\\"material-icons md-mini\\\">mode_edit</md-icon>\\n            <md-tooltip md-direction=\\\"bottom\\\">\\n                Edit\\n            </md-tooltip>\\n        </md-button>\\n        <md-button class=\\\"md-fab md-mini\\\" aria-label=\\\"delete\\\" ng-click=\\\"delete(details.id)\\\">\\n            <md-icon class=\\\"material-icons md-mini\\\">delete</md-icon>\\n            <md-tooltip md-direction=\\\"bottom\\\">\\n                Delete\\n            </md-tooltip>\\n        </md-button>\\n    </div></script><md-expansion-panel md-component-id=details.assetpath flex><md-expansion-panel-collapsed ng-click=expandCollapse($panel) md-no-sticky=true flex><div ng-include=headerTemplate></div></md-expansion-panel-collapsed><md-expansion-panel-expanded flex><md-expansion-panel-header ng-click=expandCollapse($panel) md-no-sticky=true flex><div ng-include=headerTemplate></div></md-expansion-panel-header><md-expansion-panel-content ng-include=contentTemplate flex><!--<icar-tab-content tab-content=\\\"vm.schema\\\"></icar-tab-content>--></md-expansion-panel-content><md-expansion-panel-footer md-no-sticky=true flex><div ng-include=footerTemplate></div></md-expansion-panel-footer></md-expansion-panel-expanded></md-expansion-panel>\");\n$templateCache.put(\"app/components/common/directives/multi-list.html\",\"<!DOCTYPE html><div class=grp-popup ng-if=popup.visible><div class=grp-popup-backdrop ng-click=\\\"popup.visible = false\\\"></div><div class=grp-popup-inner style=\\\"width:{{popup.options.width}}%;\\n        height:{{popup.options.height}}%;\\n        left:{{ ( 100 - popup.options.width ) / 2 }}%;\\n        top:{{ ( 100 - popup.options.height ) / 2 }}%\\\"><div class=gp-head><span>{{popup.heading}}</span> <a class=\\\"waves-effect waves-light btn ng-isolate-scope gph-close\\\" ng-click=\\\"popup.visible = false\\\">x</a></div><div class=gp-content><span class=\\\"spinner -blue -big\\\" ng-show=\\\"!popup.datas || popup.datas.length <= 0\\\" ng-class=\\\"{\\'opacity_0\\':popup.datas.length > 0}\\\"></span><div class=gpc-half style=\\\"width:{{100 / popup.datas.length }}%\\\" ng-repeat=\\\"obj in popup.datas\\\" ng-init=\\\"obj.id = $index\\\"><div class=gpc-wrapper><nav class=\\\"gp-head nav-wrapper\\\"><span>{{obj.heading}}</span><span class=gph-smallHead> </span><i class=\\\"inputAfter fa fa-search\\\"></i> <input type=text placeholder=Search ng-model=obj.FilterStr></nav><div class=\\\"gp-content coolbar\\\"><div class=gpc-item ng-repeat=\\\"item in obj.list | filter : obj.FilterStr\\\"><span>{{item.name}}</span><div class=gpc-right-btn style=background:{{button.color}} ng-repeat=\\\"button in obj.buttons\\\" ng-click=\\\"button.onClick({item:item, object:obj, data:popup.datas}, defaultClick)\\\" ng-class=\\\"{\\'inactive\\':item.processing}\\\"><i ng-if=\\\"button.iconType ==\\'fa\\' && !item.processing\\\" class=\\\"fa fa-{{button.icon}}\\\" style=color:{{button.fColor}}></i> <i ng-if=\\\"button.iconType ==\\'fa\\' && item.processing\\\" class=\\\"fa fa-spin fa-gear\\\" style=color:{{button.fColor}}></i></div></div><div ng-if=\\\"obj.list.length <= 0\\\" class=gpc-noitem>No Items</div></div></div></div></div></div></div>\");\n$templateCache.put(\"app/components/common/directives/panel-expansion.html\",\"<!DOCTYPE html><!--<script type=\\\"text/ng-template\\\" id=\\\"fields-template.html\\\">--><!--<div> <h1>HTML Content </h1></div>--><!--<div ng-bind-html=\\\"fields\\\"></div>--><!--</script>--><md-expansion-panel md-component-id={{details.order}} flex><md-expansion-panel-collapsed ng-click=getCurrentData(details.order) flex><div class=md-title>{{details.section}}</div><div class=md-summary>demo</div><md-expansion-panel-icon></md-expansion-panel-icon></md-expansion-panel-collapsed><md-expansion-panel-expanded flex><md-expansion-panel-header ng-click=collapsePanel(details.order) md-no-sticky=true flex><div class=md-title>{{details.section}}</div><div class=md-summary></div><md-expansion-panel-icon></md-expansion-panel-icon></md-expansion-panel-header>{{selectedIndex}}<md-expansion-panel-content flex><md-tabs md-selected=selectedIndex md-border-bottom md-autoselect><md-tab ng-repeat=\\\"tab in tabs\\\" ng-disabled=tab.disabled label={{tab.title}} md-on-select=activeTab(selectedIndex)><div class=\\\"demo-tab tab{{$index%4}}\\\" style=\\\"padding: 25px; text-align: center\\\"><div bind-html-compile=tab.content></div></div></md-tab></md-tabs></md-expansion-panel-content><md-expansion-panel-footer md-no-sticky=true flex><div flex></div><md-button class=md-warn ng-click=save();>Save</md-button><md-button class=md-warn ng-click=discard(details.len)>Discard</md-button><md-button class=\\\"md-fab md-mini\\\" aria-label=Edit ng-click=edit()><md-icon class=\\\"material-icons md-mini\\\">mode_edit</md-icon><md-tooltip md-direction=bottom>Edit</md-tooltip></md-button><md-button class=\\\"md-fab md-mini\\\" aria-label=delete ng-click=delete(details.id)><md-icon class=\\\"material-icons md-mini\\\">delete</md-icon><md-tooltip md-direction=bottom>Delete</md-tooltip></md-button></md-expansion-panel-footer></md-expansion-panel-expanded></md-expansion-panel>\");\n$templateCache.put(\"app/components/common/directives/panel_delete_dialog.html\",\"<style>.div-area{padding:50px;}</style><md-dialog aria-label=deleteDialog><md-dialog-content><div class=div-area>Are you sure you want to delete?</div></md-dialog-content><md-dialog-actions layout=row><div flex><md-button class=\\\"md-raised md-primary\\\" ng-click=deleteSelected()>Yes</md-button><md-button class=\\\"md-raised md-primary\\\" ng-click=cancelSelected()>No</md-button></div></md-dialog-actions></md-dialog>\");\n$templateCache.put(\"app/components/common/directives/readonly-list.html\",\"<!DOCTYPE html><div><md-grid-list md-cols=5 md-row-height=4:4><md-grid-tile ng-repeat=\\\"item in listData[0]\\\"></md-grid-tile></md-grid-list></div>\");\n$templateCache.put(\"app/components/common/views/emptydiv.html\",\"<!DOCTYPE html><div></div>\");\n$templateCache.put(\"app/components/landingpage/footer/footer.html\",\"<!DOCTYPE html><div ui-view=footer></div>\");\n$templateCache.put(\"app/components/landingpage/center/center.html\",\"<!DOCTYPE html><div><!--<section>--><!--<div ui-view=\\\"centernav\\\"></div>--><!--</section>--><section id=middle><section><div ui-view=lefttoolbar></div></section><section><div class=centermain ui-view=centermain></div></section><section><div ui-view=righttoolbar></div></section></section></div>\");\n$templateCache.put(\"app/components/landingpage/header/header.html\",\"<!DOCTYPE html><md-toolbar class=icar-toolbar><div class=\\\"md-toolbar-tools icar-toolbar-tools\\\" layout-align=\\\"start center\\\"><div layout=row layout-align=\\\"start center\\\" flex=30><md-button class=md-icon-button aria-label=Icon ng-click=vm.toggleLeftSidebar()><md-tooltip>Left menu</md-tooltip><md-icon md-font-library=material-icons>dehaze</md-icon></md-button><img ng-src=assets/logo.png height=44 alt=Intellicar></div><div id=centernav2 flex=40 layout-align=\\\"space-around center\\\"><div layout=row ng-if=\\\"vm.isManagementTab<0\\\"><!--<a ui-sref=\\\"home.dashboard\\\" class=\\\"M9kDrd xyzabc\\\">Dashboard</a>--><!--<a ui-sref=\\\"home.management\\\" target=\\\"_blank\\\" class=\\\"M9kDrd xyzabc\\\">Management</a>--><!--<a ui-sref=\\\"home.reports\\\" class=\\\"M9kDrd xyzabc\\\">Reports</a>--></div></div><!--<span flex></span>--><div layout=row layout-align=\\\"end right\\\" flex=30 ng-keydown=vm.closeMdMenu($event) tabindex=0><md-button class=md-icon-button aria-label=notifications ng-click=vm.toggleRightSidebar()><md-tooltip>Alerts</md-tooltip><md-icon md-font-library=material-icons>notifications</md-icon></md-button><md-menu md-offset=\\\"0 2\\\" style=margin:0><md-button class=md-icon-button aria-label=User ng-click=$mdOpenMenu()><md-tooltip>User</md-tooltip><md-icon md-font-library=material-icons>face</md-icon></md-button><md-menu-content width=3 class=userPop-cont><div class=userPopp><div class=up-header>User Settings<div class=up-h-close ng-click=$mdCloseMenu()><i class=\\\"fa fa-times\\\"></i></div></div><div class=up-cont><div class=up-name>{{vm.userpref().name}}</div><div class=up-sub>{{vm.userpref().pname}}</div></div><div class=up-footer><!--<div class=\\\"up-btn\\\" ng-click=\\\"vm.changePassword();$mdCloseMenu()\\\">Change Password</div>--><div class=\\\"up-btn -logoutBtn\\\" ng-click=vm.logout();$mdCloseMenu()>Logout</div></div></div></md-menu-content></md-menu></div></div></md-toolbar>\");\n$templateCache.put(\"app/components/landingpage/leftnav/leftnav.html\",\"<!DOCTYPE html><div ui-view=leftnav></div>\");\n$templateCache.put(\"app/components/landingpage/reports/reports.html\",\"<!DOCTYPE html><div id=reports>This is reports view;</div>\");\n$templateCache.put(\"app/components/landingpage/dashboard/leftnavtree/leftnav_dashboard.html\",\"<!DOCTYPE html><style>md-checkbox {\\n        margin: 8px;\\n        cursor: pointer;\\n        padding-left: 0px;\\n        padding-right: 0;\\n        line-height: 4px;\\n        min-width: 18px;\\n        min-height: 1px;\\n    }\\n    /*md-checkbox .md-icon {width:15px; height:15px;}*/\\n    md-sidenav{height:100%;}\\n    md-checkbox span{font-weight:normal;}\\n\\n    .angular-ui-tree-node, .angular-ui-tree-placeholder{line-height:22px;}\\n\\n    .hidden {\\n        display: none!important;\\n        visibility: hidden!important;\\n    }\\n\\n    .search-result {\\n        font-size:13px;\\n        font-style:italic;\\n        font-weight:normal;\\n    }</style><!-- Template for parent nodes --><script type=text/ng-template id=parent_nodes_renderer.html><div class=\\\"icar-wrap-text\\\">\\n        <a ng-click=\\\"toggle(this)\\\" style=\\\"cursor:pointer;\\\" ng-show=\\\"item.items.length > 0\\\">\\n            <md-icon md-font-library=\\\"material-icons\\\" ng-show=\\\"collapsed\\\">arrow_drop_down</md-icon>\\n            <md-icon md-font-library=\\\"material-icons\\\" ng-show=\\\"!collapsed\\\">play_arrow</md-icon>\\n        </a>\\n        <span style=\\\"padding-left:28px;\\\" ng-hide=\\\"item.items.length > 0\\\"></span>\\n        <md-checkbox aria-label=\\\"Checkbox 1\\\" ng-checked=\\\"\\'checked\\'===item.checkStatus\\\"\\n                     md-indeterminate=\\\"\\'partlyChecked\\'===item.checkStatus\\\"\\n                     ng-click=\\\"vm.toggleCheck(item)\\\"\\n                     data-nodrag>\\n        </md-checkbox>\\n        <span>{{item.title | titleCase }}</span ><br/>\\n    </div>\\n    <ol ui-tree-nodes ng-model=\\\"item.items\\\" ng-show=\\\"collapsed\\\">\\n        <li ng-repeat=\\\"item in item.items\\\" ui-tree-node\\n            ng-hide=\\\"!treeFilter(item, vm.tree_search_pattern, supportedFields)\\\"\\n            ng-include=\\\"(item.items) ? \\'parent_nodes_renderer.html\\' : \\'terminal_node_renderer.html\\'\\\">  </li>\\n    </ol></script><!-- Template for terminal nodes --><script type=text/ng-template id=terminal_node_renderer.html><div class=\\\"tree-node tree-node-content\\\">\\n        <md-checkbox aria-label=\\\"chekbox\\\" ng-checked=\\\"item.checkStatus === \\'checked\\'\\\"\\n                     md-indeterminate=\\\"item.checkStatus === \\'partlyChecked\\'\\\"\\n                     ng-click=\\\"vm.toggleCheck(item)\\\"\\n                     data-nodrag>\\n        </md-checkbox>\\n        <span>{{item.title | titleCase }}\\n        </span>\\n    </div></script><md-sidenav class=md-sidenav-left md-component-id=left md-is-locked-open=left_nav_toggle flex><!--The ROot Node--><md-input-container><label>Search</label><input type=text ng-model=vm.tree_search_pattern ng-change=vm.expandAll()> <span class=search-result ng-hide=!vm.search_results>0 results found</span></md-input-container><md-button ng-click=vm.expand_tree()>Expand</md-button><div ui-tree id=tree-root callbacks=treeOptions ng-if=vm.tree_data.length><ol ui-tree-nodes ng-model=vm.tree_data ng-class=\\\"{hidden: collapsed}\\\"><li ng-repeat=\\\"item in vm.tree_data\\\" ui-tree-node data-nodrag data-collapsed=collapsed ng-hide=\\\"vm.search_results = !treeFilter(item, vm.tree_search_pattern, supportedFields)\\\" ng-include=\\\"(item.items) ? \\'parent_nodes_renderer.html\\' : \\'terminal_node_renderer.html\\'\\\"></li></ol></div></md-sidenav>\");\n$templateCache.put(\"app/components/landingpage/dashboard/lefttoolbar/lefttoolbar_dashboard.html\",\"<!DOCTYPE html><div id=lefttoolbar_dashboard></div>\");\n$templateCache.put(\"app/components/landingpage/dashboard/map/history-dialog.html\",\"<!DOCTYPE html><!--<md-dialog aria-label=\\\"Location Tracker History\\\" ng-cloak flex=\\\"85\\\">--><!--<md-toolbar style=\\\"height:42px; text-align:center;\\\">--><!--<div class=\\\"md-toolbar-tools md-accent\\\">--><!--<h2 layout-align=\\\"center center\\\" style=\\\"width:100%\\\" ng-click=\\\"another()\\\">Location History</h2>--><!--<span flex></span>--><!--<md-button class=\\\"md-icon-button\\\" ng-click=\\\"cancel()\\\">--><!--<md-icon md-font-library=\\\"material-icons\\\">close</md-icon>--><!--</md-button>--><!--</div>--><!--</md-toolbar>--><!--<md-content>--><!--<md-tabs class=\\\"\\\" md-selected=\\\"selectedTab\\\" md-align-tabs=\\\"top\\\" md-border-bottom md-autoselect md-dynamic-height>--><!--<md-tab>--><!--<a ui-sref=\\\"home.history\\\" style=\\\"width:100%; height:100%\\\">History</a>--><!--</md-tab>--><!--<md-tab>--><!--<a ui-sref=\\\"home.geofence\\\" style=\\\"width:100%; height:100%\\\">Geofence</a>--><!--</md-tab>--><!--</md-tabs>--><!--<div flex ui-view=\\\"dialogview\\\" style=\\\"width:100%; height:550px; background:#eee;\\\">--><!--</div>--><!--</md-content>--><!--</md-dialog-content>--> <!--</md-dialog>-->\");\n$templateCache.put(\"app/components/landingpage/dashboard/map/history-map-control.html\",\"<!DOCTYPE html><div class=control-panel ng-class=\\\"{\\'active\\':gotHistory()}\\\" layout=row flex=100><!--<div class=\\'control-panel\\'  layout=\\\"row\\\" flex=\\\"100\\\">--><div class=md-padding></div><div class=marker-details flex><span>Time : {{tracePointGpsTime | date : \\'d MMM, h:mm:ss a\\'}}</span><br><span>Odometer : {{tracePointOdometer}} km </span><br><span>Speed : {{tracePointSpeed}} kmph</span><br><span>Ignition : <span ng-show=ignStatus>ON</span> <span ng-show=!ignStatus>OFF</span></span></div><md-button class=\\\"md-fab md-primary md-mini play-pause-btns\\\" ng-click=goSlow()><md-icon class=icon-font md-font-library=material-icons>fast_rewind</md-icon><md-tooltip>Go Slow</md-tooltip></md-button><md-button class=\\\"md-fab md-primary md-mini play-pause-btns\\\" ng-show=play ng-click=playAnimation()><md-icon class=icon-font md-font-library=material-icons>play_arrow</md-icon><md-tooltip>Play</md-tooltip></md-button><md-button class=\\\"md-fab md-primary md-mini play-pause-btns\\\" ng-hide=play ng-click=pauseAnimation()><md-icon class=icon-font md-font-library=material-icons>pause</md-icon><md-tooltip>Pause</md-tooltip></md-button><md-button class=\\\"md-fab md-primary md-mini play-pause-btns\\\" ng-click=fastForward()><md-icon class=icon-font md-font-library=material-icons>fast_forward</md-icon><md-tooltip md-direction=top>Go Fast</md-tooltip></md-button><md-button class=\\\"md-fab md-primary md-mini play-pause-btns\\\" ng-click=stopAnimation()><md-icon class=icon-font md-font-library=material-icons>stop</md-icon></md-button><div class=md-padding></div><md-slider class=\\\"md-accent icar-slider\\\" md-discrete ng-model=slider step=1 min={{initialSliderTime}} ng-change=onChangeSlider() max={{finalSliderTime}} aria-label=timeline flex></md-slider><div class=md-padding></div><md-button class=\\\"md-fab md-primary md-mini play-pause-btns\\\" ng-click=\\\"moveOneStep(\\'backward\\')\\\"><md-icon class=icon-font md-font-library=material-icons>remove</md-icon></md-button><md-button class=\\\"md-fab md-primary md-mini play-pause-btns popover\\\" data-content=\\\"Move 1 step\\\" ng-click=\\\"moveOneStep(\\'forward\\')\\\"><md-icon class=icon-font md-font-library=material-icons>add</md-icon></md-button><div class=md-padding></div><br><br><div class=historGraphContainer><!--<div class=\\\"dataLine\\\" ng-repeat=\\\"data in sampleData\\\" ng-if=\\\"data.ignition\\\"--><!--style=\\\"width:{{graphWRatio}}%; left:{{($index * graphWRatio)}}%\\\">--><!--</div>--><!----><canvas id=historyGraphCanvas style=\\\"height:100%; width: 100%\\\"></canvas></div></div>\");\n$templateCache.put(\"app/components/landingpage/dashboard/map/immobalize-dialog.html\",\"<!DOCTYPE html><md-dialog aria-label=dialog><md-dialog-content><div class=\\\"div-area immobDialog\\\" layout=column layout-align=\\\"center center\\\"><div class=imd-head><span ng-class=\\\"{\\'redColor\\':!mobilityRequest,\\'greenColor\\':mobilityRequest}\\\">{{msg}}</span><br><span>{{notify}}</span></div><table><tr><td>Vehicle No</td><td>{{vehicleno}}</td></tr><tr><td>Device ID</td><td>{{deviceid}}</td></tr></table></div></md-dialog-content><md-dialog-actions layout=row><div flex layout=row layout-align=\\\"space-around center\\\"><md-button class=\\\"md-raised md-primary\\\" ng-if=!commandSent ng-click=okImmobilize() style=margin-left:-8px>Yes</md-button><md-button class=\\\"md-raised md-primary\\\" ng-if=!commandSent ng-click=cancelImmobalize()>No</md-button><md-button class=\\\"md-raised md-primary\\\" ng-if=commandSent ng-click=cancelImmobalize()>OK</md-button></div></md-dialog-actions></md-dialog>\");\n$templateCache.put(\"app/components/landingpage/dashboard/map/info-window.html\",\"<div layout=column><div class=info-w-header></div><md-table-container style=\\\"min-height: 130px; max-height:130px; min-width:300px; max-width:300px;\\n                                position: relative; overflow: hidden\\\"><table md-table md-row-select multiple class=trPadding><tbody md-body><tr md-row md-select-id=carnumber class=infoWHead md-auto-select><td md-cell><strong>Reg.No</strong></td><td md-cell colspan=3>{{parameter.clickedMarker.vehicleno}}</td></tr><tr md-row md-select-id=timestamp md-auto-select><td md-cell><strong>Last seen at</strong></td><td md-cell colspan=3>{{parameter.clickedMarker.timestamp | date : \\'dd MMM yyyy - h:mm a\\'}}</td></tr><tr md-row md-select-id=odometer md-auto-select><td md-cell><strong>Odometer</strong></td><td md-cell class=infoWmiddle>{{parameter.clickedMarker.odometer}}</td><td md-cell><strong>Speed</strong></td><td md-cell>{{parameter.clickedMarker.speed}}</td></tr><tr md-row md-select-id=ignitionstatus md-auto-select><td md-cell><strong>Ignition</strong></td><td md-cell class=infoWmiddle>{{parameter.clickedMarker.ignitionstatus ? \\'On\\' : \\'Off\\'}}</td><td md-cell><strong>Mobility</strong></td><td md-cell>{{parameter.clickedMarker.mobilistatusFilter}}</td></tr><tr md-row md-select-id=carbattery md-auto-select><td md-cell><strong>Vehicle batt</strong></td><td md-cell class=infoWmiddle ng-class=\\\"{\\'redBattery\\' : parameter.clickedMarker.carbattery < 9.5 }\\\">{{parameter.clickedMarker.carbattery}}</td><td md-cell><strong>Device batt</strong></td><td md-cell ng-class=\\\"{\\'redBattery\\' : parameter.clickedMarker.devbattery < 3.55 }\\\">{{parameter.clickedMarker.devbattery}}</td></tr><tr md-row md-select-id=cartype md-auto-select><td md-cell><strong>Make</strong></td><td md-cell>{{parameter.clickedMarker.meta.cartype}}</td></tr><tr md-row md-select-id=deviceid md-auto-select><td md-cell><strong>Device ID</strong></td><td md-cell colspan=3>{{parameter.clickedMarker.deviceid}}</td></tr></tbody></table></md-table-container><div layout=row><md-button class=\\\"infoWBtn md-raised md-small infoWBtn\\\" ng-hide=parameter.hideMobilityControls ng-click=parameter.mobilize(0)><span>Immobilize</span></md-button><md-button class=\\\"infoWBtn md-raised md-small infoWBtn\\\" ng-hide=parameter.hideMobilityControls ng-click=parameter.mobilize(1)><span>Mobilize</span></md-button><md-button class=\\\"md-raised md-accent md-small infoWBtn\\\" ng-click=parameter.showHistory()>History</md-button></div></div>\");\n$templateCache.put(\"app/components/landingpage/dashboard/map/map.html\",\"<!DOCTYPE html><style>.infowindow-img {\\n        height: 30px;\\n        width: 30px;\\n    }\\n\\n    .infowindow-devbattery-img {\\n        height: 50px;\\n    }\\n\\n    .icar-padding {\\n        padding: 5px;\\n    }\\n\\n    .map-area {\\n        padding: 0;\\n    }\\n\\n    .container-margin {\\n        margin-bottom: 0;\\n        padding: 0;\\n        height: 31px\\n    }\\n\\n    ul {\\n        margin: 0;\\n    }\\n\\n    ul li {\\n        width: 100%;\\n        height: 100%;\\n        list-style: none;\\n    }\\n\\n    li {\\n        text-align: center;\\n    }\\n\\n    .icon-font {\\n        font-size: 25px;\\n    }\\n\\n    li:hover {\\n        box-shadow: 1px 0px 6px 0px;\\n        cursor: pointer;\\n    }\\n\\n    .li-clicked {\\n        background: #d1e934;\\n    }\\n\\n    .md-light {\\n        color: #000;\\n    }\\n\\n    /*.icar-checkbox{*/\\n    /*transform:scale(0.8);*/\\n    /*}*/\\n    .icon-visibility {\\n        color: #000;\\n    }\\n\\n    .icon-running {\\n        color: #0C8;\\n    }\\n\\n    .icon-stopped {\\n        color: #6991FD;\\n    }\\n\\n    .icon-active {\\n        color: #000;\\n    }\\n\\n    .icon-immobilized {\\n        color: rgba(245, 86, 94, 0.85);\\n    }\\n\\n    .lefttoolbar {\\n        background: rgba(163, 204, 255, 0.7) !important;\\n    }\\n\\n    .mapDView {\\n        top: 52px;\\n    }\\n\\n    .icar-tabs {\\n        border-bottom: 1px solid #ccc;\\n    }\\n\\n    .anchor-line {\\n        border-bottom: 1px solid #F00;\\n    }\\n\\n    #marker_infowindow {\\n        display:none;\\n    }</style><div><!--layout=\\\"row\\\" layout-align=\\\"center center\\\"--><div layout=row flex><md-input-container class=container-margin flex=30><input type=text placeholder=\\\"Apply filters...\\\" size=50 ng-model=vm.filterStr ng-change=vm.runFilters(vm.filterStr)></md-input-container><div layout=row layout-align=\\\"center center\\\"><div class=toggleButton ng-class=\\\"{\\'active\\':vm.onRoaded}\\\">On Road <input type=checkbox class=icar-checkbox ng-model=vm.onRoaded aria-label=onroaded ng-change=vm.onRoadCheck()></div><div class=toggleButton ng-class=\\\"{\\'active\\':vm.offRoaded}\\\">Off Road <input type=checkbox class=icar-checkbox ng-model=vm.offRoaded aria-label=onroaded ng-change=vm.offRoadCheck()></div></div><ul id=nav layout=row layout-align=\\\"end center\\\" flex><li ng-class=\\\"{true: \\'li-clicked\\'}[vm.filterStr==\\'\\']\\\" ng-click=\\\"vm.runFilters(\\'\\')\\\" layout=column layout-align=\\\"center center\\\"><md-icon ng-class=\\\"{true: \\'md-light\\'}[vm.filterStr==\\'\\']\\\" class=\\\"icon-font icon-visibility\\\" md-font-library=material-icons>visibility</md-icon><span ng-class=\\\"{true: \\'md-light\\'}[vm.filterStr==\\'\\']\\\" style=\\\"font-size: 13px\\\">{{vm.vehicleStats.showall}}</span><md-tooltip>All</md-tooltip></li><li ng-class=\\\"{true: \\'li-clicked\\'}[vm.filterStr==\\'Running\\']\\\" ng-click=\\\"vm.runFilters(\\'Running\\')\\\" layout=column layout-align=\\\"center center\\\"><md-icon ng-class=\\\"{true: \\'md-light\\'}[vm.filterStr==\\'Running\\']\\\" class=\\\"icon-font icon-running\\\" md-font-library=material-icons>time_to_leave</md-icon><span ng-class=\\\"{true: \\'md-light\\'}[vm.filterStr==\\'Running\\']\\\" style=\\\"font-size: 13px\\\">{{vm.vehicleStats.running}}</span><md-tooltip>Ignition On</md-tooltip></li><li ng-class=\\\"{true: \\'li-clicked\\'}[vm.filterStr==\\'Stopped\\']\\\" ng-click=\\\"vm.runFilters(\\'Stopped\\')\\\" layout=column><md-icon ng-class=\\\"{true: \\'md-light\\'}[vm.filterStr==\\'Stopped\\']\\\" class=\\\"icon-font icon-stopped\\\" md-font-library=material-icons>radio_button_checked</md-icon><span ng-class=\\\"{true: \\'md-light\\'}[vm.filterStr==\\'Stopped\\']\\\" style=\\\"font-size: 13px\\\">{{vm.vehicleStats.stopped}}</span><md-tooltip>Ignition Off</md-tooltip></li><li ng-class=\\\"{true: \\'li-clicked\\'}[vm.filterStr==\\'Active\\']\\\" ng-click=\\\"vm.runFilters(\\'Active\\')\\\" layout=column><md-icon ng-class=\\\"{true: \\'md-light\\'}[vm.filterStr==\\'Active\\']\\\" class=\\\"icon-font icon-active\\\" md-font-library=material-icons>lock_open</md-icon><span ng-class=\\\"{true: \\'md-light\\'}[vm.filterStr==\\'Active\\']\\\" style=\\\"font-size: 13px\\\">{{vm.vehicleStats.active}}</span><md-tooltip>Active</md-tooltip></li><li ng-class=\\\"{true: \\'li-clicked\\'}[vm.filterStr==\\'Immobilized\\']\\\" ng-click=\\\"vm.runFilters(\\'Immobilized\\')\\\" layout=column><md-icon ng-class=\\\"{true: \\'md-light\\'}[vm.filterStr==\\'Immobilized\\']\\\" class=\\\"icon-font icon-immobilized\\\" md-font-library=material-icons>lock</md-icon><span ng-class=\\\"{true: \\'md-light\\'}[vm.filterStr==\\'Immobilized\\']\\\" style=\\\"font-size: 13px\\\">{{vm.vehicleStats.immobilized}}</span><md-tooltip>Immoblized</md-tooltip></li><li ng-class=\\\"{true: \\'li-clicked\\'}[vm.filterStr==\\'Not Communicating\\']\\\" ng-click=\\\"vm.runFilters(\\'Not Communicating\\')\\\" layout=column><md-icon ng-class=\\\"{true: \\'md-light\\'}[vm.filterStr==\\'Not Communicating\\']\\\" class=\\\"icon-font icon-immobilized\\\" md-font-library=material-icons>signal_cellular_off</md-icon><span ng-class=\\\"{true: \\'md-light\\'}[vm.filterStr==\\'Immobilized\\']\\\" style=\\\"font-size: 13px\\\">{{vm.vehicleStats.noComm}}</span><md-tooltip>Vehicle Not Communicating</md-tooltip></li><li ng-class=\\\"{true: \\'li-clicked\\'}[vm.filterStr==\\'Device pullout\\']\\\" ng-click=\\\"vm.runFilters(\\'Device pullout\\')\\\" layout=column><md-icon ng-class=\\\"{true: \\'md-light\\'}[vm.filterStr==\\'Device pullout\\']\\\" class=\\\"icon-font icon-immobilized\\\" md-font-library=material-icons>sim_card_alert</md-icon><span ng-class=\\\"{true: \\'md-light\\'}[vm.filterStr==\\'Device pullout\\']\\\" style=\\\"font-size: 13px\\\">{{vm.vehicleStats.devPullout}}</span><md-tooltip>Device Pullout</md-tooltip></li></ul></div><div class=lefttoolbar ng-controller=\\\"GeofenceViewController as vm\\\"><div class=ltb_item ng-repeat=\\\"item in vm.leftTB\\\" ng-mouseenter=\\\"item.activeInt = 1\\\" ng-mouseleave=\\\"item.activeInt = 0\\\" ng-class=\\\"{\\'ltb_item-line\\':item.type == \\'line\\', \\'active\\': vm.fencesActive()}\\\"><div class=ltbi_button ng-click=vm.buttonClick(item) ng-if=\\\"item.type == \\'button\\' || item.type == \\'toggleButton\\'\\\" ng-class=\\\"{\\'active\\':item.data.active && item.type == \\'toggleButton\\',\\n                 \\'independ\\':item.data.independent,\\'hasChildren\\':item.children }\\\"><div class=ltbi_icon ng-if=\\\"item.hasOwnProperty(\\'icon\\')\\\"><i class=\\\"fa {{item.icon}}\\\" ng-if=\\\"item.iconType == \\'fa\\'\\\" aria-hidden=true></i> <i ng-if=\\\"item.iconType == \\'md\\'\\\" class=material-icons>{{item.icon}}</i> <img ng-if=\\\"item.iconType == \\'png\\' && item.data.active\\\" ng-src={{item.icon}}.active.png> <img ng-if=\\\"item.iconType == \\'png\\' && !item.data.active\\\" ng-src={{item.icon}}.png> <i ng-if=\\\"item.iconType == \\'png\\'\\\" style=\\\"position: absolute; color: rgba(0,0,0,0)!important; width: 80%; height: 80%\\\"></i></div><div class=ltbi_name ng-if=item.name>{{item.name}} <span>{{item.description}}</span></div></div><div class=ltbi_cont ng-if=item.content ng-if=\\\"item.type == \\'button\\' || item.type == \\'toggleButton\\' \\\"><md-input-container class=md-input-cont><label>Color</label><input type=text ng-model=color></md-input-container></div><!--Child Buttons--><div class=ltbi_loc ng-init=\\\"item.activeInt = 0\\\" ng-if=item.children style=\\\"width: {{((item.children.length * 44) + 40 ) * item.activeInt }}px\\\"><div ng-repeat=\\\"child in item.children\\\" class=ltbil_item ng-click=\\\"vm.childClick(child,item.childType )\\\" ng-class=\\\"{\\'active\\':child.id == vm.currentLocation}\\\" ng-if=\\\"item.childType == \\'location\\'\\\">{{child.notation}}</div><div class=\\\"ltbil_item childButton\\\" ng-click=vm.buttonClick(child) ng-if=\\\"item.childType == \\'button\\'\\\" ng-repeat=\\\"child in item.children\\\" ng-class=\\\"{\\'active\\':child.data.active && child.type == \\'toggleButton\\',\\'independ\\':child.data.independent }\\\"><div class=ltbi_icon ng-if=\\\"child.hasOwnProperty(\\'icon\\')\\\"><i class=\\\"fa {{child.icon}}\\\" ng-if=\\\"child.iconType == \\'fa\\'\\\" aria-hidden=true></i> <i ng-if=\\\"child.iconType == \\'md\\'\\\" class=material-icons>{{child.icon}}</i> <img ng-if=\\\"child.iconType == \\'png\\' && !child.data.active\\\" ng-src={{child.icon}}.png> <img ng-if=\\\"child.iconType == \\'png\\' && child.data.active\\\" ng-src={{child.icon}}.active.png> <i ng-if=\\\"child.iconType == \\'png\\'\\\" style=\\\"position: absolute; color: rgba(0,0,0,0)!important; width: 80%; height: 80%\\\">a</i></div><div class=ltbi_name ng-if=child.name>{{child.name}}<!--<span>{{child.description}}</span>--></div></div></div></div></div><div id=mapCanvas><!--<script id=\\\"searchbox.tpl.html\\\" type=\\\"text/ng-template\\\">--><!--<input id=\\\"pac-input\\\" type=\\\"text\\\" placeholder=\\\"Search\\\">--><!--</script>--> <input id=pac-input class=controls type=text placeholder=Search...><div id=map style=width:100%></div></div></div><div class=int-dialog ng-controller=\\\"DialogController as vm\\\"><!--<div class=\\\"id-background\\\" ng-click=\\\"vm.closeTab()\\\"></div>--><div class=id-container ng-if=vm.dialogShow()><div class=id-header><div class=map-DHeader1><span>Vehicle History</span> <button class=\\\"md-icon-button md-button md-ink-ripple\\\" type=button style=float:right ng-click=vm.closeTab() aria-label=close><md-icon md-font-library=material-icons class=\\\"ng-scope material-icons\\\">close</md-icon><div class=md-ripple-container></div></button></div></div><div class=id-body><div class=\\\"row icar-tabs\\\"><div class=\\\"col s12\\\"><ul class=tabs select_tab=vm.selectedTab><li class=\\\"tab col s2\\\"><a ng-class=\\\"{true: \\'active anchor-line\\'}[vm.selectedTab == 0]\\\" ui-sref=home.history>HISTORY</a></li><li class=\\\"tab col s2\\\"><a ng-class=\\\"{true: \\'active anchor-line\\'}[vm.selectedTab == 1]\\\" ui-sref=home.historyData>HISTORY Report</a></li><li class=\\\"tab col s2\\\"><a ng-class=\\\"{true: \\'active anchor-line\\'}[vm.selectedTab == 2]\\\" ui-sref=home.geofence>Geofence</a></li><li class=\\\"tab col s2\\\"><a ng-class=\\\"{true: \\'active anchor-line\\'}[vm.selectedTab == 3]\\\" ui-sref=home.alarm>Alarms</a></li><li class=\\\"tab col s2\\\"><a ng-class=\\\"{true: \\'active anchor-line\\'}[vm.selectedTab == 4]\\\" ui-sref=home.downloadHistory>Download Reports</a></li></ul></div><div flex ui-view=dialogview id=dialogview class=mapDView></div></div></div></div></div><div id=fence_infowindow layout=row ng-non-bindable flex><div layout=column id=fenceWindow ng-cloak><table><tbody><tr><th>Name:</th><td>{{vm.selectedFenceObj.info.name}}</td></tr><tr><th>Type:</th><td>{{vm.selectedFenceObj.info.tagdata.olafilter}}</td></tr></tbody></table></div></div><div id=marker_infowindow layout=row ng-non-bindable flex ng-cloak><div layout=column id=markerWindow ng-cloak><div class=info-w-header></div><md-table-container style=\\\"min-height: 150px; max-height:175px; min-width:300px; max-width:300px;\\n                                position: relative; overflow: hidden\\\"><table md-table md-row-select multiple class=trPadding><tbody md-body><tr md-row md-select-id=carnumber class=infoWHead md-auto-select><td md-cell><strong>Reg.No</strong></td><td md-cell colspan=3 id=myreg>{{clickedMarker.rtgps.vehicleno}}</td></tr><tr md-row md-select-id=deviceid md-auto-select><td md-cell><strong>Device ID</strong></td><td md-cell colspan=3>{{clickedMarker.rtgps.deviceid}}</td></tr><tr md-row md-select-id=cartype md-auto-select><td md-cell><strong>Model</strong></td><td md-cell colspan=3>{{clickedMarker.rtgps.meta.cartype}}</td></tr><tr md-row md-select-id=timestamp md-auto-select><td md-cell><strong>Last seen at</strong></td><td md-cell colspan=3 id=timestamp>{{clickedMarker.rtgps.timestamp | date : \\'dd MMM yyyy - h:mm a\\'}}</td></tr><tr md-row md-select-id=odometer md-auto-select><td md-cell><strong>Odometer</strong></td><td md-cell class=infoWmiddle id=odometer>{{clickedMarker.rtgps.odometer}}</td><td md-cell><strong>Speed</strong></td><td md-cell id=speed>{{clickedMarker.rtgps.speed}}</td></tr><tr md-row md-select-id=ignitionstatus md-auto-select><td md-cell><strong>Ignition</strong></td><td md-cell class=infoWmiddle id=ignition>{{clickedMarker.rtgps.ignitionstatus ? \\'On\\' : \\'Off\\'}}</td><td md-cell><strong>Mobility</strong></td><td md-cell id=mobility>{{clickedMarker.rtgps.mobilistatusFilter}}</td></tr><tr md-row md-select-id=carbattery md-auto-select><td md-cell><strong>Vehicle batt</strong></td><td md-cell class=infoWmiddle ng-class=\\\"{\\'redBattery\\' : clickedMarker.rtgps.carbattery < 9.5 }\\\">{{clickedMarker.rtgps.carbattery}}</td><td md-cell><strong>Device batt</strong></td><td md-cell ng-class=\\\"{\\'redBattery\\' : clickedMarker.rtgps.devbattery < 3.55 }\\\">{{clickedMarker.rtgps.devbattery}}</td></tr></tbody></table></md-table-container><br><div layout=row><md-button class=\\\"infoWBtn md-raised md-small infoWBtn\\\" ng-hide=hideMobilityControls ng-click=vm.mobilize(0)><span>Immobilize</span></md-button><md-button class=\\\"infoWBtn md-raised md-small infoWBtn\\\" ng-hide=hideMobilityControls ng-click=vm.mobilize(1)><span>Mobilize</span></md-button><md-button class=\\\"md-raised md-accent md-small infoWBtn\\\" id=historyBtn ng-click=vm.showHistory()>History</md-button></div></div></div>\");\n$templateCache.put(\"app/components/landingpage/dashboard/rightnav/rightnavalert_dashboard.html\",\"<!DOCTYPE html><style>.md-button{\\n        text-transform:capitalize;\\n    }\\n    .alert-md-content{height:590px;overflow-y:scroll;}\\n    .container-margin{margin-bottom: 0; padding:0; height:31px}\\n\\n    .md-title {font-size:13px !important;}\\n\\n    .panel-content{padding:4px 4px;}\\n\\n    .ignition-on-bg {\\n        background:#2acc60 !important;\\n    }\\n    .ignition-off-bg {\\n        background:#6476a2 !important;\\n    }</style><style>.sidenav {\\n        height: 100%;\\n        width: 320px;\\n        position: fixed;\\n        z-index: 1;\\n        top: 0;\\n        right: 0;\\n        overflow-x: hidden;\\n        transition: 0.5s;\\n        padding-top: 60px;\\n        border-left:1px solid #ccc;\\n    }\\n\\n    #main {\\n        margin-right:320px;\\n        transition: margin-right .5s;\\n    }\\n\\n    @media screen and (max-height: 450px) {\\n        .sidenav {padding-top: 15px;}\\n    }\\n\\n\\n    .sidenav .id-body {\\n        width:320px;\\n        /*transition: 0.3s*/\\n    }\\n\\n    .webui-popover-content{\\n        word-wrap:break-word;\\n    }\\n\\n    /*.eye-icon{*/\\n        /*position: absolute;*/\\n        /*right: 3px;*/\\n        /*top: 68px;*/\\n    /*}*/\\n\\n    .tabs .tab a{\\n        padding:0;\\n    }</style><div id=mySidenav class=sidenav><div class=id-body id=right_side_nav_content><div class=row><div class=\\\"col s12\\\" style=padding:0><ul class=tabs><li class=\\\"tab col s4\\\"><a class=active href=#active>Active</a></li><li class=\\\"tab col s4\\\"><a href=#history>History</a></li><li class=\\\"tab col s4\\\"><a href=#alarms>Alarms</a></li></ul>{{vm.vehicleAddress}}</div><div id=active class=\\\"col s12\\\"><span class=\\\"spinner -sp-blue -sp-big\\\" ng-if=!vm.activeTabData></span><div class=\\\"expansionNav coolbar\\\" style=top:110px ng-if=vm.activeTabData><!--first wrapper--><div class=en_main ng-if=\\\"mainKey != \\'active\\' && vm.navFilter(main)\\\" ng-class=\\\"{\\'active\\':main.active}\\\" ng-repeat=\\\"(mainKey, main) in vm.activeTabData \\\" ng-init=\\\"main.active = true\\\"><div class=en_label ng-class=\\\"{\\'{{main.class}}\\':true}\\\" ng-click=vm.itemClicked(main,1) style=\\\"background:#4FC3F7 !important\\\">{{mainKey}}<div class=\\\"enl_item enl_add\\\"><i class=\\\"fa fa-plus\\\" ng-if=!main.active></i> <i class=\\\"fa fa-minus\\\" ng-if=main.active></i></div><div class=\\\"enl_item enl_count\\\">{{vm.returnLength(main,1)}}</div></div><!--middle wrapper--><div class=en-wrapper><div class=en_mid ng-repeat=\\\"(midKey, mid) in main \\\" ng-if=\\\"midKey != \\'active\\' && vm.navFilter(mid)\\\" ng-init=\\\"mid.active = true\\\" ng-class=\\\"{\\'en-closed\\':!main.active}\\\" style=height:{{vm.returnHeight(mid);}}><div class=en_label ng-click=vm.itemClicked(mid,2) style=background:#B3E5FC!important>{{midKey}}<div class=\\\"enl_item enl_add\\\"><i class=\\\"fa fa-plus\\\" ng-if=!mid.active></i> <i class=\\\"fa fa-minus\\\" ng-if=mid.active></i></div><div class=\\\"enl_item enl_count\\\">{{vm.returnLength(mid,2)}}</div></div><!--final wrapper--><div class=en-wrapper><div class=en_last ng-repeat=\\\"(carKey, car) in mid\\\" ng-if=\\\"carKey != \\'active\\' && vm.navFilter(car)\\\" ng-class=\\\"{\\'active\\':car.active && mid.active,\\'en-closed\\':!mid.active, \\'noExit\\':car.stillActive}\\\"><div class=en_head ng-click=\\\"vm.itemClicked(car,3); \\\" ng-class=\\\"{\\'resolvedHeader\\':car.resolved}\\\">{{carKey}}<!--<div class=\\\"enl_item enl_add\\\">--><!--<i class=\\\"fa fa-plus\\\" ng-if=\\\"!car.active\\\"></i>--><!--<i class=\\\"fa fa-minus\\\" ng-if=\\\"car.active\\\"></i>--><!--</div>--><div class=\\\"enl_item enl_entry\\\" ng-class=\\\"{\\'redBG\\':!car.triggerType,\\'greenBG\\':car.triggerType}\\\"><i class=\\\"fa fa-arrow-down\\\" ng-if=car.triggerType></i> <i class=\\\"fa fa-arrow-up\\\" ng-if=!car.triggerType></i></div><div class=\\\"enl_item enl_time\\\" ng-class=\\\"{ \\'ignition-on-bg\\': vm.vehicleData[carKey].ignitionstatus==1 ,\\n                                                 \\'ignition-off-bg\\': vm.vehicleData[carKey].ignitionstatus==0  }\\\">{{ vm.getTimeDiff(car) }}</div></div><div class=en_body><div class=enb_full ng-if=car.triggerType><i class=\\\"fa fa-arrow-down greenColor\\\"></i> Entry : {{car.entry | date : \\'d MMM, h:mm a\\'}}</div><div class=enb_full ng-if=!car.triggerType><i class=\\\"fa fa-arrow-up redColor\\\"></i> Exit : {{car.entry | date : \\'d MMM, h:mm a\\'}}</div><!--<div class=\\\"enb_full\\\" ng-if=\\\"!car.stillActive\\\">--><!--<i class=\\\"fa fa-arrow-up redColor\\\" ></i> Exit : {{car.exit | date : \\'d MMM, h:mm a\\'}}--><!--</div>--><div class=enb_full><textarea class=coolbar placeholder=\\\"Put Your Message\\\" ng-keydown=vm.resolutionKeyEvent($event,car)></textarea><div class=enb_button_list><button class=blueBG ng-if=\\\"car.state != vm.SAVING\\\" ng-click=vm.saveRep(car)><i class=\\\"fa fa-save\\\"></i></button> <button class=greyBG ng-if=\\\"car.state == vm.SAVING\\\"><span class=spinner></span></button> <button class=greenBG ng-if=\\\"!car.resolved && car.state != vm.RESOLVING\\\" ng-click=vm.resolve(car)><i class=\\\"fa fa-check\\\"></i></button> <button class=redBG ng-if=\\\"car.resolved && car.state != vm.RESOLVING\\\" ng-click=vm.resolve(car)><i class=\\\"fa fa-times\\\"></i></button> <button class=greyBG ng-if=\\\"car.state == vm.RESOLVING\\\"><span class=spinner></span></button></div></div></div></div></div></div></div></div></div></div><div id=history class=\\\"col s12\\\"><div class=\\\"expansionNav coolbar\\\" style=top:110px ng-if=vm.activeTabData><!--first wrapper--><div class=en_main ng-if=vm.navFilter(main) ng-class=\\\"{\\'active\\':main.active}\\\" ng-repeat=\\\"main in vm.reports \\\" ng-init=\\\"main.active = true\\\"><div class=en_label ng-class=\\\"{\\'{{main.class}}\\':true}\\\" ng-click=vm.itemClicked(main,1) style=\\\"background:#4FC3F7 !important\\\">{{main.reportName}}<div class=\\\"enl_item enl_add\\\"><i class=\\\"fa fa-plus\\\" ng-if=!main.active></i> <i class=\\\"fa fa-minus\\\" ng-if=main.active></i></div></div><div class=en-wrapper><div ng-repeat=\\\"fence in main.fences\\\" style=\\\"width: 100%;float:left\\\"><div class=en_mid ng-repeat=\\\"(midKey, mid) in fence\\\" ng-if=\\\"midKey != \\'id\\' && midKey != \\'name\\' && midKey != \\'active\\' && mid.length > 0\\\" ng-class=\\\"{\\'en-closed\\':!main.active,\\'en-semi-closed\\':!mid.active}\\\" style=\\\"height:{{(mid.length * 30) + 67}}px\\\" ng-init=\\\"mid.active = true;\\\"><div class=en_label ng-click=vm.itemClicked(mid,2) style=background:#B3E5FC!important>{{ midKey}}<div class=\\\"enl_item enl_add\\\"><i class=\\\"fa fa-plus\\\" ng-if=!mid.active></i> <i class=\\\"fa fa-minus\\\" ng-if=mid.active></i></div><div class=\\\"enl_item enl_count\\\">{{vm.returnLength(mid,2)}}</div></div><div class=en-wrapper><table class=en_entryexit><tr><th><i class=\\\"fa fa-chevron-down greenColor\\\"></i> Entry Time</th><th><i class=\\\"fa fa-chevron-up redColor\\\"></i> Exit Time</th></tr><tr ng-repeat=\\\"vehicle in mid\\\"><td>{{vehicle.fentry | date : \\'d MMM, h:mm a\\'}}</td><td>{{vehicle.fexit | date : \\'d MMM, h:mm a\\'}}</td></tr></table></div></div></div></div></div></div></div><div id=alarms class=\\\"col s12\\\"><div class=\\\"expansionNav coolbar\\\" style=top:110px ng-if=vm.activeAlarmData><!--first wrapper--><div class=en_main ng-if=vm.navFilter(main) ng-class=\\\"{\\'active\\':main.active}\\\" ng-repeat=\\\"(mainKey, main)  in vm.activeAlarmData \\\" ng-init=\\\"main.active = true\\\"><div class=en_label ng-class=\\\"{\\'{{main.class}}\\':true}\\\" ng-click=vm.itemClicked(main,1) style=\\\"background:#4FC3F7 !important\\\">{{ mainKey | limitTo: 30 }}{{mainKey.length > 30 ? \\'...\\' : \\'\\'}}<div class=\\\"enl_item enl_add\\\"><i class=\\\"fa fa-plus\\\" ng-if=!main.active></i> <i class=\\\"fa fa-minus\\\" ng-if=main.active></i></div></div><div class=en-wrapper><div class=en_mid ng-repeat=\\\"(midKey, mid) in main track by $index\\\" ng-if=\\\"midKey != \\'id\\' && midKey != \\'name\\' && midKey != \\'active\\'\\\" ng-class=\\\"{\\'en-closed\\':!main.active,\\'en-semi-closed\\':!mid.active}\\\" style=height:110px><div class=en_label ng-click=vm.itemClicked(mid,2) style=background:#B3E5FC!important>{{ midKey }}<div class=\\\"enl_item enl_add\\\"><i class=\\\"fa fa-plus\\\" ng-if=!mid.active></i> <i class=\\\"fa fa-minus\\\" ng-if=mid.active></i></div><!--<div class=\\\"enl_item enl_count\\\">{{vm.returnLength(mid,2)}}</div>--></div><div class=en-alarm-final><div class=en-af-item>Time : {{mid.timestamp | date : \\'d MMM, h:mm a\\'}}</div><div class=en-af-item>Mode : {{mid.opermode }}</div><div class=en-af-item><a href=# class=\\\"eye-icon pops{{midKey}}{{$index}}\\\" data-content={{vm.vehicleAddress}} ng-mouseover=\\\"vm.getAddress(midKey, $index, mid.latitude, mid.longitude)\\\">Loc : {{mid.latitude }},{{mid.longitude }} </a><!--<div class=\\\"pops{{$index}}\\\"></div>--></div></div></div></div></div></div></div></div></div></div><script>$(document).ready(function(){\\n        $(\\'ul.tabs\\').tabs();\\n    });</script>\");\n$templateCache.put(\"app/components/landingpage/management/leftnav/leftnav_mgmt.html\",\"<!DOCTYPE html><style>/*md-checkbox {*/\\n        /*margin: 8px;*/\\n        /*cursor: pointer;*/\\n        /*padding-left: 0px;*/\\n        /*padding-right: 0;*/\\n        /*line-height: 4px;*/\\n        /*min-width: 18px;*/\\n        /*min-height: 1px;*/\\n    /*}*/\\n    /*md-sidenav{height:100%;}*/\\n    md-checkbox span{font-weight:normal;}\\n\\n    .angular-ui-tree-node, .angular-ui-tree-placeholder{line-height:22px;}\\n\\n    .hidden {\\n        display: none!important;\\n        visibility: hidden!important;\\n    }\\n\\n    .search-result {\\n        font-size:13px;\\n        font-style:italic;\\n        font-weight:normal;\\n    }\\n\\n    .tree-str{\\n        overflow-y: scroll;\\n        position: absolute;\\n        width: 100%;\\n        top: 120px;\\n        right: 0;\\n        bottom: 0;\\n    }</style><style>.left-sidenav {\\n        height: 100%;\\n        width: 320px;\\n        position: fixed;\\n        z-index: 1;\\n        top: 0px;\\n        left: 0;\\n        overflow-x: hidden;\\n        transition: 0.5s;\\n        padding-top: 60px;\\n        color:#000;\\n    }\\n    #main {\\n        margin-left:320px;\\n        transition: margin-left .5s;\\n    }\\n\\n    @media screen and (max-height: 450px) {\\n        .left-sidenav {padding-top: 15px;}\\n        .left-sidenav a {font-size: 18px;}\\n    }\\n\\n    #myLeftSidenav{\\n        border-right:1px solid #ccc;\\n        overflow:hidden;\\n    }</style><!-- Template for parent nodes --><script type=text/ng-template id=parent_nodes_renderer.html><div class=\\\"ln-main\\\"ng-class=\\\"{\\'active\\':vm.selectedAsset == item.id}\\\">\\n        <div class=\\\"ln-arrow\\\" ng-click=\\\"item.collapsed = !item.collapsed\\\" ng-show=\\\"item.items.length > 0\\\"\\n        ng-class=\\\"{\\'active\\':item.collapsed}\\\"><i class=\\\"fa fa-chevron-right\\\"></i></div>\\n\\n        <div class=\\\"ln-heading\\\" ng-click=\\\"vm.handleAssetClick(item, item.collapsed, toggle, this); item.collapsed = true\\\"\\n        ng-class=\\\"{\\'no-arrow\\':item.items.length <= 0, \\'active\\':vm.selectedAsset == item.id}\\\">{{item.title | titleCase }}</div>\\n        <span class=\\\"spinner -blue -relative\\\" ng-class=\\\"{\\'opacity_0\\':!item.loading}\\\" ng-if=\\\"item.loading\\\"></span>\\n    </div>\\n    <div class=\\\"ln-child-cont\\\" ng-model=\\\"item.items\\\" ng-show=\\\"item.collapsed\\\">\\n        <div ng-repeat=\\\"item in item.items\\\" ui-tree-node class=\\\"ln-child\\\"\\n             ng-include=\\\"(item.items) ? \\'parent_nodes_renderer.html\\' : \\'terminal_node_renderer.html\\'\\\"></div>\\n    </div></script><!-- Template for terminal nodes --><script type=text/ng-template id=terminal_node_renderer.html><div class=\\\"tree-node tree-node-content\\\">\\n        <md-checkbox aria-label=\\\"chekbox\\\" ng-checked=\\\"item.checkStatus === \\'checked\\'\\\"\\n                     md-indeterminate=\\\"item.checkStatus === \\'partlyChecked\\'\\\"\\n                     ng-click=\\\"vm.toggleCheck(item)\\\"\\n                     data-nodrag>\\n        </md-checkbox>\\n        <span style=\\\"cursor:default;\\\">{{item.title | titleCase}}\\n        </span>\\n    </div></script><div id=myLeftSidenav class=left-sidenav><div class=\\\"input-field col s6\\\"><input id=last_name type=text class=validate ng-model=vm.tree_search_pattern ng-change=vm.expand_tree()><label for=last_name>Search</label></div><div ui-tree id=tree-root callbacks=treeOptions class=tree-str ng-cloak><ol ui-tree-nodes ng-model=vm.tree_data ng-class=\\\"{hidden: collapsed}\\\"><li ng-repeat=\\\"item in vm.tree_data\\\" ui-tree-node data-nodrag data-collapsed=item.collapsed ng-include=\\\"(item.items) ? \\'parent_nodes_renderer.html\\' : \\'parent_nodes_renderer.html\\'\\\"></li></ol></div></div>\");\n$templateCache.put(\"app/components/landingpage/management/rightnav/rightnav_mgmt.html\",\"<!DOCTYPE html><style>.sidenav {\\n        height: 100%;\\n        width: 0;\\n        position: fixed;\\n        z-index: 1;\\n        top: 0;\\n        right: 0;\\n        overflow-x: hidden;\\n        transition: 0.5s;\\n        padding-top: 60px;\\n        border-left:1px solid #ccc;\\n    }\\n\\n    #main {\\n        transition: margin-right .8s;\\n    }\\n\\n    @media screen and (max-height: 450px) {\\n        .sidenav {padding-top: 15px;}\\n    }\\n\\n\\n    .sidenav .id-body {\\n        width:320px;\\n        /*transition: 0.3s*/\\n    }\\n\\n    .eye-icon{\\n        position: absolute;\\n        right: 3px;\\n        top: 68px;\\n    }</style><div class=sidenav id=mySidenav>Rightnav Mgmt Controller</div>\");\n$templateCache.put(\"app/components/landingpage/dashboard/map/dialog/alarm.html\",\"<!--<md-tab-body >--><style>.error-msg {\\n        color: #f00;\\n        font-size: 12px;\\n        min-height: 20px;\\n    }\\n\\n    table.geo-table thead tr{\\n        padding:0;\\n        height:35px;\\n    }\\n\\n    .google-visualization-table-tr-sel{\\n        background: red !important;\\n    }\\n    .alarm-cont .geoc-body{top:50px}\\n    #DataTables_Table_0_filter, .dataTables_filter{\\n        position: absolute !important;\\n        top: -45px !important;\\n        z-index: 999;\\n        left: 330px !important;\\n    }\\n\\n    md-checkbox{\\n        position:relative !important;\\n        left:0 !important;\\n        opacity: 1 !important;\\n    }\\n\\n    md-list-item.md-2-line, md-list-item.md-2-line > .md-no-style{\\n        height:30px !important;\\n        min-height:30px !important;\\n    }\\n\\n    .latlng:hover{cursor:pointer;}\\n\\n    .dataTables_filter label {\\n\\n    }</style><div class=alarm-cont><div class=geoc-head><span class=error-msg>{{vm.alarms.msg}}</span><br><div layout=row layout-align=\\\"space-around center\\\"><div layout=row class=input-fields layout-align=\\\"space-around center\\\" flex=70><div class=geo-mul-back ng-show=vm.currPop ng-click=\\\"vm.currPop = null\\\"></div><md-input-container class=\\\"container-margin geo-multiSel\\\"><label>Vehicle Name ({{vm.alarms.selectedVehiclesCount}})</label><input type=text ng-focus=\\\"vm.currPop = \\'vehiclePop\\'\\\" placeholder=\\\"Search Vehicle\\\" ng-model=vm.alarms.vehicleFilterPattern ng-change=vm.filterVehicles()><div class=geo-ms-cont ng-show=\\\"vm.currPop == \\'vehiclePop\\'\\\"><md-list><md-list-item class=md-2-line ng-repeat=\\\"item in vm.alarms.filteredVehicles \\\"><md-checkbox ng-model=item.checked aria-label=myvehicles ng-change=\\\"vm.verifyCheckStatus(\\'vehicle\\')\\\"></md-checkbox><div class=md-list-item-text><h3>{{item.name}}</h3></div></md-list-item></md-list><div class=geo-ms-controls><md-checkbox ng-model=vm.selectAllVehicles aria-label=all ng-change=\\\"vm.selectAll(\\'vehicle\\')\\\">All</md-checkbox><md-checkbox ng-model=vm.deSelectAllVehicles aria-label=None ng-change=\\\"vm.deSelectAll(\\'vehicle\\')\\\">None</md-checkbox></div></div></md-input-container><md-input-container class=container-margin><label>Start Time</label><input type=text id=start_time ng-model=vm.alarms.startTime></md-input-container><md-input-container class=container-margin><label>End Time</label><input type=text id=end_time ng-model=vm.alarms.endTime></md-input-container><!--<md-button class=\\\"md-accent\\\" ng-click=\\\"vm.getHistory()\\\">Get Report</md-button>--> <a class=\\\"waves-effect waves-light btn\\\" ng-click=vm.getHistory()>Get Report</a><md-button class=\\\"md-fab md-mini my-tooltip pops\\\" ng-disabled=vm.alarms.loadingAlarmData ng-click=vm.downloadFile()><md-icon md-font-library=material-icons>file_download</md-icon></md-button></div><div layout=row layout-align=\\\"end start\\\"></div></div></div><div class=progress ng-if=vm.alarms.loadingAlarmData><div class=indeterminate></div></div><div class=geoc-body id=table_area><!--<div layout=\\\"row\\\" layout-sm=\\\"column\\\" layout-align=\\\"space-around\\\"--><!--ng-show=\\\"\\\">--><!--<md-progress-circular md-mode=\\\"indeterminate\\\"></md-progress-circular>--><!--</div>--><div ng-hide=vm.alarms.loadingAlarmData style=\\\"width: 100%; height: 100%\\\"><table datatable=ng dt-options=vm.dtOptions dt-instance=dtInstanceCallback class=\\\"row-border hover table table-striped\\\" width=100% ng-cloak><thead><tr><th width=150>Vehicle No</th><th width=150>Time</th><th>Reason</th><th>Speed</th><th>Opperation Mode</th><th>Location</th></tr></thead><tbody><tr ng-repeat=\\\"report in vm.alarms.alarmResponseData track by $index\\\"><td width=150>{{report.vehicleno}}</td><td width=150>{{report.gpstime | date : \\'d MMM, h:mm a\\'}}</td><td>{{report.alarmreason}}</td><td>{{report.speed}}</td><td>{{report.opermode}}</td><td><span ng-if=!vm.convertLatLngToAddr class=\\\"latlng loc{{$index}}\\\" ng-mouseover=\\\"vm.getAddress(report.lat, report.lng, $index)\\\" data-content=\\\"Fetching Address\\\">{{report.lat }},{{report.lng }} </span><span ng-if=vm.convertLatLngToAddr>{{report.addr}}</span></td></tr></tbody></table></div><!--<span ng-show=\\\"vm.dataFound\\\">No Data Found</span>--></div></div><script>$(document).ready(function () {\\n        $(\\'#start_time\\').datetimepicker({\\n            mask: \\'9999-19-39 29:59\\',\\n            format: \\'Y-m-d H:i\\'\\n        });\\n\\n        $(\\'#end_time\\').datetimepicker({\\n            mask: \\'9999/19/39 29:59\\',\\n            format: \\'Y-m-d H:i\\'\\n        });\\n    });</script>\");\n$templateCache.put(\"app/components/landingpage/dashboard/map/dialog/downloadHistory.html\",\"<style>.error-msg {\\n        color: #f00;\\n        font-size: 12px;\\n        min-height: 20px;\\n    }</style><span class=error-msg>{{vm.errorMsg}}</span><br><div class=dh_container><div class=dhc_name>Last location report</div><md-input-container class=container-margin><label>Select Area</label><!--<md-select ng-model=\\\"vehicle\\\" ng-model-options=\\\"{trackBy: \\'$value.vehicleno\\'}\\\">--><md-select ng-model=vm.selectedGroup ng-model-options=\\\"{trackBy: \\'$value.assetpath\\'}\\\"><md-option ng-repeat=\\\"group in vm.groups\\\" ng-value=group>{{group.name}}</md-option></md-select></md-input-container><a class=\\\"tc_button waves-effect waves-light btn raised\\\" ng-click=vm.download() ng-disabled=vm.showLoading>DOWNLOAD</a></div><div class=progress ng-if=vm.showLoading><div class=indeterminate></div></div>\");\n$templateCache.put(\"app/components/landingpage/dashboard/map/dialog/geofence.html\",\"<!--<md-tab-body >--><style>.error-msg {\\n        color: #f00;\\n        font-size: 12px;\\n        min-height: 20px;\\n    }\\n\\n    table.geo-table thead tr{\\n        padding:0;\\n        height:35px;\\n    }\\n\\n    .google-visualization-table-tr-sel{\\n        background: red !important;\\n    }\\n    md-checkbox{\\n        position:relative !important;\\n        left:0 !important;\\n        opacity: 1 !important;\\n    }\\n\\n\\n    md-list-item.md-2-line, md-list-item.md-2-line > .md-no-style{\\n        height:30px !important;\\n        min-height:30px !important;\\n    }\\n\\n\\n    .google-visualization-table-tr-odd {\\n        background-color: #eee;\\n    }</style><div class=geofence-cont style=\\\"height: 100%\\\"><div class=geo-leftbar ng-click=\\\"vm.currPop = null\\\"><div class=\\\"geo-rep-item-head shadow-border\\\">Reports</div><div class=\\\"geo-lb-cont coolbar\\\"><div class=geo-rep-item ng-class=\\\"{\\'active\\':vm.fenceReportObj.reportId == rep.assetpath}\\\" ng-repeat=\\\"rep in vm.fenceReportObj.reports\\\" ng-click=vm.getSelectedFences(rep)>{{rep.name}}</div></div></div><div class=geo-cont><div class=geoc-head><span class=error-msg>{{vm.errorMsg}}</span><br><div layout=row layout-align=\\\"space-around center\\\"><div layout=row class=input-fields layout-align=\\\"space-around center\\\" flex><div class=geo-mul-back ng-show=vm.currPop ng-click=\\\"vm.currPop = null\\\"></div><md-input-container class=\\\"container-margin geo-multiSel\\\"><label>Fence Name ({{vm.fenceReportObj.selectedFencesCount}})</label><input type=text ng-focus=\\\" vm.currPop = \\'fencePop\\'\\\" placeholder=\\\"Search Fences\\\" ng-model=vm.fenceReportObj.fenceFilter ng-change=vm.filterFences()><div class=geo-ms-cont ng-show=\\\"vm.currPop == \\'fencePop\\'\\\"><md-list><md-list-item class=md-2-line ng-repeat=\\\"item in vm.fenceReportObj.filteredFenceItems \\\"><md-checkbox ng-model=item.checked aria-label=myfences ng-change=\\\"vm.verifyCheckStatus(\\'fence\\')\\\"></md-checkbox><div class=md-list-item-text><h3>{{item.name}}</h3></div></md-list-item></md-list><div class=geo-ms-controls><md-checkbox ng-model=vm.selectAllFences aria-label=all ng-change=\\\"vm.selectAll(\\'fence\\')\\\">All</md-checkbox><md-checkbox ng-model=vm.deSelectAllFences aria-label=None ng-change=\\\"vm.deSelectAll(\\'fence\\')\\\">None</md-checkbox></div></div></md-input-container><md-input-container class=\\\"container-margin geo-multiSel\\\"><label>Vehicle Name ({{vm.fenceReportObj.selectedVehiclesCount}})</label><input type=text ng-focus=\\\"vm.currPop = \\'vehiclePop\\'\\\" placeholder=\\\"Search Vehicle\\\" ng-model=vm.fenceReportObj.vehicleFilter ng-change=vm.filterVehicles()><div class=geo-ms-cont ng-show=\\\"vm.currPop == \\'vehiclePop\\'\\\"><md-list><md-list-item class=md-2-line ng-repeat=\\\"item in vm.fenceReportObj.filteredItems\\\"><md-checkbox ng-model=item.checked aria-label=myvehicles ng-change=\\\"vm.verifyCheckStatus(\\'vehicle\\')\\\"></md-checkbox><div class=md-list-item-text><h3>{{item.name}}</h3></div></md-list-item></md-list><div class=geo-ms-controls><md-checkbox ng-model=vm.selectAllVehicles aria-label=all ng-change=\\\"vm.selectAll(\\'vehicle\\')\\\">All</md-checkbox><md-checkbox ng-model=vm.deSelectAllVehicles aria-label=None ng-change=\\\"vm.deSelectAll(\\'vehicle\\')\\\">None</md-checkbox></div></div></md-input-container><md-input-container class=container-margin><label>Start Time</label><input type=text id=start_time ng-model=vm.fenceReportObj.startTime></md-input-container><md-input-container class=container-margin><label>End Time</label><input type=text id=end_time ng-model=vm.fenceReportObj.endTime></md-input-container><!--<md-button class=\\\"md-accent\\\" ng-click=\\\"vm.getHistoryReport()\\\">Get Report</md-button>--> <a class=\\\"waves-effect waves-light btn\\\" ng-click=vm.getHistoryReport()>Get Report</a><md-button class=\\\"md-fab md-mini my-tooltip pops\\\" ng-disabled=vm.disableDownload ng-click=vm.downloadFile()><md-icon md-font-library=material-icons>file_download</md-icon><md-tooltip>Download</md-tooltip></md-button></div><div layout=row layout-align=\\\"end start\\\"></div></div></div><div class=geoc-body><!--<div layout=\\\"row\\\" layout-sm=\\\"column\\\" layout-align=\\\"space-around\\\" ng-show=\\\"vm.loadingHistoryData\\\">--><!--<md-progress-circular md-mode=\\\"indeterminate\\\"></md-progress-circular>--><!--</div>--><div class=progress ng-if=vm.loadingHistoryData><div class=indeterminate></div></div><div id=geo-table class=geo-table></div><span ng-show=vm.dataFound>No Data Found</span></div></div></div><!--</md-tab-body>--><script>$(document).ready(function () {\\n        $(\\'#start_time\\').datetimepicker({\\n            mask: \\'9999-19-39 29:59\\',\\n            format: \\'Y-m-d H:i\\'\\n        });\\n\\n        $(\\'#end_time\\').datetimepicker({\\n            mask: \\'9999/19/39 29:59\\',\\n            format: \\'Y-m-d H:i\\'\\n        });\\n    });</script>\");\n$templateCache.put(\"app/components/landingpage/dashboard/map/dialog/history.html\",\"<!--<md-tab-body>--><style>md-toolbar {\\n        min-height: 20px;\\n    }\\n\\n    .map-dialog {\\n        padding: 0 !important\\n    }\\n\\n    .map-dialog-content {\\n        overflow: hidden;\\n    }\\n\\n    .error-msg {\\n        color: #f00;\\n        font-size: 12px;\\n        min-height: 20px;\\n    }\\n\\n    md-toolbar.md-default-theme:not(.md-menu-toolbar), md-toolbar:not(.md-menu-toolbar) {\\n        background: #d1e934;\\n    }\\n\\n    .play-pause-btns {\\n        background: #d1e934 !important;\\n        color:#000;\\n    }\\n\\n    .play-pause-btns i { color: #000 !important;}\\n\\n    .container-margin{margin-bottom: 0; padding:0; height:31px}\\n\\n    .btn {\\n        background-color: #d1e934;\\n        border: none;\\n        color: white;\\n        padding: 18px 12px;\\n        text-align: center;\\n        text-decoration: none;\\n        display: inline-block;\\n        font-size: 16px;\\n        margin: 4px 2px;\\n        width: 10px;\\n        box-shadow: 1px 1px 8px 0px #FFF;\\n        height: 10px;\\n    }\\n\\n    .btn-img {\\n        background: url(\\'assets/images/play.png\\') no-repeat;\\n        width: 13px;\\n    }\\n\\n    .btn:hover {\\n        cursor: pointer;\\n    }\\n\\n    .history-dialog .angular-google-map-container {\\n        position: absolute;\\n        left:0;\\n        bottom:0;\\n        height: auto!important;\\n        top:72px;\\n        right:0;\\n        width:100%;\\n    }\\n\\n    .md-button{\\n        margin:6px 1px;\\n    }\\n\\n    .md-button.md-fab.md-mini{\\n        /*line-height:37px;*/\\n        width:34px;\\n        height:36px;\\n    }\\n\\n    .icon-font {\\n        font-size: 20px;\\n        left: -1px;\\n        position: relative;\\n        top: 2px;\\n    }\\n\\n    .errorMsg {\\n        font-size: 16px;\\n        background: rgba(255, 255, 255, 0.8);\\n        color: red;\\n        padding: 10px;\\n    }</style><div class=downloadImage></div><script type=text/ng-template id=historyInfoWindow.html><div style=\\\"width:230px; height:62px; max-width:230px; min-width:230px; overflow:hidden; padding-top:5px;\\\">\\n        <table>\\n            <tr>\\n                <td><strong>End Time: </strong></td>\\n                <td>{{parameter.data.gpstime | date : \\'d MMM, h:mm a\\'}}</td>\\n            </tr>\\n            <tr>\\n                <td style=\\\"padding-right:5px;\\\"><strong>Odometer: </strong></td>\\n                <td>{{parameter.data.odometer}} km</td>\\n            </tr>\\n            <tr>\\n                <td><strong>Speed: </strong></td>\\n                <td>{{parameter.data.speed}} kmph</td>\\n            </tr>\\n            <tr>\\n                <td><strong>Ignition: </strong></td>\\n                <td>{{parameter.data.ignstatus}}</td>\\n            </tr>\\n        </table>\\n    </div></script><div class=lefttoolbar ng-controller=\\\"GeofenceViewController as vm\\\"><div class=ltb_item ng-repeat=\\\"item in vm.leftTB\\\" ng-mouseenter=\\\"item.activeInt = 1\\\" ng-mouseleave=\\\"item.activeInt = 0\\\" ng-class=\\\"{\\'ltb_item-line\\':item.type == \\'line\\', \\'active\\': vm.fencesActive()}\\\" ng-if=item.historymap><div class=ltbi_button ng-click=vm.buttonClick(item) ng-if=\\\"item.type == \\'button\\' || item.type == \\'toggleButton\\'\\\" ng-class=\\\"{\\'active\\':item.data.active && item.type == \\'toggleButton\\',\\'independ\\':item.data.independent,\\'hasChildren\\':item.children }\\\"><div class=ltbi_icon ng-if=\\\"item.hasOwnProperty(\\'icon\\')\\\"><i class=\\\"fa {{item.icon}}\\\" ng-if=\\\"item.iconType == \\'fa\\'\\\" aria-hidden=true></i> <i ng-if=\\\"item.iconType == \\'md\\'\\\" class=material-icons>{{item.icon}}</i> <img ng-if=\\\"item.iconType == \\'png\\' && item.data.active\\\" ng-src={{item.icon}}.active.png> <img ng-if=\\\"item.iconType == \\'png\\' && !item.data.active\\\" ng-src={{item.icon}}.png> <i ng-if=\\\"item.iconType == \\'png\\'\\\" style=\\\"position: absolute; color: rgba(0,0,0,0)!important; width: 80%; height: 80%\\\">a</i></div><div class=ltbi_name ng-if=item.name>{{item.name}} <span>{{item.description}}</span></div></div><div class=ltbi_cont ng-if=item.content ng-if=\\\"item.type == \\'button\\' || item.type == \\'toggleButton\\' \\\"><md-input-container class=md-input-cont><label>Color</label><input type=text ng-model=color></md-input-container></div><!--Child Buttons--><div class=ltbi_loc ng-init=\\\"item.activeInt = 0\\\" ng-if=item.children style=\\\"width: {{((item.children.length * 44) + 40 ) * item.activeInt }}px\\\"><div ng-repeat=\\\"child in item.children\\\" class=ltbil_item ng-click=\\\"vm.childClick(child,item.childType )\\\" ng-class=\\\"{\\'active\\':child.id == vm.currentLocation}\\\" ng-if=\\\"item.childType == \\'location\\'\\\">{{child.notation}}</div><div class=\\\"ltbil_item childButton\\\" ng-click=vm.buttonClick(child) ng-if=\\\"item.childType == \\'button\\'\\\" ng-repeat=\\\"child in item.children\\\" ng-class=\\\"{\\'active\\':child.data.active && child.type == \\'toggleButton\\',\\'independ\\':child.data.independent }\\\"><div class=ltbi_icon ng-if=\\\"child.hasOwnProperty(\\'icon\\')\\\"><i class=\\\"fa {{child.icon}}\\\" ng-if=\\\"child.iconType == \\'fa\\'\\\" aria-hidden=true></i> <i ng-if=\\\"child.iconType == \\'md\\'\\\" class=material-icons>{{child.icon}}</i> <img ng-if=\\\"child.iconType == \\'png\\' && !child.data.active\\\" ng-src={{child.icon}}.png> <img ng-if=\\\"child.iconType == \\'png\\' && child.data.active\\\" ng-src={{child.icon}}.active.png> <i ng-if=\\\"child.iconType == \\'png\\'\\\" style=\\\"position: absolute; color: rgba(0,0,0,0)!important; width: 80%; height: 80%\\\">a</i></div><div class=ltbi_name ng-if=child.name>{{child.name}}<!--<span>{{child.description}}</span>--></div></div></div></div></div><div style=\\\"height: 100%\\\" draggable=false><!--<span class=\\\"error-msg\\\">{{errorMsg}}</span><br/>--><div layout=row layout-align=\\\"space-around center\\\"><div layout=row class=input-fields layout-align=\\\"space-around center\\\" flex><md-autocomplete class=hsitoryAutocomplete md-selected-item=vm.historyMap.selectedVehicle md-search-text=searchText md-items=\\\"item in getMatches(searchText)\\\" md-item-text=item.rtgps.vehicleno><md-item-template><span>{{item.rtgps.vehicleno}}</span></md-item-template><md-not-found>No matches found.</md-not-found></md-autocomplete><md-input-container class=container-margin><label>Start Time</label><input type=text id=start_time ng-model=vm.historyMap.startTime></md-input-container><md-input-container class=container-margin><label>End Time</label><input type=text id=end_time ng-model=vm.historyMap.endTime></md-input-container><md-button class=\\\"md-accent md-raised\\\" ng-click=vm.getHistory()>Get History</md-button><md-button class=\\\"md-accent md-raised\\\" ng-click=vm.downloadScreenShot();>Print History</md-button></div><div layout=row layout-align=\\\"end start\\\"></div></div><md-dialog-content class=map-dialog-content draggable=false ng-class=\\\"{\\'expandedGraphs\\':vm.traceControls.expandedGraphs == \\'full\\' && vm.gotData,\\n                       \\'expandedGraphsHalf\\':vm.traceControls.expandedGraphs == \\'half\\' && vm.gotData}\\\"><div class=\\\"md-dialog-content historyMap map-dialog history-dialog\\\"><div id=history_map style=width:100%;height:500px></div><div class=tc_graphs><div class=tcg_buttons ng-show=vm.gotData><a class=\\\"tc_button tcb_abs waves-effect waves-light btn raised\\\" ng-click=\\\"vm.toggleExpandedGraphs(\\'close\\')\\\"><i class=\\\"fa fa-times\\\" ng-if=vm.traceControls.expandedGraphs></i> <i class=\\\"fa fa-line-chart\\\" ng-if=!vm.traceControls.expandedGraphs></i> </a><a class=\\\"tc_button tcb_abs waves-effect waves-light btn raised\\\" ng-click=\\\"vm.toggleExpandedGraphs(\\'toggle\\')\\\"><i class=\\\"fa fa-chevron-left\\\" ng-if=\\\"vm.traceControls.expandedGraphs != \\'full\\'\\\"></i> <i class=\\\"fa fa-chevron-right\\\" ng-if=\\\"vm.traceControls.expandedGraphs == \\'full\\'\\\"></i></a></div><div class=\\\"tc_graph-container noselect\\\"><div class=tcg_item-half><div class=tcg_item><svg id=visualisation1 width=100% height=100%></svg></div><div class=tcg_item><svg id=visualisation2 width=100% height=100%></svg></div><div class=tcg_item><svg id=visualisation3 width=100% height=100%></svg></div></div></div></div><div class=tc_popup style=left:{{vm.getPopLeft()}} ng-show=vm.traceControls.timeline[vm.traceControls.current].alarmData>{{vm.traceControls.timeline[vm.traceControls.current].alarmData.alarmreason}}</div><div class=history-err ng-show=!vm.gotData><span ng-hide=vm.loadingData>{{vm.historyMap.errorMsg}}</span><div ng-show=vm.loadingData ng-class=\\\"{\\'opacity_0\\':!vm.loadingData}\\\" class=\\\"preloader-wrapper active\\\" style=\\\"position: absolute; left: 50%; top:50%; margin:-20px\\\"><div class=\\\"spinner-layer spinner-red-only\\\"><div class=\\\"circle-clipper left\\\"><div class=circle></div></div><div class=gap-patch><div class=circle></div></div><div class=\\\"circle-clipper right\\\"><div class=circle></div></div></div></div></div><div class=\\\"traceControls noselect\\\" ng-class=\\\"{\\'active\\':vm.gotData}\\\"><div class=tc_controls><a class=\\\"tc_button waves-effect waves-light btn raised\\\" ng-click=vm.traceControls.togglePlay() ng-class=\\\"{\\'active\\':vm.traceControls.playing}\\\"><i class=\\\"fa fa-play\\\" ng-show=!vm.traceControls.playing></i> <i class=\\\"fa fa-pause\\\" ng-show=vm.traceControls.playing></i> </a><!--<a class=\\\"waves-effect waves-light btn raised\\\">a</a>--> <a class=\\\"tc_button waves-effect waves-light btn raised\\\" ng-click=vm.traceControls.stepBackward()><i class=\\\"fa fa-minus\\\"></i> </a><a class=\\\"tc_button waves-effect waves-light btn raised\\\" ng-click=vm.traceControls.stepForward()><i class=\\\"fa fa-plus\\\"></i></a><div class=tc_speedButton><a class=\\\"tc_button waves-effect waves-light btn raised\\\" ng-click=vm.traceControls.decrementSpeed()><i class=\\\"fa fa-backward\\\"></i></a><div class=tc_speedDisplay><span ng-show=\\\"vm.traceControls.speed == 0\\\">1/16x</span> <span ng-show=\\\"vm.traceControls.speed == 1\\\">1/8x</span> <span ng-show=\\\"vm.traceControls.speed == 2\\\">1/4x</span> <span ng-show=\\\"vm.traceControls.speed == 3\\\">1/2x</span> <span ng-show=\\\"vm.traceControls.speed == 4\\\">1x</span> <span ng-show=\\\"vm.traceControls.speed == 5\\\">2x</span> <span ng-show=\\\"vm.traceControls.speed == 6\\\">4x</span> <span ng-show=\\\"vm.traceControls.speed == 7\\\">8x</span> <span ng-show=\\\"vm.traceControls.speed == 8\\\">16x</span></div><a class=\\\"tc_button waves-effect waves-light btn raised\\\" ng-click=vm.traceControls.incrementSpeed()><i class=\\\"fa fa-forward\\\"></i></a></div></div><div class=tc_panel><!--<div class=\\\"tc_pointer\\\" ng-class=\\\"{\\'active\\':vm.traceControls.playing}\\\"></div>--><div class=\\\"tcp_leftButton waves-effect waves-light btn raised\\\" ng-click=vm.tcGraphs.seekGraph(0)><i class=\\\"fa fa-chevron-left\\\"></i></div><div class=\\\"tcp_rightButton waves-effect waves-light btn raised\\\" ng-click=vm.tcGraphs.seekGraph(1)><i class=\\\"fa fa-chevron-right\\\"></i></div><div class=tcp_name>SPEED</div><div class=tpc_graphContainer><svg id=visualisation-parent width=100% height=100%></svg></div></div><div class=tc_info><table><tr class=time><td colspan=2>{{vm.getCurrentPos().gpstime | date : \\'d MMM yy, h:mm:ss a\\'}}</td></tr><tr><td>Ignition</td><td style=width:50%>{{ vm.getCurrentPos().ignstatus ? \\'On\\' : \\'Off\\' }}</td></tr><tr><td>Speed</td><td>{{vm.getCurrentPos().speed}} <span>kmph</span></td></tr><tr><td>Odometer</td><td>{{vm.getCurrentPos().odometer}} <span>km</span></td></tr><tr><td colspan=2>{{vm.traceControls.selectedVehicle.rtgps.meta.cartype}}</td></tr></table></div></div></div></md-dialog-content></div><div id=history_fence_infowindow layout=row ng-non-bindable flex><div layout=column id=historyFenceWindow ng-cloak><table><tbody><tr><th>Name:</th><td>{{vm.selectedFenceObj.info.name}}</td></tr><tr><th>Type:</th><td>{{vm.selectedFenceObj.info.tagdata.olafilter}}</td></tr></tbody></table></div></div><!--</md-tab-body>--><script>$(document).ready(function () {\\n        $(\\'#start_time\\').datetimepicker({\\n            mask: \\'9999-19-39 29:59\\',\\n            format: \\'Y-m-d H:i\\'\\n        });\\n\\n        $(\\'#end_time\\').datetimepicker({\\n            mask: \\'9999/19/39 29:59\\',\\n            format: \\'Y-m-d H:i\\'\\n        });\\n    });</script>\");\n$templateCache.put(\"app/components/landingpage/dashboard/map/dialog/historyTable.html\",\"<style>.error-msg {\\n        color: #f00;\\n        font-size: 12px;\\n        min-height: 20px;\\n    }\\n\\n\\n    .geo-table{\\n        height:85%;\\n    }\\n\\n\\n    table tbody tr td:nth-child(1),\\n    table tbody tr  td:nth-child(2),\\n    table tbody tr  td:nth-child(3),\\n    table tbody tr  td:nth-child(4) ,\\n    table tbody tr  td:nth-child(5)\\n    {\\n        text-align:center;\\n    }\\n\\n    .google-visualization-table-tr-odd {\\n        background-color: #eee;\\n    }</style><div style=\\\"height: 100%\\\"><!--<span>{{errorMsg}}</span><br/>--> <span class=error-msg>{{vm.historyMap.errorMsg}}</span><div layout=row layout-align=\\\"space-around center\\\"><div layout=row class=input-fields layout-align=\\\"space-around center\\\" flex><!--<md-input-container class=\\\"container-margin\\\"  ng-show=\\\"vm.multiSelect\\\">--><!--<label>Vehicle No</label>--><!--&lt;!&ndash;<md-select ng-model=\\\"vehicle\\\" ng-model-options=\\\"{trackBy: \\'$value.vehicleno\\'}\\\">&ndash;&gt;--><!--<md-select ng-model=\\\"vm.historyMap.selectedHistoryVehicle\\\"--><!--ng-model-options=\\\"{trackBy: \\'$value.deviceid\\'}\\\"--><!--&gt;--><!--<md-option--><!--ng-repeat=\\\"vehicle in vm.historyMap.dashboardMapObj.inMarkers | filter:vehicle.visible=\\'true\\' | orderBy:\\'vehicleno\\'\\\"--><!--ng-value=\\\"vehicle\\\">--><!--{{vehicle.vehicleno}}--><!--</md-option>--><!--</md-select>--><!--</md-input-container>--><md-input-container class=container-margin><label>Vehicle No</label><!--<md-select ng-model=\\\"vehicle\\\" ng-model-options=\\\"{trackBy: \\'$value.vehicleno\\'}\\\">--><md-select ng-model=vm.historyMap.selectedVehicle ng-model-options=\\\"{trackBy: \\'$value.rtgps.deviceid\\'}\\\"><md-option ng-repeat=\\\"(key, vehicle) in vm.historyMap.vehiclesByPath\\\" ng-value=vm.historyMap.vehiclesByPath[key] ng-if=vm.historyMap.vehiclesByPath[key].rtgps.meta.onroad>{{vm.historyMap.vehiclesByPath[key].rtgps.vehicleno}}</md-option></md-select></md-input-container><md-input-container class=container-margin><label>Start Time</label><input type=text id=start_time ng-model=vm.historyMap.startTime></md-input-container><md-input-container class=container-margin><label>End Time</label><input type=text id=end_time ng-model=vm.historyMap.endTime></md-input-container><a class=\\\"waves-effect waves-light btn\\\" ng-click=getHistory()>Get History</a><!--<md-button class=\\\"md-accent\\\" ng-click=\\\"getHistory()\\\">Get History</md-button>--><md-button class=\\\"md-fab md-mini my-tooltip pops\\\" ng-click=downloadFile() ng-disabled=vm.disableDownload><md-icon md-font-library=material-icons>file_download</md-icon></md-button></div><div layout=row layout-align=\\\"end start\\\"></div></div><!--<div layout=\\\"row\\\" layout-sm=\\\"column\\\" layout-align=\\\"space-around\\\" ng-hide=\\\"vm.historyMap.trace.path\\\">--><!--<md-progress-circular md-mode=\\\"indeterminate\\\"></md-progress-circular>--><!--</div>--><div class=progress ng-if=\\\"vm.showLoading && !vm.historyMap.errorMsg\\\"><div class=indeterminate></div></div><div id=geo-table class=geo-table></div></div><script>$(document).ready(function () {\\n        $(\\'#start_time\\').datetimepicker({\\n            mask: \\'9999-19-39 29:59\\',\\n            format: \\'Y-m-d H:i\\'\\n        });\\n\\n        $(\\'#end_time\\').datetimepicker({\\n            mask: \\'9999/19/39 29:59\\',\\n            format: \\'Y-m-d H:i\\'\\n        });\\n    });</script>\");\n$templateCache.put(\"app/components/landingpage/management/settings/group/group_mgmt.html\",\"<!DOCTYPE html><style>.icar-new-group {\\n        border: 1px solid #ccc;\\n        display:none;\\n    }\\n    .icar-new-group.active {\\n        display:block;\\n    }</style><span ng-if=vm.currentGroupAsset>Group Name : {{vm.currentGroupAsset.name}}</span><br><md-button class=md-accent ng-show=vm.showBtn ng-click=vm.showNewGroupField()>Create Group</md-button><md-button class=md-accent ng-if=vm.currentGroupAsset.assignUser ng-click=vm.assignUsers(vm.currentGroupAsset)>Assign User</md-button><md-button class=md-accent ng-if=vm.currentGroupAsset.assignRole ng-click=vm.assignRoles(vm.currentGroupAsset)>Assign Role</md-button><div class=\\\"list list-inset icar-new-group\\\" ng-class=\\\"{\\'active\\':vm.isdiplay}\\\"><div class=error ng-show=vm.msg style=color:red>{{vm.msg}}</div><md-content layout=row><md-input-container flex><label>Enter Group Name</label><input type=text ng-model=vm.newGroup.name maxlength=10></md-input-container><md-button class=\\\"md-button md-accent\\\" ng-click=vm.createGroup(); flex=20 ng-disabled=vm.groupBtnStatus>Create Group</md-button></md-content></div><br><script type=text/ng-template id=outside-panel-header.html><div class=\\\"md-title\\\" style=\\\"display:inline;\\\">{{myAsset.name}}</div>\\n    <div class=\\\"md-summary\\\"></div>\\n    <md-expansion-panel-icon></md-expansion-panel-icon></script><script type=text/ng-template id=outside-panel-content.html><!-- <div class=\\\"md-title\\\">{{myAsset.name}}</div> -->\\n    <!--<icar-expanel ng-repeat=\\\"item in vm.vehicleinfo track by $index\\\"-->\\n    <!--details=\\\"item\\\" schema=\\\"item.schema\\\" layout></icar-expanel>-->\\n    <div class=\\\"waves-effect waves-light btn ng-isolate-scope\\\" ng-if=\\\"myAsset.assignUser\\\"\\n         ng-click=\\\"vm.assignUsers(myAsset)\\\">\\n        Assign Users\\n    </div>\\n    <a class=\\\"waves-effect waves-light btn ng-isolate-scope\\\"\\n       ng-if=\\\"myAsset.assignRole\\\"\\n       ng-click=\\\"vm.assignRoles(myAsset)\\\">Assign Role</a></script><multi-list data=groupData></multi-list><!-- <ul class=\\\"collapsible popout\\\" data-collapsible=\\\"accordion\\\" watch>\\n    <li ng-repeat=\\\"myAsset in vm.assets track by $index\\\">\\n        <div class=\\\"collapsible-header\\\"><i class=\\\"{{single.icon}}\\\"></i>\\n            {{myAsset.name}}\\n        </div>sers\\n        <div class=\\\"collapsible-body\\\">\\n            <div ng-include=\\\"\\'outside-panel-content.html\\'\\\"></div>\\n        </div>\\n    </li>\\n</ul> --><md-expansion-panel-group class=expansion-panel md-component-id=vehicleGroup flex><md-expansion-panel md-component-id=$index ng-repeat=\\\"myAsset in vm.assets track by $index\\\"><md-expansion-panel-collapsed ng-include=\\\"\\'outside-panel-header.html\\'\\\"></md-expansion-panel-collapsed><md-expansion-panel-expanded><md-expansion-panel-header ng-click=$panel.collapse()><div style=display:inherit;width:100% ng-include=\\\"\\'outside-panel-header.html\\'\\\"></div></md-expansion-panel-header><md-expansion-panel-content><div ng-include=\\\"\\'outside-panel-content.html\\'\\\"></div></md-expansion-panel-content><!-- <md-expansion-panel-footer  md-no-sticky=\\\"true\\\">\\n            </md-expansion-panel-footer> --></md-expansion-panel-expanded></md-expansion-panel></md-expansion-panel-group>\");\n$templateCache.put(\"app/components/landingpage/management/settings/device/device_mgmt.html\",\"<!DOCTYPE html><style>.icar-new-group {\\n        border: 1px solid #ccc;\\n        display:none;\\n    }\\n    .icar-new-group.active {\\n        display:block;\\n    }</style><span ng-if=vm.currentGroupAsset>Group Name : {{vm.currentGroupAsset.name}}</span><br><md-button class=md-accent ng-show=vm.showBtn ng-click=vm.showNewDeviceField()>Add Device</md-button><md-button class=md-accent ng-show=vm.showBtn>Bind to Vehicle</md-button><div class=\\\"list list-inset icar-new-group\\\" ng-class=\\\"{\\'active\\':vm.isdiplay}\\\"><div class=error ng-show=vm.msg style=color:red><span>{{vm.msg}}</span></div></div><br><script type=text/ng-template id=outside-panel-header.html><div class=\\\"md-title\\\">{{myAsset.name}}</div>\\n    <div class=\\\"md-summary\\\"></div>\\n    <md-expansion-panel-icon></md-expansion-panel-icon></script><script type=text/ng-template id=outside-panel-content.html><div class=\\\"md-title\\\">{{myAsset.name}}</div>\\n    <!--<icar-expanel ng-repeat=\\\"item in vm.vehicleinfo track by $index\\\"-->\\n    <!--details=\\\"item\\\" schema=\\\"item.schema\\\" layout></icar-expanel>--></script><md-expansion-panel-group md-component-id=vehicleGroup flex><md-expansion-panel md-component-id=$index ng-repeat=\\\"myAsset in vm.assets track by $index\\\"><md-expansion-panel-collapsed ng-include=\\\"\\'outside-panel-header.html\\'\\\"></md-expansion-panel-collapsed><md-expansion-panel-expanded><md-expansion-panel-header ng-click=$panel.collapse()><div style=display:inherit;width:100% ng-include=\\\"\\'outside-panel-header.html\\'\\\"></div></md-expansion-panel-header><md-expansion-panel-content><div ng-include=\\\"\\'outside-panel-content.html\\'\\\"></div></md-expansion-panel-content><md-expansion-panel-footer md-no-sticky=true></md-expansion-panel-footer></md-expansion-panel-expanded></md-expansion-panel></md-expansion-panel-group>\");\n$templateCache.put(\"app/components/landingpage/management/settings/role/role_mgmt.html\",\"<!DOCTYPE html><style>.icar-new-group {\\n        border: 1px solid #ccc;\\n        display:none;\\n    }\\n    .icar-new-group.active {\\n        display:block;\\n    }</style><span ng-if=vm.currentGroupAsset>Group Name : {{vm.currentGroupAsset.name}}</span><br><md-button class=md-accent ng-show=vm.showBtn ng-click=vm.showNewRoleField()>Create Role</md-button><md-button class=md-accent ng-if=vm.currentGroupAsset.assignGroup ng-click=vm.assignUsers(vm.currentGroupAsset)>Assign User</md-button><md-button class=md-accent ng-if=vm.currentGroupAsset.assignRole ng-click=vm.assignRoles(vm.currentGroupAsset)>Assign Group</md-button><div class=\\\"list list-inset icar-new-group\\\" ng-class=\\\"{\\'active\\':vm.isdiplay}\\\"><md-content layout=column><md-input-container flex><label>Enter Role Name</label><input type=text ng-model=vm.newRoleName></md-input-container><md-button class=md-accent ng-click=vm.createRole(); flex=66>Create Role</md-button></md-content></div><br><script type=text/ng-template id=outside-panel-header.html><div class=\\\"md-title\\\">{{myAsset.name}}</div>\\n    <div class=\\\"md-summary\\\"></div>\\n    <md-expansion-panel-icon></md-expansion-panel-icon></script><script type=text/ng-template id=outside-panel-content.html><div class=\\\"md-title\\\">{{myAsset.name}}</div>\\n\\n    <a class=\\\"waves-effect waves-light btn ng-isolate-scope\\\"\\n       ng-if=\\\"myAsset.assignPermission\\\"\\n         ng-click=\\\"vm.addPermission(myAsset)\\\">\\n        Assign Permissions\\n    </a></script><multi-list data=groupData></multi-list><md-expansion-panel-group md-component-id=vehicleGroup flex><md-expansion-panel md-component-id=$index ng-repeat=\\\"myAsset in vm.assets track by $index\\\"><md-expansion-panel-collapsed ng-include=\\\"\\'outside-panel-header.html\\'\\\"></md-expansion-panel-collapsed><md-expansion-panel-expanded><md-expansion-panel-header ng-click=$panel.collapse()><div style=display:inherit;width:100% ng-include=\\\"\\'outside-panel-header.html\\'\\\"></div></md-expansion-panel-header><md-expansion-panel-content><div ng-include=\\\"\\'outside-panel-content.html\\'\\\"></div></md-expansion-panel-content><md-expansion-panel-footer md-no-sticky=true></md-expansion-panel-footer></md-expansion-panel-expanded></md-expansion-panel></md-expansion-panel-group><div style=\\\"visibility: hidden\\\"><div class=md-dialog-container id=myDialog></div></div>\");\n$templateCache.put(\"app/components/landingpage/management/settings/tabs/settings.html\",\"<!DOCTYPE html><div layout=column class=demo><!--<md-toolbar>--><!--<h2 class=\\\"md-toolbar-tools\\\">--><!--<span>Settings</span>--><!--</h2>--><!--</md-toolbar>--><!--<md-tabs md-stretch-tabs md-selected=\\\"selectedIndex\\\">--><!--&lt;!&ndash;<md-tab md-on-select=\\\"$state.transitionTo(home.management.vehicle, params1)\\\"><md-tab-label>Label1</md-tab-label></md-tab>&ndash;&gt;--><!--&lt;!&ndash;<md-tab ui-sref=\\\"home.management.vehicle\\\" label=\\\"vehicle\\\"></md-tab>&ndash;&gt;--><!--<md-tab>--><!--<md-tab-label><span ui-sref=\\\"home.management.vehicle\\\">vehicle</span></md-tab-label>--><!--</md-tab>--><!--<md-tab>--><!--<md-tab-label><span ui-sref=\\\"home.management.group\\\">group</span></md-tab-label>--><!--</md-tab>--><!--<md-tab>--><!--<md-tab-label><span ui-sref=\\\"home.management.user\\\">user</span></md-tab-label>--><!--</md-tab>--><!--</md-tabs>--><!--<md-tabs>--><!--<md-tab md-on-select=\\\"transitionTo(\\'home.management.vehicle\\')\\\">--><!--<md-tab-label>Vehicle</md-tab-label>--><!--</md-tab>--><!--<md-tab md-on-select=\\\"transitionTo(\\'home.management.group\\')\\\">--><!--<md-tab-label>Group</md-tab-label>--><!--</md-tab>--><!--<md-tab md-on-select=\\\"transitionTo(\\'home.management.user\\')\\\">--><!--<md-tab-label>User</md-tab-label>--><!--</md-tab>--><!--</md-tabs>--><md-tabs md-selected=vm.selectedTab><md-tab ng-click=vm.tabClick(assetType) ng-repeat=\\\"assetType in vm.tabs\\\"><md-tab-label>{{assetType}}</md-tab-label></md-tab></md-tabs><div id=mytabcontent ui-view=mgmttab flex></div><!--<div class=\\\"row\\\">--><!--<div class=\\\"col s12\\\">--><!--<ul class=\\\"tabs\\\">--><!--<li class=\\\"tab col s3\\\" ng-click=\\\"vm.tabClick(assetType)\\\"--><!--ng-repeat=\\\"assetType in vm.tabs track by $index\\\">--><!--<a href=\\\"#mytabcontent\\\" ng-class=\\\"{true: \\'active\\', false:\\'inactive\\'}[vm.selectedTab == $index]\\\">--><!--{{assetType}}--><!--</a>--><!--</li>--><!--</ul>--><!--</div>--><!--{{vm.selectedTab}}--><!--<div id=\\\"mytabcontent\\\" class=\\\"col s12\\\" ui-view=\\\"mgmttab\\\" flex>Test 1</div>--><!--</div>--></div><script>$(document).ready(function(){\\n\\n\\n    })</script>\");\n$templateCache.put(\"app/components/landingpage/management/settings/user/user_mgmt.html\",\"<!DOCTYPE html><style>.icar-new-group {\\n        border: 1px solid #ccc;\\n        display:none;\\n    }\\n    .icar-new-group.active {\\n        display:block;\\n    }</style><span ng-if=vm.currentGroupAsset>Group Name : {{vm.currentGroupAsset.name}}</span><br><md-button class=md-accent ng-show=vm.showBtn ng-click=vm.showNewUserField()>Create User</md-button><md-button class=md-accent ng-if=vm.currentGroupAsset.assignGroup ng-click=vm.assignUsers(vm.currentGroupAsset)>Assign Group</md-button><md-button class=md-accent ng-if=vm.currentGroupAsset.assignRole ng-click=vm.assignRoles(vm.currentGroupAsset)>Assign Role</md-button><div class=\\\"list list-inset icar-new-group\\\" ng-class=\\\"{\\'active\\':vm.isdiplay}\\\"><md-content layout=column><br><div class=error ng-show=vm.errorMsg style=color:red>{{vm.errorMsg}}</div><md-input-container flex><div layout=row><label>Username</label><input type=text ng-model=vm.newUser.name></div></md-input-container><md-input-container flex><div layout=row><label>Password</label><input type=password ng-model=vm.newUser.password autocomplete=off></div></md-input-container><md-input-container flex><div layout=row><label>Confirm Password</label><input type=password ng-model=vm.confirmPassword autocomplete=off></div></md-input-container><md-button class=md-accent ng-click=vm.createUser() flex=66>Create User</md-button></md-content></div><br><script type=text/ng-template id=outside-panel-header.html><div class=\\\"md-title\\\">{{myAsset.name}}</div>\\n    <div class=\\\"md-summary\\\"></div>\\n    <md-expansion-panel-icon></md-expansion-panel-icon></script><script type=text/ng-template id=outside-panel-content.html><div class=\\\"md-title\\\">{{myAsset.name}}</div>\\n    <!--<icar-expanel ng-repeat=\\\"item in vm.vehicleinfo track by $index\\\"-->\\n    <!--details=\\\"item\\\" schema=\\\"item.schema\\\" layout></icar-expanel>-->\\n    <div class=\\\"waves-effect waves-light btn ng-isolate-scope\\\" ng-if=\\\"myAsset.assignGroup\\\"\\n         ng-click=\\\"vm.assignGroups(myAsset)\\\">\\n        Assign Group\\n    </div>\\n    <a class=\\\"waves-effect waves-light btn ng-isolate-scope\\\"\\n       ng-if=\\\"myAsset.assignRole\\\"\\n       ng-click=\\\"vm.assignRoles(myAsset)\\\">Assign Role</a></script><multi-list data=groupData></multi-list><style>.expansion-panel {\\n        height: 500px;\\n        overflow: auto;\\n        display: block;\\n    }</style><md-expansion-panel-group class=expansion-panel md-component-id=vehicleGroup flex><md-expansion-panel md-component-id=$index ng-repeat=\\\"myAsset in vm.assets track by $index\\\"><md-expansion-panel-collapsed ng-include=\\\"\\'outside-panel-header.html\\'\\\"></md-expansion-panel-collapsed><md-expansion-panel-expanded><md-expansion-panel-header ng-click=$panel.collapse()><div style=display:inherit;width:100% ng-include=\\\"\\'outside-panel-header.html\\'\\\"></div></md-expansion-panel-header><md-expansion-panel-content><div ng-include=\\\"\\'outside-panel-content.html\\'\\\"></div></md-expansion-panel-content><md-expansion-panel-footer md-no-sticky=true></md-expansion-panel-footer></md-expansion-panel-expanded></md-expansion-panel></md-expansion-panel-group>\");\n$templateCache.put(\"app/components/landingpage/management/settings/vehicle/vehicle_mgmt.html\",\"<!DOCTYPE html><style>.icar-new-group {\\n        border: 1px solid #ccc;\\n        display:none;\\n    }\\n    .icar-new-group.active {\\n        display:block;\\n    }</style><span ng-if=vm.currentGroupAsset>Group Name : {{vm.currentGroupAsset.name}}</span><br><md-button class=md-accent ng-show=vm.showBtn ng-click=vm.showNewVehicleField()>Add Vehicle</md-button><div class=\\\"list list-inset icar-new-group\\\" ng-class=\\\"{\\'active\\':vm.isdiplay}\\\"><div class=error ng-show=vm.msg style=color:red><span>{{vm.msg}}</span></div></div><br><script type=text/ng-template id=outside-panel-header.html><div class=\\\"md-title\\\">{{myAsset.name}}</div>\\n    <div class=\\\"md-summary\\\"></div>\\n    <md-expansion-panel-icon></md-expansion-panel-icon></script><script type=text/ng-template id=outside-panel-content.html><div class=\\\"md-title\\\">{{myAsset.name}}</div>\\n    <!--<icar-expanel ng-repeat=\\\"item in vm.vehicleinfo track by $index\\\"-->\\n    <!--details=\\\"item\\\" schema=\\\"item.schema\\\" layout></icar-expanel>--></script><style>.expansion-panel {\\n        height: 500px;\\n        overflow: auto;\\n        display: block;\\n    }</style><md-expansion-panel-group class=expansion-panel md-component-id=vehicleGroup flex><md-expansion-panel md-component-id=$index ng-repeat=\\\"myAsset in vm.assets track by $index\\\"><md-expansion-panel-collapsed ng-include=\\\"\\'outside-panel-header.html\\'\\\"></md-expansion-panel-collapsed><md-expansion-panel-expanded><md-expansion-panel-header ng-click=$panel.collapse()><div style=display:inherit;width:100% ng-include=\\\"\\'outside-panel-header.html\\'\\\"></div></md-expansion-panel-header><md-expansion-panel-content><div ng-include=\\\"\\'outside-panel-content.html\\'\\\"></div></md-expansion-panel-content><md-expansion-panel-footer md-no-sticky=true></md-expansion-panel-footer></md-expansion-panel-expanded></md-expansion-panel></md-expansion-panel-group>\");\n$templateCache.put(\"app/components/landingpage/dashboard/map/test/multimarker/map.html\",\"<!DOCTYPE html><div><ui-gmap-google-map center=vm.inMap.center zoom=vm.inMap.zoom draggable=true options=vm.options bounds=vm.inMap.bounds><!--<ui-gmap-marker coords=\\\"vm.marker.coords\\\" options=\\\"vm.marker.options\\\"--><!--events=\\\"vm.marker.events\\\" idkey=\\\"vm.marker.id\\\"></ui-gmap-marker>--><ui-gmap-markers models=vm.randomMarkers coords=\\\"\\'self\\'\\\" icon=\\\"\\'icon\\'\\\"></ui-gmap-markers></ui-gmap-google-map></div>\");\n$templateCache.put(\"app/components/landingpage/dashboard/map/test/singlemarker/map.html\",\"<!DOCTYPE html><div><ui-gmap-google-map center=vm.inMap.center zoom=vm.inMap.zoom><ui-gmap-marker coords=vm.marker.coords options=vm.marker.options events=vm.marker.events idkey=vm.marker.id></ui-gmap-marker></ui-gmap-google-map></div>\");}]);"],"sourceRoot":"/source/"}