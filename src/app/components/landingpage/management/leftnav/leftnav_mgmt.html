<!DOCTYPE html>

<style>
    md-checkbox {
        margin: 8px;
        cursor: pointer;
        padding-left: 0px;
        padding-right: 0;
        line-height: 4px;
        min-width: 18px;
        min-height: 1px;
    }
    md-sidenav{height:100%;}
    md-checkbox span{font-weight:normal;}

    .angular-ui-tree-node, .angular-ui-tree-placeholder{line-height:22px;}

    .hidden {
        display: none!important;
        visibility: hidden!important;
    }

    .search-result {
        font-size:13px;
        font-style:italic;
        font-weight:normal;
    }
</style>


<!-- Template for parent nodes -->
<script type="text/ng-template" id="parent_nodes_renderer.html">
    <div class="icar-wrap-text">
        <a ng-click="toggle(this); item.collapsed = !item.collapsed" style="cursor:pointer;" ng-show="item.items.length > 0">
            <md-icon md-font-library="material-icons" ng-show="item.collapsed">arrow_drop_down</md-icon>
            <md-icon md-font-library="material-icons" ng-show="!item.collapsed">play_arrow</md-icon>
        </a>
        <span ng-hide="item.items.length" style="padding-left:20px;"></span>
        <span ng-click="vm.handleAssetClick(item, item.collapsed, toggle, this); item.collapsed = true"
              style="cursor:pointer;">{{item.title | titleCase }}
        </span ><br/>
        <!--<span ng-click="vm.handleAssetClick(item, item.collapsed, toggle, this); item.collapsed = !item.collapsed"-->
              <!--style="cursor:pointer;">{{item.title | titleCase }}-->
        <!--</span ><br/>-->
    </div>
    <ol ui-tree-nodes ng-model="item.items" ng-show="item.collapsed">
        <li ng-repeat="item in item.items" ui-tree-node
            ng-hide="!treeFilter(item, vm.tree_search_pattern, supportedFields)"
            ng-include="(item.items) ? 'parent_nodes_renderer.html' : 'terminal_node_renderer.html'">  </li>
    </ol>
</script>

<!-- Template for terminal nodes -->
<script type="text/ng-template" id="terminal_node_renderer.html">
    <div class="tree-node tree-node-content">
        <md-checkbox aria-label="chekbox" ng-checked="item.checkStatus === 'checked'"
                     md-indeterminate="item.checkStatus === 'partlyChecked'"
                     ng-click="vm.toggleCheck(item)"
                     data-nodrag>
        </md-checkbox>
        <span style="cursor:default;">{{item.title | titleCase}}
        </span>
    </div>
</script>

<md-sidenav  class="md-sidenav-left" md-component-id="left"
             md-is-locked-open = "left_nav_toggle" flex>
    <!--The ROot Node-->

    <md-input-container>
        <label>Search</label>
        <input type="text" ng-model="vm.tree_search_pattern" ng-change="vm.expand_tree()">
        <span class="search-result" ng-hide="!vm.search_results"> 0 results found</span>
    </md-input-container>

    <md-button ng-click="vm.expand_tree()">Expand</md-button>

    <div ui-tree id="tree-root" callbacks="treeOptions">
        <ol ui-tree-nodes ng-model="vm.tree_data" ng-class="{hidden: collapsed}">
            <li ng-repeat="item in vm.tree_data" ui-tree-node data-nodrag data-collapsed="item.collapsed"
                ng-hide="vm.search_results = !treeFilter(item, vm.tree_search_pattern, supportedFields)"
                ng-include="(item.items) ? 'parent_nodes_renderer.html' : 'terminal_node_renderer.html'"></li>
        </ol>
    </div>
</md-sidenav>
