<!DOCTYPE html>

<style>

    md-toolbar {
        min-height: 20px;
    }

    .map-dialog {
        padding: 0 !important
    }

    .map-dialog-content {
        overflow: hidden;
    }

    .input-fields {
        margin-top: -24px;
    }

    .error-msg {
        color: #f00;
        font-size: 10px;
        min-height: 20px;
    }

    md-toolbar.md-default-theme:not(.md-menu-toolbar), md-toolbar:not(.md-menu-toolbar) {
        background: #d1e934;
    }

    .play-pause-btns {
        background: #d1e934 !important;
    }

    /*.md-dialog-container {*/
    /*display: flex;*/
    /*justify-content: center;*/
    /*align-items: center;*/
    /*position: absolute;*/
    /*left: 0;*/
    /*top: 0;*/
    /*right: 0;*/
    /*bottom: 0;*/
    /*z-index: $z-index-dialog;*/
    /*}*/

    /*.md-dialog-container{height:100%;}*/
    /*md-dialog{max-width:100%;}*/

    .btn {
        background-color: #d1e934;
        border: none;
        color: white;
        padding: 18px 12px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        /* border-radius: 100%; */
        width: 10px;
        box-shadow: 1px 1px 8px 0px #FFF;
        height: 10px;
    }

    .btn-img {
        background: url('assets/images/play.png') no-repeat;
        width: 13px;
    }

    .btn:hover {
        cursor: pointer;
    }

    .history-dialog .angular-google-map-container {
        height: 477px;
    }
</style>

<script type="text/ng-template" id="historyInfoWindow.html">
    <div style="width:150px; height:82px; max-width:150px; min-width:150px; overflow:hidden; padding-top:5px;">
        <table>
            <tr>
                <td>Date</td>
                <td><strong>{{parameter.data.gpstime | date : 'dd MMM yyyy'}}</strong></td>
            </tr>
            <tr>
                <td>Time</td>
                <td><strong>{{parameter.data.gpstime | date : 'h:mm a'}}</strong></td>
            </tr>
            <tr>
                <td style="padding-right:5px;">Odometer</td>
                <td><strong>{{parameter.data.odometer}}</strong></td>
            </tr>
            <tr>
                <td>Speed</td>
                <td><strong>{{parameter.data.speed}}</strong></td>
            </tr>
        </table>
    </div>
</script>

<md-dialog aria-label="Location Tracker History" ng-cloak flex="85">
    <md-toolbar style="height:42px; text-align:center;">
        <div class="md-toolbar-tools md-accent">
            <h2 layout-align="center center" style="width:100%">Location History</h2>
            <span flex></span>
            <md-button class="md-icon-button" ng-click="cancel()">
                <md-icon md-font-library="material-icons">close</md-icon>
            </md-button>
        </div>
    </md-toolbar>
    <span class="error-msg">{{errorMsg}}</span><br/>

    <div layout="row" layout-align="space-around center">
        <div layout="row" class="input-fields" layout-align="space-around center" flex>
            <md-input-container>
                <label>Vehicle No</label>
                <input type="text" ng-model="vehicleNumber" readonly>
            </md-input-container>

            <md-input-container>
                <label>Start Time</label>
                <input type="text" id="start_time" ng-model="startTime">
            </md-input-container>

            <md-input-container>
                <label>End Time</label>
                <input type="text" id="end_time" ng-model="endTime">
            </md-input-container>
        </div>
        <div layout="row" layout-align="end start">
            <md-button class="md-accent" ng-click="getHistory()">Get History</md-button>
        </div>
    </div>

    <md-dialog-content class="map-dialog-content">
        <div class="md-dialog-content map-dialog history-dialog">
            <ui-gmap-google-map center='historyMap.center' zoom='historyMap.zoom' draggable="true"
                                options="historyMap.mapOptions" bounds="historyMap.bounds"
                                control="historyMap.mapControl">

                <ui-gmap-map-control
                        template="app/components/landingpage/dashboard/map/history-map-control.html"
                        controller="InnerMapController"
                        position="top-right"></ui-gmap-map-control>

                </ui-gmap-map-control>

                <ui-gmap-marker
                        idkey="'self'"
                        coords="clickedMarker"
                        click="clickedMarker.click"
                        options="clickedMarker.options"
                        events="clickedMarker.events"
                        control="clickedMarker.control">
                </ui-gmap-marker>

                <ui-gmap-polyline
                        path="trace.path"
                        stroke="trace.stroke"
                        clickable="trace.clickable"
                        geodesic="trace.geodesic"
                        visible="trace.visible"
                        fit="trace.fit"
                        static="trace.static"
                        events="trace.events"
                        icons="trace.icons">
                </ui-gmap-polyline>

                <ui-gmap-window show="historyInfoWindow.show" coords="historyInfoWindow.coords"
                                control="historyInfoWindow.control"
                                options="historyInfoWindow.options" closeClick="historyInfoWindowClose()"
                                templateUrl="'historyInfoWindow.html'"
                                templateParameter="historyInfoWindow"
                                isIconVisibleOnClick="true">
                </ui-gmap-window>

            </ui-gmap-google-map>
        </div>
    </md-dialog-content>
</md-dialog>

<script>
    $(document).ready(function () {
        $('#start_time').datetimepicker({
            mask: '9999/19/39 29:59',
            format: 'Y-M-d H:i'
        });

        $('#end_time').datetimepicker({
            mask: '9999/19/39 29:59',
            format: 'Y-M-d H:i'

        });
    });
</script>
